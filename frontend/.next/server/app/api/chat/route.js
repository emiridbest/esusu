(()=>{var e={};e.id=276,e.ids=[276],e.modules={3657:(e,t,r)=>{"use strict";r.d(t,{e:()=>d});var n=r(45722),a=r(33069),s=r(18183),i=r(35154),o=r(61927);class l extends o.C{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}var u=r(21314),c=r(6528);function d(e){let t={},r=e.length;for(let n=0;n<r;n++){let r=e[n];if(!(0,u.WL)(r))continue;let a=(0,u.FO)(r);if(!a)throw new i.s7({signature:r,type:"struct"});let s=a.properties.split(";"),o=[],l=s.length;for(let e=0;e<l;e++){let t=s[e].trim();if(!t)continue;let r=(0,c.Pj)(t,{type:"struct"});o.push(r)}if(!o.length)throw new i.X9({signature:r});t[a.name]=o}let o={},d=Object.entries(t),f=d.length;for(let e=0;e<f;e++){let[r,i]=d[e];o[r]=function e(t,r,i=new Set){let o=[],u=t.length;for(let d=0;d<u;d++){let u=t[d];if(n.wj.test(u.type))o.push(u);else{let t=(0,n.Yv)(p,u.type);if(!t?.type)throw new s.nx({abiParameter:u});let{array:d,type:f}=t;if(f in r){if(i.has(f))throw new l({type:f});o.push({...u,type:`tuple${d??""}`,components:e(r[f]??[],r,new Set([...i,f]))})}else if((0,c._o)(f))o.push(u);else throw new a.zz({type:f})}}return o}(i,t)}return o}let p=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/},4719:(e,t,r)=>{"use strict";r.d(t,{ME:()=>u,Nx:()=>l,Sl:()=>i,uU:()=>o});var n=r(66509),a=r(80298),s=r(30891);function i(e,{size:t}){if((0,a.E)(e)>t)throw new n.u({givenSize:(0,a.E)(e),maxSize:t})}function o(e,t={}){let{signed:r}=t;t.size&&i(e,{size:t.size});let n=BigInt(e);if(!r)return n;let a=(e.length-2)/2;return n<=(1n<<8n*BigInt(a)-1n)-1n?n:n-BigInt(`0x${"f".padStart(2*a,"f")}`)-1n}function l(e,t={}){let r=e;if(t.size&&(i(r,{size:t.size}),r=(0,s.B)(r)),"0x00"===(0,s.B)(r))return!1;if("0x01"===(0,s.B)(r))return!0;throw new n.H2(r)}function u(e,t={}){return Number(o(e,t))}},6528:(e,t,r)=>{"use strict";r.d(t,{_o:()=>g,Pj:()=>m,uT:()=>d});var n=r(45722),a=r(33069),s=r(18183),i=r(35154),o=r(61927);class l extends o.C{constructor({current:e,depth:t}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${t>0?"opening":"closing"} parentheses.`],details:`Depth "${t}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}let u=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);var c=r(21314);function d(e,t={}){if((0,c.Ji)(e))return function(e,t={}){let r=(0,c.ej)(e);if(!r)throw new i.s7({signature:e,type:"function"});let n=y(r.parameters),a=[],s=n.length;for(let e=0;e<s;e++)a.push(m(n[e],{modifiers:c.v7,structs:t,type:"function"}));let o=[];if(r.returns){let e=y(r.returns),n=e.length;for(let r=0;r<n;r++)o.push(m(e[r],{modifiers:c.v7,structs:t,type:"function"}))}return{name:r.name,type:"function",stateMutability:r.stateMutability??"nonpayable",inputs:a,outputs:o}}(e,t);if((0,c.Rv)(e))return function(e,t={}){let r=(0,c.iB)(e);if(!r)throw new i.s7({signature:e,type:"event"});let n=y(r.parameters),a=[],s=n.length;for(let e=0;e<s;e++)a.push(m(n[e],{modifiers:c.fC,structs:t,type:"event"}));return{name:r.name,type:"event",inputs:a}}(e,t);if((0,c.pc)(e))return function(e,t={}){let r=(0,c.kz)(e);if(!r)throw new i.s7({signature:e,type:"error"});let n=y(r.parameters),a=[],s=n.length;for(let e=0;e<s;e++)a.push(m(n[e],{structs:t,type:"error"}));return{name:r.name,type:"error",inputs:a}}(e,t);if((0,c.l9)(e))return function(e,t={}){let r=(0,c.Yo)(e);if(!r)throw new i.s7({signature:e,type:"constructor"});let n=y(r.parameters),a=[],s=n.length;for(let e=0;e<s;e++)a.push(m(n[e],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:r.stateMutability??"nonpayable",inputs:a}}(e,t);if((0,c.v8)(e)){var r=e;let t=(0,c.If)(r);if(!t)throw new i.s7({signature:r,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}if((0,c.sP)(e))return{type:"receive",stateMutability:"payable"};throw new i.x8({signature:e})}let p=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,f=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,h=/^u?int$/;function m(e,t){var r,i;let o,l=function(e,t,r){let n="";if(r)for(let e of Object.entries(r)){if(!e)continue;let t="";for(let r of e[1])t+=`[${r.type}${r.name?`:${r.name}`:""}]`;n+=`(${e[0]}{${t}})`}return t?`${t}:${e}${n}`:e}(e,t?.type,t?.structs);if(u.has(l))return u.get(l);let d=n.wj.test(e),v=(0,n.Yv)(d?f:p,e);if(!v)throw new s.dV({param:e});if(v.name&&("address"===(r=v.name)||"bool"===r||"function"===r||"string"===r||"tuple"===r||n.BD.test(r)||n.Ge.test(r)||b.test(r)))throw new s.zd({param:e,name:v.name});let w=v.name?{name:v.name}:{},x="indexed"===v.modifier?{indexed:!0}:{},_=t?.structs??{},E={};if(d){o="tuple";let e=y(v.type),t=[],r=e.length;for(let n=0;n<r;n++)t.push(m(e[n],{structs:_}));E={components:t}}else if(v.type in _)o="tuple",E={components:_[v.type]};else if(h.test(v.type))o=`${v.type}256`;else if(o=v.type,t?.type!=="struct"&&!g(o))throw new a.UG({type:o});if(v.modifier){if(!t?.modifiers?.has?.(v.modifier))throw new s.NO({param:e,type:t?.type,modifier:v.modifier});if(c.v7.has(v.modifier)&&(i=o,!v.array&&"bytes"!==i&&"string"!==i&&"tuple"!==i))throw new s.Pj({param:e,type:t?.type,modifier:v.modifier})}let I={type:`${o}${v.array??""}`,...w,...x,...E};return u.set(l,I),I}function y(e,t=[],r="",n=0){let a=e.trim().length;for(let s=0;s<a;s++){let a=e[s],i=e.slice(s+1);switch(a){case",":return 0===n?y(i,[...t,r.trim()]):y(i,t,`${r}${a}`,n);case"(":return y(i,t,`${r}${a}`,n+1);case")":return y(i,t,`${r}${a}`,n-1);default:return y(i,t,`${r}${a}`,n)}}if(""===r)return t;if(0!==n)throw new l({current:r,depth:n});return t.push(r.trim()),t}function g(e){return"address"===e||"bool"===e||"function"===e||"string"===e||n.BD.test(e)||n.Ge.test(e)}let b=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/},8486:(e,t,r)=>{"use strict";r.d(t,{B4:()=>a,SK:()=>s,hX:()=>i});var n=r(24029);class a extends n.C{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class s extends n.C{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class i extends n.C{constructor({count:e,limit:t}){super(`Recursive read limit of \`${t}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11246:(e,t,r)=>{"use strict";function n(e,{strict:t=!0}={}){return!!e&&"string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}r.d(t,{q:()=>n})},12816:(e,t,r)=>{"use strict";let n,a,s;r.r(t),r.d(t,{patchFetch:()=>vB,routeModule:()=>vj,serverHooks:()=>vR,workAsyncStorage:()=>vN,workUnitAsyncStorage:()=>vM});var i,o,l,u,c,d,p,f,h,m,y,g,b,v,w,x,_,E,I,T,k,P,A,S,O,$,C,j,N,M,R,B,F,U,D,z,q,L,Z,V,G,H,K,W,J,Y,X,Q,ee={};r.r(ee),r.d(ee,{OG:()=>mI,My:()=>mm,Ph:()=>mb,lX:()=>mv,Id:()=>mE,fg:()=>mP,qj:()=>m_,aT:()=>mg,lq:()=>mw,z:()=>mx,Q5:()=>mS});var et={};r.r(et),r.d(et,{POST:()=>vC});var er=r(96559),en=r(48088),ea=r(37719),es="vercel.ai.error",ei=Symbol.for(es),eo=class e extends Error{constructor({name:e,message:t,cause:r}){super(t),this[i]=!0,this.name=e,this.cause=r}static isInstance(t){return e.hasMarker(t,es)}static hasMarker(e,t){let r=Symbol.for(t);return null!=e&&"object"==typeof e&&r in e&&"boolean"==typeof e[r]&&!0===e[r]}};i=ei;var el=eo,eu="AI_APICallError",ec=`vercel.ai.error.${eu}`,ed=Symbol.for(ec),ep=class extends el{constructor({message:e,url:t,requestBodyValues:r,statusCode:n,responseHeaders:a,responseBody:s,cause:i,isRetryable:l=null!=n&&(408===n||409===n||429===n||n>=500),data:u}){super({name:eu,message:e,cause:i}),this[o]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=a,this.responseBody=s,this.isRetryable=l,this.data=u}static isInstance(e){return el.hasMarker(e,ec)}};o=ed;var ef="AI_EmptyResponseBodyError",eh=`vercel.ai.error.${ef}`,em=Symbol.for(eh),ey=class extends el{constructor({message:e="Empty response body"}={}){super({name:ef,message:e}),this[l]=!0}static isInstance(e){return el.hasMarker(e,eh)}};function eg(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}l=em;var eb="AI_InvalidArgumentError",ev=`vercel.ai.error.${eb}`,ew=Symbol.for(ev),ex=class extends el{constructor({message:e,cause:t,argument:r}){super({name:eb,message:e,cause:t}),this[u]=!0,this.argument=r}static isInstance(e){return el.hasMarker(e,ev)}};u=ew;var e_="AI_InvalidPromptError",eE=`vercel.ai.error.${e_}`,eI=Symbol.for(eE),eT=class extends el{constructor({prompt:e,message:t,cause:r}){super({name:e_,message:`Invalid prompt: ${t}`,cause:r}),this[c]=!0,this.prompt=e}static isInstance(e){return el.hasMarker(e,eE)}};c=eI;var ek="AI_InvalidResponseDataError",eP=`vercel.ai.error.${ek}`,eA=Symbol.for(eP),eS=class extends el{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:ek,message:t}),this[d]=!0,this.data=e}static isInstance(e){return el.hasMarker(e,eP)}};d=eA;var eO="AI_JSONParseError",e$=`vercel.ai.error.${eO}`,eC=Symbol.for(e$),ej=class extends el{constructor({text:e,cause:t}){super({name:eO,message:`JSON parsing failed: Text: ${e}.
Error message: ${eg(t)}`,cause:t}),this[p]=!0,this.text=e}static isInstance(e){return el.hasMarker(e,e$)}};p=eC;var eN="AI_LoadAPIKeyError",eM=`vercel.ai.error.${eN}`,eR=Symbol.for(eM),eB=class extends el{constructor({message:e}){super({name:eN,message:e}),this[f]=!0}static isInstance(e){return el.hasMarker(e,eM)}};f=eR;var eF=Symbol.for("vercel.ai.error.AI_LoadSettingError"),eU=Symbol.for("vercel.ai.error.AI_NoContentGeneratedError"),eD="AI_NoSuchModelError",ez=`vercel.ai.error.${eD}`,eq=Symbol.for(ez),eL=class extends el{constructor({errorName:e=eD,modelId:t,modelType:r,message:n=`No such ${r}: ${t}`}){super({name:e,message:n}),this[h]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return el.hasMarker(e,ez)}};h=eq;var eZ="AI_TooManyEmbeddingValuesForCallError",eV=`vercel.ai.error.${eZ}`,eG=Symbol.for(eV),eH=class extends el{constructor(e){super({name:eZ,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[m]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return el.hasMarker(e,eV)}};m=eG;var eK="AI_TypeValidationError",eW=`vercel.ai.error.${eK}`,eJ=Symbol.for(eW),eY=class e extends el{constructor({value:e,cause:t}){super({name:eK,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${eg(t)}`,cause:t}),this[y]=!0,this.value=e}static isInstance(e){return el.hasMarker(e,eW)}static wrap({value:t,cause:r}){return e.isInstance(r)&&r.value===t?r:new e({value:t,cause:r})}};y=eJ;var eX="AI_UnsupportedFunctionalityError",eQ=`vercel.ai.error.${eX}`,e0=Symbol.for(eQ),e1=class extends el{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:eX,message:t}),this[g]=!0,this.functionality=e}static isInstance(e){return el.hasMarker(e,eQ)}};function e2(e){return null===e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||(Array.isArray(e)?e.every(e2):"object"==typeof e&&Object.entries(e).every(([e,t])=>"string"==typeof e&&e2(t)))}g=e0;let e6=(e,t=21)=>(r=t)=>{let n="",a=0|r;for(;a--;)n+=e[Math.random()*e.length|0];return n};var e5=r(20492);function e8(...e){return e.reduce((e,t)=>({...e,...null!=t?t:{}}),{})}async function e3(e){return null==e?Promise.resolve():new Promise(t=>setTimeout(t,e))}function e4(e){let t={};return e.headers.forEach((e,r)=>{t[r]=e}),t}var e9=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let a=e6(r,t);if(null==e)return a;if(r.includes(n))throw new ex({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return t=>`${e}${n}${a(t)}`},e7=e9();function te(e){return e instanceof Error&&("AbortError"===e.name||"TimeoutError"===e.name)}var tt=Symbol.for("vercel.ai.validator");function tr({value:e,schema:t}){var r;let n="object"==typeof t&&null!==t&&tt in t&&!0===t[tt]&&"validate"in t?t:(r=t,{[tt]:!0,validate:e=>{let t=r.safeParse(e);return t.success?{success:!0,value:t.data}:{success:!1,error:t.error}}});try{if(null==n.validate)return{success:!0,value:e};let t=n.validate(e);if(t.success)return t;return{success:!1,error:eY.wrap({value:e,cause:t.error})}}catch(t){return{success:!1,error:eY.wrap({value:e,cause:t})}}}function tn({text:e,schema:t}){try{let r=e5.parse(e);if(null==t)return{success:!0,value:r,rawValue:r};let n=tr({value:r,schema:t});return n.success?{...n,rawValue:r}:n}catch(t){return{success:!1,error:ej.isInstance(t)?t:new ej({text:e,cause:t})}}}function ta(e){try{return e5.parse(e),!0}catch(e){return!1}}function ts({provider:e,providerOptions:t,schema:r}){if((null==t?void 0:t[e])==null)return;let n=tr({value:t[e],schema:r});if(!n.success)throw new ex({argument:"providerOptions",message:`invalid ${e} provider options`,cause:n.error});return n.value}var ti=()=>globalThis.fetch,to=async({url:e,headers:t,body:r,failedResponseHandler:n,successfulResponseHandler:a,abortSignal:s,fetch:i})=>tu({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:a,abortSignal:s,fetch:i}),tl=async({url:e,headers:t,formData:r,failedResponseHandler:n,successfulResponseHandler:a,abortSignal:s,fetch:i})=>tu({url:e,headers:t,body:{content:r,values:Object.fromEntries(r.entries())},failedResponseHandler:n,successfulResponseHandler:a,abortSignal:s,fetch:i}),tu=async({url:e,headers:t={},body:r,successfulResponseHandler:n,failedResponseHandler:a,abortSignal:s,fetch:i=ti()})=>{try{var o;let l=await i(e,{method:"POST",headers:(o=t,Object.fromEntries(Object.entries(o).filter(([e,t])=>null!=t))),body:r.content,signal:s}),u=e4(l);if(!l.ok){let t;try{t=await a({response:l,url:e,requestBodyValues:r.values})}catch(t){if(te(t)||ep.isInstance(t))throw t;throw new ep({message:"Failed to process error response",cause:t,statusCode:l.status,url:e,responseHeaders:u,requestBodyValues:r.values})}throw t.value}try{return await n({response:l,url:e,requestBodyValues:r.values})}catch(t){if(t instanceof Error&&(te(t)||ep.isInstance(t)))throw t;throw new ep({message:"Failed to process successful response",cause:t,statusCode:l.status,url:e,responseHeaders:u,requestBodyValues:r.values})}}catch(t){if(te(t))throw t;if(t instanceof TypeError&&"fetch failed"===t.message){let n=t.cause;if(null!=n)throw new ep({message:`Cannot connect to API: ${n.message}`,cause:n,url:e,requestBodyValues:r.values,isRetryable:!0})}throw t}},tc=e=>async({response:t})=>{let r=e4(t);if(null==t.body)throw new ey({});return{responseHeaders:r,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(function(){let e,t,r,n="",a=[];function s(e,t){if(""===e)return void i(t);if(e.startsWith(":"))return;let r=e.indexOf(":");if(-1===r)return void o(e,"");let n=e.slice(0,r),a=r+1;o(n,a<e.length&&" "===e[a]?e.slice(a+1):e.slice(a))}function i(n){a.length>0&&(n.enqueue({event:e,data:a.join("\n"),id:t,retry:r}),a=[],e=void 0,r=void 0)}function o(n,s){switch(n){case"event":e=s;break;case"data":a.push(s);break;case"id":t=s;break;case"retry":let i=parseInt(s,10);isNaN(i)||(r=i)}}return new TransformStream({transform(e,t){let{lines:r,incompleteLine:a}=function(e,t){let r=[],n=e;for(let e=0;e<t.length;){let a=t[e++];"\n"===a?(r.push(n),n=""):"\r"===a?(r.push(n),n="","\n"===t[e+1]&&e++):n+=a}return{lines:r,incompleteLine:n}}(n,e);n=a;for(let e=0;e<r.length;e++)s(r[e],t)},flush(e){s(n,e),i(e)}})}()).pipeThrough(new TransformStream({transform({data:t},r){"[DONE]"!==t&&r.enqueue(tn({text:t,schema:e}))}}))}},td=e=>async({response:t,url:r,requestBodyValues:n})=>{let a=await t.text(),s=tn({text:a,schema:e}),i=e4(t);if(!s.success)throw new ep({message:"Invalid JSON response",cause:s.error,statusCode:t.status,responseHeaders:i,responseBody:a,url:r,requestBodyValues:n});return{responseHeaders:i,value:s.value,rawValue:s.rawValue}},tp=()=>async({response:e,url:t,requestBodyValues:r})=>{let n=e4(e);if(!e.body)throw new ep({message:"Response body is empty",url:t,requestBodyValues:r,statusCode:e.status,responseHeaders:n,responseBody:void 0});try{let t=await e.arrayBuffer();return{responseHeaders:n,value:new Uint8Array(t)}}catch(a){throw new ep({message:"Failed to read response as array buffer",url:t,requestBodyValues:r,statusCode:e.status,responseHeaders:n,responseBody:void 0,cause:a})}},{btoa:tf,atob:th}=globalThis;function tm(e){let t=th(e.replace(/-/g,"+").replace(/_/g,"/"));return Uint8Array.from(t,e=>e.codePointAt(0))}function ty(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return tf(t)}!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(let e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(b||(b={})),(v||(v={})).mergeShapes=(e,t)=>({...e,...t});let tg=b.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),tb=e=>{switch(typeof e){case"undefined":return tg.undefined;case"string":return tg.string;case"number":return isNaN(e)?tg.nan:tg.number;case"boolean":return tg.boolean;case"function":return tg.function;case"bigint":return tg.bigint;case"symbol":return tg.symbol;case"object":if(Array.isArray(e))return tg.array;if(null===e)return tg.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return tg.promise;if("undefined"!=typeof Map&&e instanceof Map)return tg.map;if("undefined"!=typeof Set&&e instanceof Set)return tg.set;if("undefined"!=typeof Date&&e instanceof Date)return tg.date;return tg.object;default:return tg.unknown}},tv=b.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class tw extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(n);else if("invalid_return_type"===a.code)n(a.returnTypeError);else if("invalid_arguments"===a.code)n(a.argumentsError);else if(0===a.path.length)r._errors.push(t(a));else{let e=r,n=0;for(;n<a.path.length;){let r=a.path[n];n===a.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(a))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof tw))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,b.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}tw.create=e=>new tw(e);let tx=(e,t)=>{let r;switch(e.code){case tv.invalid_type:r=e.received===tg.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case tv.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,b.jsonStringifyReplacer)}`;break;case tv.unrecognized_keys:r=`Unrecognized key(s) in object: ${b.joinValues(e.keys,", ")}`;break;case tv.invalid_union:r="Invalid input";break;case tv.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${b.joinValues(e.options)}`;break;case tv.invalid_enum_value:r=`Invalid enum value. Expected ${b.joinValues(e.options)}, received '${e.received}'`;break;case tv.invalid_arguments:r="Invalid function arguments";break;case tv.invalid_return_type:r="Invalid function return type";break;case tv.invalid_date:r="Invalid date";break;case tv.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:b.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case tv.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case tv.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case tv.custom:r="Invalid input";break;case tv.invalid_intersection_types:r="Intersection results could not be merged";break;case tv.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case tv.not_finite:r="Number must be finite";break;default:r=t.defaultError,b.assertNever(e)}return{message:r}},t_=tx;function tE(){return t_}let tI=e=>{let{data:t,path:r,errorMaps:n,issueData:a}=e,s=[...r,...a.path||[]],i={...a,path:s};if(void 0!==a.message)return{...a,path:s,message:a.message};let o="";for(let e of n.filter(e=>!!e).slice().reverse())o=e(i,{data:t,defaultError:o}).message;return{...a,path:s,message:o}};function tT(e,t){let r=tE(),n=tI({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===tx?void 0:tx].filter(e=>!!e)});e.common.issues.push(n)}class tk{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if("aborted"===n.status)return tP;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return tk.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:t,value:a}=n;if("aborted"===t.status||"aborted"===a.status)return tP;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==a.value||n.alwaysSet)&&(r[t.value]=a.value)}return{status:e.value,value:r}}}let tP=Object.freeze({status:"aborted"}),tA=e=>({status:"dirty",value:e}),tS=e=>({status:"valid",value:e}),tO=e=>"aborted"===e.status,t$=e=>"dirty"===e.status,tC=e=>"valid"===e.status,tj=e=>"undefined"!=typeof Promise&&e instanceof Promise;function tN(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function tM(e,t,r,n,a){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!a)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r}"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(w||(w={}));class tR{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let tB=(e,t)=>{if(tC(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new tw(e.common.issues);return this._error=t,this._error}}};function tF(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:(t,a)=>{var s,i;let{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:a.defaultError}:void 0===a.data?{message:null!=(s=null!=o?o:n)?s:a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:null!=(i=null!=o?o:r)?i:a.defaultError}},description:a}}class tU{get description(){return this._def.description}_getType(e){return tb(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:tb(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new tk,ctx:{common:e.parent.common,data:e.data,parsedType:tb(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(tj(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let n={common:{issues:[],async:null!=(r=null==t?void 0:t.async)&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tb(e)},a=this._parseSync({data:e,path:n.path,parent:n});return tB(n,a)}"~validate"(e){var t,r;let n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tb(e)};if(!this["~standard"].async)try{let t=this._parseSync({data:e,path:[],parent:n});return tC(t)?{value:t.value}:{issues:n.common.issues}}catch(e){(null==(r=null==(t=null==e?void 0:e.message)?void 0:t.toLowerCase())?void 0:r.includes("encountered"))&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(e=>tC(e)?{value:e.value}:{issues:n.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tb(e)},n=this._parse({data:e,path:r.path,parent:r});return tB(r,await (tj(n)?n:Promise.resolve(n)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let a=e(t),s=()=>n.addIssue({code:tv.custom,...r(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then(e=>!!e||(s(),!1)):!!a||(s(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new rE({schema:this,typeName:E.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return rI.create(this,this._def)}nullable(){return rT.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ri.create(this)}promise(){return r_.create(this,this._def)}or(e){return rl.create([this,e],this._def)}and(e){return rd.create(this,e,this._def)}transform(e){return new rE({...tF(this._def),schema:this,typeName:E.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new rk({...tF(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:E.ZodDefault})}brand(){return new rO({typeName:E.ZodBranded,type:this,...tF(this._def)})}catch(e){return new rP({...tF(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:E.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return r$.create(this,e)}readonly(){return rC.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let tD=/^c[^\s-]{8,}$/i,tz=/^[0-9a-z]+$/,tq=/^[0-9A-HJKMNP-TV-Z]{26}$/i,tL=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,tZ=/^[a-z0-9_-]{21}$/i,tV=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,tG=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,tH=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,tK=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,tW=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,tJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,tY=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,tX=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,tQ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,t0="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",t1=RegExp(`^${t0}$`);function t2(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function t6(e){let t=`${t0}T${t2(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)}class t5 extends tU{_parse(e){var t,r,a,s;let i;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==tg.string){let t=this._getOrReturnCtx(e);return tT(t,{code:tv.invalid_type,expected:tg.string,received:t.parsedType}),tP}let o=new tk;for(let l of this._def.checks)if("min"===l.kind)e.data.length<l.value&&(tT(i=this._getOrReturnCtx(e,i),{code:tv.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),o.dirty());else if("max"===l.kind)e.data.length>l.value&&(tT(i=this._getOrReturnCtx(e,i),{code:tv.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),o.dirty());else if("length"===l.kind){let t=e.data.length>l.value,r=e.data.length<l.value;(t||r)&&(i=this._getOrReturnCtx(e,i),t?tT(i,{code:tv.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):r&&tT(i,{code:tv.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),o.dirty())}else if("email"===l.kind)tH.test(e.data)||(tT(i=this._getOrReturnCtx(e,i),{validation:"email",code:tv.invalid_string,message:l.message}),o.dirty());else if("emoji"===l.kind)n||(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n.test(e.data)||(tT(i=this._getOrReturnCtx(e,i),{validation:"emoji",code:tv.invalid_string,message:l.message}),o.dirty());else if("uuid"===l.kind)tL.test(e.data)||(tT(i=this._getOrReturnCtx(e,i),{validation:"uuid",code:tv.invalid_string,message:l.message}),o.dirty());else if("nanoid"===l.kind)tZ.test(e.data)||(tT(i=this._getOrReturnCtx(e,i),{validation:"nanoid",code:tv.invalid_string,message:l.message}),o.dirty());else if("cuid"===l.kind)tD.test(e.data)||(tT(i=this._getOrReturnCtx(e,i),{validation:"cuid",code:tv.invalid_string,message:l.message}),o.dirty());else if("cuid2"===l.kind)tz.test(e.data)||(tT(i=this._getOrReturnCtx(e,i),{validation:"cuid2",code:tv.invalid_string,message:l.message}),o.dirty());else if("ulid"===l.kind)tq.test(e.data)||(tT(i=this._getOrReturnCtx(e,i),{validation:"ulid",code:tv.invalid_string,message:l.message}),o.dirty());else if("url"===l.kind)try{new URL(e.data)}catch(t){tT(i=this._getOrReturnCtx(e,i),{validation:"url",code:tv.invalid_string,message:l.message}),o.dirty()}else"regex"===l.kind?(l.regex.lastIndex=0,l.regex.test(e.data)||(tT(i=this._getOrReturnCtx(e,i),{validation:"regex",code:tv.invalid_string,message:l.message}),o.dirty())):"trim"===l.kind?e.data=e.data.trim():"includes"===l.kind?e.data.includes(l.value,l.position)||(tT(i=this._getOrReturnCtx(e,i),{code:tv.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),o.dirty()):"toLowerCase"===l.kind?e.data=e.data.toLowerCase():"toUpperCase"===l.kind?e.data=e.data.toUpperCase():"startsWith"===l.kind?e.data.startsWith(l.value)||(tT(i=this._getOrReturnCtx(e,i),{code:tv.invalid_string,validation:{startsWith:l.value},message:l.message}),o.dirty()):"endsWith"===l.kind?e.data.endsWith(l.value)||(tT(i=this._getOrReturnCtx(e,i),{code:tv.invalid_string,validation:{endsWith:l.value},message:l.message}),o.dirty()):"datetime"===l.kind?t6(l).test(e.data)||(tT(i=this._getOrReturnCtx(e,i),{code:tv.invalid_string,validation:"datetime",message:l.message}),o.dirty()):"date"===l.kind?t1.test(e.data)||(tT(i=this._getOrReturnCtx(e,i),{code:tv.invalid_string,validation:"date",message:l.message}),o.dirty()):"time"===l.kind?RegExp(`^${t2(l)}$`).test(e.data)||(tT(i=this._getOrReturnCtx(e,i),{code:tv.invalid_string,validation:"time",message:l.message}),o.dirty()):"duration"===l.kind?tG.test(e.data)||(tT(i=this._getOrReturnCtx(e,i),{validation:"duration",code:tv.invalid_string,message:l.message}),o.dirty()):"ip"===l.kind?(t=e.data,!(("v4"===(r=l.version)||!r)&&tK.test(t)||("v6"===r||!r)&&tJ.test(t))&&1&&(tT(i=this._getOrReturnCtx(e,i),{validation:"ip",code:tv.invalid_string,message:l.message}),o.dirty())):"jwt"===l.kind?!function(e,t){if(!tV.test(e))return!1;try{let[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));if("object"!=typeof a||null===a||!a.typ||!a.alg||t&&a.alg!==t)return!1;return!0}catch(e){return!1}}(e.data,l.alg)&&(tT(i=this._getOrReturnCtx(e,i),{validation:"jwt",code:tv.invalid_string,message:l.message}),o.dirty()):"cidr"===l.kind?(a=e.data,!(("v4"===(s=l.version)||!s)&&tW.test(a)||("v6"===s||!s)&&tY.test(a))&&1&&(tT(i=this._getOrReturnCtx(e,i),{validation:"cidr",code:tv.invalid_string,message:l.message}),o.dirty())):"base64"===l.kind?tX.test(e.data)||(tT(i=this._getOrReturnCtx(e,i),{validation:"base64",code:tv.invalid_string,message:l.message}),o.dirty()):"base64url"===l.kind?tQ.test(e.data)||(tT(i=this._getOrReturnCtx(e,i),{validation:"base64url",code:tv.invalid_string,message:l.message}),o.dirty()):b.assertNever(l);return{status:o.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:tv.invalid_string,...w.errToObj(r)})}_addCheck(e){return new t5({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...w.errToObj(e)})}url(e){return this._addCheck({kind:"url",...w.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...w.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...w.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...w.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...w.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...w.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...w.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...w.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...w.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...w.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...w.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...w.errToObj(e)})}datetime(e){var t,r;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!=(t=null==e?void 0:e.offset)&&t,local:null!=(r=null==e?void 0:e.local)&&r,...w.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...w.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...w.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...w.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...w.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...w.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...w.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...w.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...w.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...w.errToObj(t)})}nonempty(e){return this.min(1,w.errToObj(e))}trim(){return new t5({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t5({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t5({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}t5.create=e=>{var t;return new t5({checks:[],typeName:E.ZodString,coerce:null!=(t=null==e?void 0:e.coerce)&&t,...tF(e)})};class t8 extends tU{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==tg.number){let t=this._getOrReturnCtx(e);return tT(t,{code:tv.invalid_type,expected:tg.number,received:t.parsedType}),tP}let r=new tk;for(let n of this._def.checks)"int"===n.kind?b.isInteger(e.data)||(tT(t=this._getOrReturnCtx(e,t),{code:tv.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(tT(t=this._getOrReturnCtx(e,t),{code:tv.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(tT(t=this._getOrReturnCtx(e,t),{code:tv.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n;return parseInt(e.toFixed(a).replace(".",""))%parseInt(t.toFixed(a).replace(".",""))/Math.pow(10,a)}(e.data,n.value)&&(tT(t=this._getOrReturnCtx(e,t),{code:tv.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(tT(t=this._getOrReturnCtx(e,t),{code:tv.not_finite,message:n.message}),r.dirty()):b.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,w.toString(t))}gt(e,t){return this.setLimit("min",e,!1,w.toString(t))}lte(e,t){return this.setLimit("max",e,!0,w.toString(t))}lt(e,t){return this.setLimit("max",e,!1,w.toString(t))}setLimit(e,t,r,n){return new t8({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:w.toString(n)}]})}_addCheck(e){return new t8({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:w.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:w.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:w.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:w.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:w.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:w.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:w.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:w.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:w.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&b.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks)if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;else"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value);return Number.isFinite(t)&&Number.isFinite(e)}}t8.create=e=>new t8({checks:[],typeName:E.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...tF(e)});class t3 extends tU{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==tg.bigint)return this._getInvalidInput(e);let r=new tk;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(tT(t=this._getOrReturnCtx(e,t),{code:tv.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(tT(t=this._getOrReturnCtx(e,t),{code:tv.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(tT(t=this._getOrReturnCtx(e,t),{code:tv.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):b.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return tT(t,{code:tv.invalid_type,expected:tg.bigint,received:t.parsedType}),tP}gte(e,t){return this.setLimit("min",e,!0,w.toString(t))}gt(e,t){return this.setLimit("min",e,!1,w.toString(t))}lte(e,t){return this.setLimit("max",e,!0,w.toString(t))}lt(e,t){return this.setLimit("max",e,!1,w.toString(t))}setLimit(e,t,r,n){return new t3({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:w.toString(n)}]})}_addCheck(e){return new t3({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:w.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:w.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:w.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:w.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:w.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}t3.create=e=>{var t;return new t3({checks:[],typeName:E.ZodBigInt,coerce:null!=(t=null==e?void 0:e.coerce)&&t,...tF(e)})};class t4 extends tU{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==tg.boolean){let t=this._getOrReturnCtx(e);return tT(t,{code:tv.invalid_type,expected:tg.boolean,received:t.parsedType}),tP}return tS(e.data)}}t4.create=e=>new t4({typeName:E.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...tF(e)});class t9 extends tU{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==tg.date){let t=this._getOrReturnCtx(e);return tT(t,{code:tv.invalid_type,expected:tg.date,received:t.parsedType}),tP}if(isNaN(e.data.getTime()))return tT(this._getOrReturnCtx(e),{code:tv.invalid_date}),tP;let r=new tk;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(tT(t=this._getOrReturnCtx(e,t),{code:tv.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(tT(t=this._getOrReturnCtx(e,t),{code:tv.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):b.assertNever(n);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t9({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:w.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:w.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}t9.create=e=>new t9({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:E.ZodDate,...tF(e)});class t7 extends tU{_parse(e){if(this._getType(e)!==tg.symbol){let t=this._getOrReturnCtx(e);return tT(t,{code:tv.invalid_type,expected:tg.symbol,received:t.parsedType}),tP}return tS(e.data)}}t7.create=e=>new t7({typeName:E.ZodSymbol,...tF(e)});class re extends tU{_parse(e){if(this._getType(e)!==tg.undefined){let t=this._getOrReturnCtx(e);return tT(t,{code:tv.invalid_type,expected:tg.undefined,received:t.parsedType}),tP}return tS(e.data)}}re.create=e=>new re({typeName:E.ZodUndefined,...tF(e)});class rt extends tU{_parse(e){if(this._getType(e)!==tg.null){let t=this._getOrReturnCtx(e);return tT(t,{code:tv.invalid_type,expected:tg.null,received:t.parsedType}),tP}return tS(e.data)}}rt.create=e=>new rt({typeName:E.ZodNull,...tF(e)});class rr extends tU{constructor(){super(...arguments),this._any=!0}_parse(e){return tS(e.data)}}rr.create=e=>new rr({typeName:E.ZodAny,...tF(e)});class rn extends tU{constructor(){super(...arguments),this._unknown=!0}_parse(e){return tS(e.data)}}rn.create=e=>new rn({typeName:E.ZodUnknown,...tF(e)});class ra extends tU{_parse(e){let t=this._getOrReturnCtx(e);return tT(t,{code:tv.invalid_type,expected:tg.never,received:t.parsedType}),tP}}ra.create=e=>new ra({typeName:E.ZodNever,...tF(e)});class rs extends tU{_parse(e){if(this._getType(e)!==tg.undefined){let t=this._getOrReturnCtx(e);return tT(t,{code:tv.invalid_type,expected:tg.void,received:t.parsedType}),tP}return tS(e.data)}}rs.create=e=>new rs({typeName:E.ZodVoid,...tF(e)});class ri extends tU{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==tg.array)return tT(t,{code:tv.invalid_type,expected:tg.array,received:t.parsedType}),tP;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,a=t.data.length<n.exactLength.value;(e||a)&&(tT(t,{code:e?tv.too_big:tv.too_small,minimum:a?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(tT(t,{code:tv.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(tT(t,{code:tv.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new tR(t,e,t.path,r)))).then(e=>tk.mergeArray(r,e));let a=[...t.data].map((e,r)=>n.type._parseSync(new tR(t,e,t.path,r)));return tk.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new ri({...this._def,minLength:{value:e,message:w.toString(t)}})}max(e,t){return new ri({...this._def,maxLength:{value:e,message:w.toString(t)}})}length(e,t){return new ri({...this._def,exactLength:{value:e,message:w.toString(t)}})}nonempty(e){return this.min(1,e)}}ri.create=(e,t)=>new ri({type:e,minLength:null,maxLength:null,exactLength:null,typeName:E.ZodArray,...tF(t)});class ro extends tU{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=b.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==tg.object){let t=this._getOrReturnCtx(e);return tT(t,{code:tv.invalid_type,expected:tg.object,received:t.parsedType}),tP}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:a}=this._getCached(),s=[];if(!(this._def.catchall instanceof ra&&"strip"===this._def.unknownKeys))for(let e in r.data)a.includes(e)||s.push(e);let i=[];for(let e of a){let t=n[e],a=r.data[e];i.push({key:{status:"valid",value:e},value:t._parse(new tR(r,a,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof ra){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of s)i.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(tT(r,{code:tv.unrecognized_keys,keys:s}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of s){let n=r.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new tR(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of i){let r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>tk.mergeObjectSync(t,e)):tk.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return w.errToObj,new ro({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,a,s,i;let o=null!=(s=null==(a=(n=this._def).errorMap)?void 0:a.call(n,t,r).message)?s:r.defaultError;return"unrecognized_keys"===t.code?{message:null!=(i=w.errToObj(e).message)?i:o}:{message:o}}}:{}})}strip(){return new ro({...this._def,unknownKeys:"strip"})}passthrough(){return new ro({...this._def,unknownKeys:"passthrough"})}extend(e){return new ro({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ro({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:E.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ro({...this._def,catchall:e})}pick(e){let t={};return b.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new ro({...this._def,shape:()=>t})}omit(e){let t={};return b.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new ro({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof ro){let r={};for(let n in t.shape){let a=t.shape[n];r[n]=rI.create(e(a))}return new ro({...t._def,shape:()=>r})}if(t instanceof ri)return new ri({...t._def,type:e(t.element)});if(t instanceof rI)return rI.create(e(t.unwrap()));if(t instanceof rT)return rT.create(e(t.unwrap()));if(t instanceof rp)return rp.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};return b.objectKeys(this.shape).forEach(r=>{let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}),new ro({...this._def,shape:()=>t})}required(e){let t={};return b.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof rI;)e=e._def.innerType;t[r]=e}}),new ro({...this._def,shape:()=>t})}keyof(){return rv(b.objectKeys(this.shape))}}ro.create=(e,t)=>new ro({shape:()=>e,unknownKeys:"strip",catchall:ra.create(),typeName:E.ZodObject,...tF(t)}),ro.strictCreate=(e,t)=>new ro({shape:()=>e,unknownKeys:"strict",catchall:ra.create(),typeName:E.ZodObject,...tF(t)}),ro.lazycreate=(e,t)=>new ro({shape:e,unknownKeys:"strip",catchall:ra.create(),typeName:E.ZodObject,...tF(t)});class rl extends tU{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new tw(e.ctx.common.issues));return tT(t,{code:tv.invalid_union,unionErrors:r}),tP});{let e,n=[];for(let a of r){let r={...t,common:{...t.common,issues:[]},parent:null},s=a._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let a=n.map(e=>new tw(e));return tT(t,{code:tv.invalid_union,unionErrors:a}),tP}}get options(){return this._def.options}}rl.create=(e,t)=>new rl({options:e,typeName:E.ZodUnion,...tF(t)});let ru=e=>{if(e instanceof rg)return ru(e.schema);if(e instanceof rE)return ru(e.innerType());if(e instanceof rb)return[e.value];if(e instanceof rw)return e.options;if(e instanceof rx)return b.objectValues(e.enum);else if(e instanceof rk)return ru(e._def.innerType);else if(e instanceof re)return[void 0];else if(e instanceof rt)return[null];else if(e instanceof rI)return[void 0,...ru(e.unwrap())];else if(e instanceof rT)return[null,...ru(e.unwrap())];else if(e instanceof rO)return ru(e.unwrap());else if(e instanceof rC)return ru(e.unwrap());else if(e instanceof rP)return ru(e._def.innerType);else return[]};class rc extends tU{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==tg.object)return tT(t,{code:tv.invalid_type,expected:tg.object,received:t.parsedType}),tP;let r=this.discriminator,n=t.data[r],a=this.optionsMap.get(n);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(tT(t,{code:tv.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),tP)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=ru(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of t){if(n.has(a))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);n.set(a,r)}}return new rc({typeName:E.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...tF(r)})}}class rd extends tU{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(tO(e)||tO(n))return tP;let a=function e(t,r){let n=tb(t),a=tb(r);if(t===r)return{valid:!0,data:t};if(n===tg.object&&a===tg.object){let n=b.objectKeys(r),a=b.objectKeys(t).filter(e=>-1!==n.indexOf(e)),s={...t,...r};for(let n of a){let a=e(t[n],r[n]);if(!a.valid)return{valid:!1};s[n]=a.data}return{valid:!0,data:s}}if(n===tg.array&&a===tg.array){if(t.length!==r.length)return{valid:!1};let n=[];for(let a=0;a<t.length;a++){let s=e(t[a],r[a]);if(!s.valid)return{valid:!1};n.push(s.data)}return{valid:!0,data:n}}if(n===tg.date&&a===tg.date&&+t==+r)return{valid:!0,data:t};return{valid:!1}}(e.value,n.value);return a.valid?((t$(e)||t$(n))&&t.dirty(),{status:t.value,value:a.data}):(tT(r,{code:tv.invalid_intersection_types}),tP)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}rd.create=(e,t,r)=>new rd({left:e,right:t,typeName:E.ZodIntersection,...tF(r)});class rp extends tU{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==tg.array)return tT(r,{code:tv.invalid_type,expected:tg.array,received:r.parsedType}),tP;if(r.data.length<this._def.items.length)return tT(r,{code:tv.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),tP;!this._def.rest&&r.data.length>this._def.items.length&&(tT(r,{code:tv.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new tR(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>tk.mergeArray(t,e)):tk.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new rp({...this._def,rest:e})}}rp.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new rp({items:e,typeName:E.ZodTuple,rest:null,...tF(t)})};class rf extends tU{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==tg.object)return tT(r,{code:tv.invalid_type,expected:tg.object,received:r.parsedType}),tP;let n=[],a=this._def.keyType,s=this._def.valueType;for(let e in r.data)n.push({key:a._parse(new tR(r,e,r.path,e)),value:s._parse(new tR(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?tk.mergeObjectAsync(t,n):tk.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new rf(t instanceof tU?{keyType:e,valueType:t,typeName:E.ZodRecord,...tF(r)}:{keyType:t5.create(),valueType:e,typeName:E.ZodRecord,...tF(t)})}}class rh extends tU{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==tg.map)return tT(r,{code:tv.invalid_type,expected:tg.map,received:r.parsedType}),tP;let n=this._def.keyType,a=this._def.valueType,s=[...r.data.entries()].map(([e,t],s)=>({key:n._parse(new tR(r,e,r.path,[s,"key"])),value:a._parse(new tR(r,t,r.path,[s,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of s){let n=await r.key,a=await r.value;if("aborted"===n.status||"aborted"===a.status)return tP;("dirty"===n.status||"dirty"===a.status)&&t.dirty(),e.set(n.value,a.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of s){let n=r.key,a=r.value;if("aborted"===n.status||"aborted"===a.status)return tP;("dirty"===n.status||"dirty"===a.status)&&t.dirty(),e.set(n.value,a.value)}return{status:t.value,value:e}}}}rh.create=(e,t,r)=>new rh({valueType:t,keyType:e,typeName:E.ZodMap,...tF(r)});class rm extends tU{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==tg.set)return tT(r,{code:tv.invalid_type,expected:tg.set,received:r.parsedType}),tP;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(tT(r,{code:tv.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(tT(r,{code:tv.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let a=this._def.valueType;function s(e){let r=new Set;for(let n of e){if("aborted"===n.status)return tP;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let i=[...r.data.values()].map((e,t)=>a._parse(new tR(r,e,r.path,t)));return r.common.async?Promise.all(i).then(e=>s(e)):s(i)}min(e,t){return new rm({...this._def,minSize:{value:e,message:w.toString(t)}})}max(e,t){return new rm({...this._def,maxSize:{value:e,message:w.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}rm.create=(e,t)=>new rm({valueType:e,minSize:null,maxSize:null,typeName:E.ZodSet,...tF(t)});class ry extends tU{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==tg.function)return tT(t,{code:tv.invalid_type,expected:tg.function,received:t.parsedType}),tP;function r(e,r){return tI({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,tE(),tx].filter(e=>!!e),issueData:{code:tv.invalid_arguments,argumentsError:r}})}function n(e,r){return tI({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,tE(),tx].filter(e=>!!e),issueData:{code:tv.invalid_return_type,returnTypeError:r}})}let a={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof r_){let e=this;return tS(async function(...t){let i=new tw([]),o=await e._def.args.parseAsync(t,a).catch(e=>{throw i.addIssue(r(t,e)),i}),l=await Reflect.apply(s,this,o);return await e._def.returns._def.type.parseAsync(l,a).catch(e=>{throw i.addIssue(n(l,e)),i})})}{let e=this;return tS(function(...t){let i=e._def.args.safeParse(t,a);if(!i.success)throw new tw([r(t,i.error)]);let o=Reflect.apply(s,this,i.data),l=e._def.returns.safeParse(o,a);if(!l.success)throw new tw([n(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ry({...this._def,args:rp.create(e).rest(rn.create())})}returns(e){return new ry({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new ry({args:e||rp.create([]).rest(rn.create()),returns:t||rn.create(),typeName:E.ZodFunction,...tF(r)})}}class rg extends tU{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}rg.create=(e,t)=>new rg({getter:e,typeName:E.ZodLazy,...tF(t)});class rb extends tU{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return tT(t,{received:t.data,code:tv.invalid_literal,expected:this._def.value}),tP}return{status:"valid",value:e.data}}get value(){return this._def.value}}function rv(e,t){return new rw({values:e,typeName:E.ZodEnum,...tF(t)})}rb.create=(e,t)=>new rb({value:e,typeName:E.ZodLiteral,...tF(t)});class rw extends tU{constructor(){super(...arguments),x.set(this,void 0)}_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return tT(t,{expected:b.joinValues(r),received:t.parsedType,code:tv.invalid_type}),tP}if(tN(this,x,"f")||tM(this,x,new Set(this._def.values),"f"),!tN(this,x,"f").has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return tT(t,{received:t.data,code:tv.invalid_enum_value,options:r}),tP}return tS(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return rw.create(e,{...this._def,...t})}exclude(e,t=this._def){return rw.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}x=new WeakMap,rw.create=rv;class rx extends tU{constructor(){super(...arguments),_.set(this,void 0)}_parse(e){let t=b.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==tg.string&&r.parsedType!==tg.number){let e=b.objectValues(t);return tT(r,{expected:b.joinValues(e),received:r.parsedType,code:tv.invalid_type}),tP}if(tN(this,_,"f")||tM(this,_,new Set(b.getValidEnumValues(this._def.values)),"f"),!tN(this,_,"f").has(e.data)){let e=b.objectValues(t);return tT(r,{received:r.data,code:tv.invalid_enum_value,options:e}),tP}return tS(e.data)}get enum(){return this._def.values}}_=new WeakMap,rx.create=(e,t)=>new rx({values:e,typeName:E.ZodNativeEnum,...tF(t)});class r_ extends tU{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==tg.promise&&!1===t.common.async?(tT(t,{code:tv.invalid_type,expected:tg.promise,received:t.parsedType}),tP):tS((t.parsedType===tg.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}r_.create=(e,t)=>new r_({type:e,typeName:E.ZodPromise,...tF(t)});class rE extends tU{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===E.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,a={addIssue:e=>{tT(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===n.type){let e=n.transform(r.data,a);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return tP;let n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?tP:"dirty"===n.status||"dirty"===t.value?tA(n.value):n});{if("aborted"===t.value)return tP;let n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?tP:"dirty"===n.status||"dirty"===t.value?tA(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,a);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?tP:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?tP:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===n.type)if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>tC(e)?Promise.resolve(n.transform(e.value,a)).then(e=>({status:t.value,value:e})):e);else{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!tC(e))return e;let s=n.transform(e.value,a);if(s instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}b.assertNever(n)}}rE.create=(e,t,r)=>new rE({schema:e,typeName:E.ZodEffects,effect:t,...tF(r)}),rE.createWithPreprocess=(e,t,r)=>new rE({schema:t,effect:{type:"preprocess",transform:e},typeName:E.ZodEffects,...tF(r)});class rI extends tU{_parse(e){return this._getType(e)===tg.undefined?tS(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}rI.create=(e,t)=>new rI({innerType:e,typeName:E.ZodOptional,...tF(t)});class rT extends tU{_parse(e){return this._getType(e)===tg.null?tS(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}rT.create=(e,t)=>new rT({innerType:e,typeName:E.ZodNullable,...tF(t)});class rk extends tU{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===tg.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}rk.create=(e,t)=>new rk({innerType:e,typeName:E.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...tF(t)});class rP extends tU{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return tj(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new tw(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new tw(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}rP.create=(e,t)=>new rP({innerType:e,typeName:E.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...tF(t)});class rA extends tU{_parse(e){if(this._getType(e)!==tg.nan){let t=this._getOrReturnCtx(e);return tT(t,{code:tv.invalid_type,expected:tg.nan,received:t.parsedType}),tP}return{status:"valid",value:e.data}}}rA.create=e=>new rA({typeName:E.ZodNaN,...tF(e)});let rS=Symbol("zod_brand");class rO extends tU{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class r$ extends tU{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?tP:"dirty"===e.status?(t.dirty(),tA(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?tP:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new r$({in:e,out:t,typeName:E.ZodPipeline})}}class rC extends tU{_parse(e){let t=this._def.innerType._parse(e),r=e=>(tC(e)&&(e.value=Object.freeze(e.value)),e);return tj(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function rj(e,t){let r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function rN(e,t={},r){return e?rr.create().superRefine((n,a)=>{var s,i;let o=e(n);if(o instanceof Promise)return o.then(e=>{var s,i;if(!e){let e=rj(t,n),o=null==(i=null!=(s=e.fatal)?s:r)||i;a.addIssue({code:"custom",...e,fatal:o})}});if(!o){let e=rj(t,n),o=null==(i=null!=(s=e.fatal)?s:r)||i;a.addIssue({code:"custom",...e,fatal:o})}}):rr.create()}rC.create=(e,t)=>new rC({innerType:e,typeName:E.ZodReadonly,...tF(t)});let rM={object:ro.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(E||(E={}));let rR=t5.create,rB=t8.create,rF=rA.create,rU=t3.create,rD=t4.create,rz=t9.create,rq=t7.create,rL=re.create,rZ=rt.create,rV=rr.create,rG=rn.create,rH=ra.create,rK=rs.create,rW=ri.create,rJ=ro.create,rY=ro.strictCreate,rX=rl.create,rQ=rc.create,r0=rd.create,r1=rp.create,r2=rf.create,r6=rh.create,r5=rm.create,r8=ry.create,r3=rg.create,r4=rb.create,r9=rw.create,r7=rx.create,ne=r_.create,nt=rE.create,nr=rI.create,nn=rT.create,na=rE.createWithPreprocess,ns=r$.create;var ni=Object.freeze({__proto__:null,defaultErrorMap:tx,setErrorMap:function(e){t_=e},getErrorMap:tE,makeIssue:tI,EMPTY_PATH:[],addIssueToContext:tT,ParseStatus:tk,INVALID:tP,DIRTY:tA,OK:tS,isAborted:tO,isDirty:t$,isValid:tC,isAsync:tj,get util(){return b},get objectUtil(){return v},ZodParsedType:tg,getParsedType:tb,ZodType:tU,datetimeRegex:t6,ZodString:t5,ZodNumber:t8,ZodBigInt:t3,ZodBoolean:t4,ZodDate:t9,ZodSymbol:t7,ZodUndefined:re,ZodNull:rt,ZodAny:rr,ZodUnknown:rn,ZodNever:ra,ZodVoid:rs,ZodArray:ri,ZodObject:ro,ZodUnion:rl,ZodDiscriminatedUnion:rc,ZodIntersection:rd,ZodTuple:rp,ZodRecord:rf,ZodMap:rh,ZodSet:rm,ZodFunction:ry,ZodLazy:rg,ZodLiteral:rb,ZodEnum:rw,ZodNativeEnum:rx,ZodPromise:r_,ZodEffects:rE,ZodTransformer:rE,ZodOptional:rI,ZodNullable:rT,ZodDefault:rk,ZodCatch:rP,ZodNaN:rA,BRAND:rS,ZodBranded:rO,ZodPipeline:r$,ZodReadonly:rC,custom:rN,Schema:tU,ZodSchema:tU,late:rM,get ZodFirstPartyTypeKind(){return E},coerce:{string:e=>t5.create({...e,coerce:!0}),number:e=>t8.create({...e,coerce:!0}),boolean:e=>t4.create({...e,coerce:!0}),bigint:e=>t3.create({...e,coerce:!0}),date:e=>t9.create({...e,coerce:!0})},any:rV,array:rW,bigint:rU,boolean:rD,date:rz,discriminatedUnion:rQ,effect:nt,enum:r9,function:r8,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>rN(t=>t instanceof e,t),intersection:r0,lazy:r3,literal:r4,map:r6,nan:rF,nativeEnum:r7,never:rH,null:rZ,nullable:nn,number:rB,object:rJ,oboolean:()=>rD().optional(),onumber:()=>rB().optional(),optional:nr,ostring:()=>rR().optional(),pipeline:ns,preprocess:na,promise:ne,record:r2,set:r5,strictObject:rY,string:rR,symbol:rq,transformer:nt,tuple:r1,undefined:rL,union:rX,unknown:rG,void:rK,NEVER:tP,ZodIssueCode:tv,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:tw});function no(e){var t,r;return null!=(r=null==(t=null==e?void 0:e.content)?void 0:t.map(({token:e,logprob:t,top_logprobs:r})=>({token:e,logprob:t,topLogprobs:r?r.map(({token:e,logprob:t})=>({token:e,logprob:t})):[]})))?r:void 0}function nl(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var nu=ni.object({error:ni.object({message:ni.string(),type:ni.string().nullish(),param:ni.any().nullish(),code:ni.union([ni.string(),ni.number()]).nullish()})}),nc=(({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:n,url:a,requestBodyValues:s})=>{let i=await n.text(),o=e4(n);if(""===i.trim())return{responseHeaders:o,value:new ep({message:n.statusText,url:a,requestBodyValues:s,statusCode:n.status,responseHeaders:o,responseBody:i,isRetryable:null==r?void 0:r(n)})};try{let l=function({text:e,schema:t}){try{let r=e5.parse(e);if(null==t)return r;return function({value:e,schema:t}){let r=tr({value:e,schema:t});if(!r.success)throw eY.wrap({value:e,cause:r.error});return r.value}({value:r,schema:t})}catch(t){if(ej.isInstance(t)||eY.isInstance(t))throw t;throw new ej({text:e,cause:t})}}({text:i,schema:e});return{responseHeaders:o,value:new ep({message:t(l),url:a,requestBodyValues:s,statusCode:n.status,responseHeaders:o,responseBody:i,data:l,isRetryable:null==r?void 0:r(n,l)})}}catch(e){return{responseHeaders:o,value:new ep({message:n.statusText,url:a,requestBodyValues:s,statusCode:n.status,responseHeaders:o,responseBody:i,isRetryable:null==r?void 0:r(n)})}}})({errorSchema:nu,errorToMessage:e=>e.error.message});function nd({id:e,model:t,created:r}){return{id:null!=e?e:void 0,modelId:null!=t?t:void 0,timestamp:null!=r?new Date(1e3*r):void 0}}var np=class{constructor(e,t,r){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=r}get supportsStructuredOutputs(){var e;return null!=(e=this.settings.structuredOutputs)?e:ny(this.modelId)}get defaultObjectGenerationMode(){return this.modelId.startsWith("gpt-4o-audio-preview")?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:r,temperature:n,topP:a,topK:s,frequencyPenalty:i,presencePenalty:o,stopSequences:l,responseFormat:u,seed:c,providerMetadata:d}){var p,f,h,m,y,g,b,v,w,x,_;let E=e.type,I=[];null!=s&&I.push({type:"unsupported-setting",setting:"topK"}),(null==u?void 0:u.type)!=="json"||null==u.schema||this.supportsStructuredOutputs||I.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let T=this.settings.useLegacyFunctionCalling;if(T&&!0===this.settings.parallelToolCalls)throw new e1({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(T&&this.supportsStructuredOutputs)throw new e1({functionality:"structuredOutputs with useLegacyFunctionCalling"});let{messages:k,warnings:P}=function({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:r="system"}){let n=[],a=[];for(let{role:s,content:i}of e)switch(s){case"system":switch(r){case"system":n.push({role:"system",content:i});break;case"developer":n.push({role:"developer",content:i});break;case"remove":a.push({type:"other",message:"system messages are removed for this model"});break;default:throw Error(`Unsupported system message mode: ${r}`)}break;case"user":if(1===i.length&&"text"===i[0].type){n.push({role:"user",content:i[0].text});break}n.push({role:"user",content:i.map((e,t)=>{var r,n,a,s;switch(e.type){case"text":return{type:"text",text:e.text};case"image":return{type:"image_url",image_url:{url:e.image instanceof URL?e.image.toString():`data:${null!=(r=e.mimeType)?r:"image/jpeg"};base64,${ty(e.image)}`,detail:null==(a=null==(n=e.providerMetadata)?void 0:n.openai)?void 0:a.imageDetail}};case"file":if(e.data instanceof URL)throw new e1({functionality:"'File content parts with URL data' functionality not supported."});switch(e.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:e.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:e.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:null!=(s=e.filename)?s:`part-${t}.pdf`,file_data:`data:application/pdf;base64,${e.data}`}};default:throw new e1({functionality:`File content part type ${e.mimeType} in user messages`})}}})});break;case"assistant":{let e="",r=[];for(let t of i)switch(t.type){case"text":e+=t.text;break;case"tool-call":r.push({id:t.toolCallId,type:"function",function:{name:t.toolName,arguments:JSON.stringify(t.args)}})}if(t){if(r.length>1)throw new e1({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});n.push({role:"assistant",content:e,function_call:r.length>0?r[0].function:void 0})}else n.push({role:"assistant",content:e,tool_calls:r.length>0?r:void 0});break}case"tool":for(let e of i)t?n.push({role:"function",name:e.toolName,content:JSON.stringify(e.result)}):n.push({role:"tool",tool_call_id:e.toolCallId,content:JSON.stringify(e.result)});break;default:throw Error(`Unsupported role: ${s}`)}return{messages:n,warnings:a}}({prompt:t,useLegacyFunctionCalling:T,systemMessageMode:ny(w=this.modelId)?null!=(_=null==(x=ng[w])?void 0:x.systemMessageMode)?_:"developer":"system"});I.push(...P);let A={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:!0===this.settings.logprobs||"number"==typeof this.settings.logprobs||void 0,top_logprobs:"number"==typeof this.settings.logprobs?this.settings.logprobs:"boolean"==typeof this.settings.logprobs&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:r,temperature:n,top_p:a,frequency_penalty:i,presence_penalty:o,response_format:(null==u?void 0:u.type)==="json"?this.supportsStructuredOutputs&&null!=u.schema?{type:"json_schema",json_schema:{schema:u.schema,strict:!0,name:null!=(p=u.name)?p:"response",description:u.description}}:{type:"json_object"}:void 0,stop:l,seed:c,max_completion_tokens:null==(f=null==d?void 0:d.openai)?void 0:f.maxCompletionTokens,store:null==(h=null==d?void 0:d.openai)?void 0:h.store,metadata:null==(m=null==d?void 0:d.openai)?void 0:m.metadata,prediction:null==(y=null==d?void 0:d.openai)?void 0:y.prediction,reasoning_effort:null!=(b=null==(g=null==d?void 0:d.openai)?void 0:g.reasoningEffort)?b:this.settings.reasoningEffort,messages:k};switch(ny(this.modelId)?(null!=A.temperature&&(A.temperature=void 0,I.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),null!=A.top_p&&(A.top_p=void 0,I.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),null!=A.frequency_penalty&&(A.frequency_penalty=void 0,I.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),null!=A.presence_penalty&&(A.presence_penalty=void 0,I.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),null!=A.logit_bias&&(A.logit_bias=void 0,I.push({type:"other",message:"logitBias is not supported for reasoning models"})),null!=A.logprobs&&(A.logprobs=void 0,I.push({type:"other",message:"logprobs is not supported for reasoning models"})),null!=A.top_logprobs&&(A.top_logprobs=void 0,I.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),null!=A.max_tokens&&(null==A.max_completion_tokens&&(A.max_completion_tokens=A.max_tokens),A.max_tokens=void 0)):(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview"))&&null!=A.temperature&&(A.temperature=void 0,I.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for the search preview models and has been removed."})),E){case"regular":{let{tools:t,tool_choice:r,functions:n,function_call:a,toolWarnings:s}=function({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:r}){var n;let a=(null==(n=e.tools)?void 0:n.length)?e.tools:void 0,s=[];if(null==a)return{tools:void 0,tool_choice:void 0,toolWarnings:s};let i=e.toolChoice;if(t){let e=[];for(let t of a)"provider-defined"===t.type?s.push({type:"unsupported-tool",tool:t}):e.push({name:t.name,description:t.description,parameters:t.parameters});if(null==i)return{functions:e,function_call:void 0,toolWarnings:s};switch(i.type){case"auto":case"none":case void 0:return{functions:e,function_call:void 0,toolWarnings:s};case"required":throw new e1({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:e,function_call:{name:i.toolName},toolWarnings:s}}}let o=[];for(let e of a)"provider-defined"===e.type?s.push({type:"unsupported-tool",tool:e}):o.push({type:"function",function:{name:e.name,description:e.description,parameters:e.parameters,strict:!!r||void 0}});if(null==i)return{tools:o,tool_choice:void 0,toolWarnings:s};let l=i.type;switch(l){case"auto":case"none":case"required":return{tools:o,tool_choice:l,toolWarnings:s};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:i.toolName}},toolWarnings:s};default:throw new e1({functionality:`Unsupported tool choice type: ${l}`})}}({mode:e,useLegacyFunctionCalling:T,structuredOutputs:this.supportsStructuredOutputs});return{args:{...A,tools:t,tool_choice:r,functions:n,function_call:a},warnings:[...I,...s]}}case"object-json":return{args:{...A,response_format:this.supportsStructuredOutputs&&null!=e.schema?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:null!=(v=e.name)?v:"response",description:e.description}}:{type:"json_object"}},warnings:I};case"object-tool":return{args:T?{...A,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...A,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:!!this.supportsStructuredOutputs||void 0}}]},warnings:I};default:throw Error(`Unsupported type: ${E}`)}}async doGenerate(e){var t,r,n,a,s,i,o,l;let{args:u,warnings:c}=this.getArgs(e),{responseHeaders:d,value:p,rawValue:f}=await to({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:e8(this.config.headers(),e.headers),body:u,failedResponseHandler:nc,successfulResponseHandler:td(nh),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:h,...m}=u,y=p.choices[0],g=null==(t=p.usage)?void 0:t.completion_tokens_details,b=null==(r=p.usage)?void 0:r.prompt_tokens_details,v={openai:{}};return(null==g?void 0:g.reasoning_tokens)!=null&&(v.openai.reasoningTokens=null==g?void 0:g.reasoning_tokens),(null==g?void 0:g.accepted_prediction_tokens)!=null&&(v.openai.acceptedPredictionTokens=null==g?void 0:g.accepted_prediction_tokens),(null==g?void 0:g.rejected_prediction_tokens)!=null&&(v.openai.rejectedPredictionTokens=null==g?void 0:g.rejected_prediction_tokens),(null==b?void 0:b.cached_tokens)!=null&&(v.openai.cachedPromptTokens=null==b?void 0:b.cached_tokens),{text:null!=(n=y.message.content)?n:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&y.message.function_call?[{toolCallType:"function",toolCallId:e7(),toolName:y.message.function_call.name,args:y.message.function_call.arguments}]:null==(a=y.message.tool_calls)?void 0:a.map(e=>{var t;return{toolCallType:"function",toolCallId:null!=(t=e.id)?t:e7(),toolName:e.function.name,args:e.function.arguments}}),finishReason:nl(y.finish_reason),usage:{promptTokens:null!=(i=null==(s=p.usage)?void 0:s.prompt_tokens)?i:NaN,completionTokens:null!=(l=null==(o=p.usage)?void 0:o.completion_tokens)?l:NaN},rawCall:{rawPrompt:h,rawSettings:m},rawResponse:{headers:d,body:f},request:{body:JSON.stringify(u)},response:nd(p),warnings:c,logprobs:no(y.logprobs),providerMetadata:v}}async doStream(e){let t;if(this.settings.simulateStreaming){let t=await this.doGenerate(e);return{stream:new ReadableStream({start(e){if(e.enqueue({type:"response-metadata",...t.response}),t.text&&e.enqueue({type:"text-delta",textDelta:t.text}),t.toolCalls)for(let r of t.toolCalls)e.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:r.toolCallId,toolName:r.toolName,argsTextDelta:r.args}),e.enqueue({type:"tool-call",...r});e.enqueue({type:"finish",finishReason:t.finishReason,usage:t.usage,logprobs:t.logprobs,providerMetadata:t.providerMetadata}),e.close()}}),rawCall:t.rawCall,rawResponse:t.rawResponse,warnings:t.warnings}}let{args:r,warnings:n}=this.getArgs(e),a={...r,stream:!0,stream_options:"strict"===this.config.compatibility?{include_usage:!0}:void 0},{responseHeaders:s,value:i}=await to({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:e8(this.config.headers(),e.headers),body:a,failedResponseHandler:nc,successfulResponseHandler:tc(nm),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:o,...l}=r,u=[],c="unknown",d={promptTokens:void 0,completionTokens:void 0},p=!0,{useLegacyFunctionCalling:f}=this.settings,h={openai:{}};return{stream:i.pipeThrough(new TransformStream({transform(e,r){var n,a,s,i,o,l,m,y,g,b,v,w;if(!e.success){c="error",r.enqueue({type:"error",error:e.error});return}let x=e.value;if("error"in x){c="error",r.enqueue({type:"error",error:x.error});return}if(p&&(p=!1,r.enqueue({type:"response-metadata",...nd(x)})),null!=x.usage){let{prompt_tokens:e,completion_tokens:t,prompt_tokens_details:r,completion_tokens_details:n}=x.usage;d={promptTokens:null!=e?e:void 0,completionTokens:null!=t?t:void 0},(null==n?void 0:n.reasoning_tokens)!=null&&(h.openai.reasoningTokens=null==n?void 0:n.reasoning_tokens),(null==n?void 0:n.accepted_prediction_tokens)!=null&&(h.openai.acceptedPredictionTokens=null==n?void 0:n.accepted_prediction_tokens),(null==n?void 0:n.rejected_prediction_tokens)!=null&&(h.openai.rejectedPredictionTokens=null==n?void 0:n.rejected_prediction_tokens),(null==r?void 0:r.cached_tokens)!=null&&(h.openai.cachedPromptTokens=null==r?void 0:r.cached_tokens)}let _=x.choices[0];if((null==_?void 0:_.finish_reason)!=null&&(c=nl(_.finish_reason)),(null==_?void 0:_.delta)==null)return;let E=_.delta;null!=E.content&&r.enqueue({type:"text-delta",textDelta:E.content});let I=no(null==_?void 0:_.logprobs);(null==I?void 0:I.length)&&(void 0===t&&(t=[]),t.push(...I));let T=f&&null!=E.function_call?[{type:"function",id:e7(),function:E.function_call,index:0}]:E.tool_calls;if(null!=T)for(let e of T){let t=e.index;if(null==u[t]){if("function"!==e.type)throw new eS({data:e,message:"Expected 'function' type."});if(null==e.id)throw new eS({data:e,message:"Expected 'id' to be a string."});if((null==(n=e.function)?void 0:n.name)==null)throw new eS({data:e,message:"Expected 'function.name' to be a string."});u[t]={id:e.id,type:"function",function:{name:e.function.name,arguments:null!=(a=e.function.arguments)?a:""},hasFinished:!1};let l=u[t];(null==(s=l.function)?void 0:s.name)!=null&&(null==(i=l.function)?void 0:i.arguments)!=null&&(l.function.arguments.length>0&&r.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:l.id,toolName:l.function.name,argsTextDelta:l.function.arguments}),ta(l.function.arguments)&&(r.enqueue({type:"tool-call",toolCallType:"function",toolCallId:null!=(o=l.id)?o:e7(),toolName:l.function.name,args:l.function.arguments}),l.hasFinished=!0));continue}let c=u[t];!c.hasFinished&&((null==(l=e.function)?void 0:l.arguments)!=null&&(c.function.arguments+=null!=(y=null==(m=e.function)?void 0:m.arguments)?y:""),r.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:c.id,toolName:c.function.name,argsTextDelta:null!=(g=e.function.arguments)?g:""}),(null==(b=c.function)?void 0:b.name)!=null&&(null==(v=c.function)?void 0:v.arguments)!=null&&ta(c.function.arguments)&&(r.enqueue({type:"tool-call",toolCallType:"function",toolCallId:null!=(w=c.id)?w:e7(),toolName:c.function.name,args:c.function.arguments}),c.hasFinished=!0))}},flush(e){var r,n;e.enqueue({type:"finish",finishReason:c,logprobs:t,usage:{promptTokens:null!=(r=d.promptTokens)?r:NaN,completionTokens:null!=(n=d.completionTokens)?n:NaN},...null!=h?{providerMetadata:h}:{}})}})),rawCall:{rawPrompt:o,rawSettings:l},rawResponse:{headers:s},request:{body:JSON.stringify(a)},warnings:n}}},nf=ni.object({prompt_tokens:ni.number().nullish(),completion_tokens:ni.number().nullish(),prompt_tokens_details:ni.object({cached_tokens:ni.number().nullish()}).nullish(),completion_tokens_details:ni.object({reasoning_tokens:ni.number().nullish(),accepted_prediction_tokens:ni.number().nullish(),rejected_prediction_tokens:ni.number().nullish()}).nullish()}).nullish(),nh=ni.object({id:ni.string().nullish(),created:ni.number().nullish(),model:ni.string().nullish(),choices:ni.array(ni.object({message:ni.object({role:ni.literal("assistant").nullish(),content:ni.string().nullish(),function_call:ni.object({arguments:ni.string(),name:ni.string()}).nullish(),tool_calls:ni.array(ni.object({id:ni.string().nullish(),type:ni.literal("function"),function:ni.object({name:ni.string(),arguments:ni.string()})})).nullish()}),index:ni.number(),logprobs:ni.object({content:ni.array(ni.object({token:ni.string(),logprob:ni.number(),top_logprobs:ni.array(ni.object({token:ni.string(),logprob:ni.number()}))})).nullable()}).nullish(),finish_reason:ni.string().nullish()})),usage:nf}),nm=ni.union([ni.object({id:ni.string().nullish(),created:ni.number().nullish(),model:ni.string().nullish(),choices:ni.array(ni.object({delta:ni.object({role:ni.enum(["assistant"]).nullish(),content:ni.string().nullish(),function_call:ni.object({name:ni.string().optional(),arguments:ni.string().optional()}).nullish(),tool_calls:ni.array(ni.object({index:ni.number(),id:ni.string().nullish(),type:ni.literal("function").optional(),function:ni.object({name:ni.string().nullish(),arguments:ni.string().nullish()})})).nullish()}).nullish(),logprobs:ni.object({content:ni.array(ni.object({token:ni.string(),logprob:ni.number(),top_logprobs:ni.array(ni.object({token:ni.string(),logprob:ni.number()}))})).nullable()}).nullish(),finish_reason:ni.string().nullable().optional(),index:ni.number()})),usage:nf}),nu]);function ny(e){return e.startsWith("o")}var ng={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"}};function nb(e){return null==e?void 0:e.tokens.map((t,r)=>({token:t,logprob:e.token_logprobs[r],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[r]).map(([e,t])=>({token:e,logprob:t})):[]}))}var nv=class{constructor(e,t,r){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:r,maxTokens:n,temperature:a,topP:s,topK:i,frequencyPenalty:o,presencePenalty:l,stopSequences:u,responseFormat:c,seed:d}){var p;let f=e.type,h=[];null!=i&&h.push({type:"unsupported-setting",setting:"topK"}),null!=c&&"text"!==c.type&&h.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:m,stopSequences:y}=function({prompt:e,inputFormat:t,user:r="user",assistant:n="assistant"}){if("prompt"===t&&1===e.length&&"user"===e[0].role&&1===e[0].content.length&&"text"===e[0].content[0].type)return{prompt:e[0].content[0].text};let a="";for(let{role:t,content:s}of("system"===e[0].role&&(a+=`${e[0].content}

`,e=e.slice(1)),e))switch(t){case"system":throw new eT({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{let e=s.map(e=>{switch(e.type){case"text":return e.text;case"image":throw new e1({functionality:"images"})}}).join("");a+=`${r}:
${e}

`;break}case"assistant":{let e=s.map(e=>{switch(e.type){case"text":return e.text;case"tool-call":throw new e1({functionality:"tool-call messages"})}}).join("");a+=`${n}:
${e}

`;break}case"tool":throw new e1({functionality:"tool messages"});default:throw Error(`Unsupported role: ${t}`)}return{prompt:a+=`${n}:
`,stopSequences:[`
${r}:`]}}({prompt:r,inputFormat:t}),g=[...null!=y?y:[],...null!=u?u:[]],b={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:"number"==typeof this.settings.logprobs?this.settings.logprobs:"boolean"==typeof this.settings.logprobs&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:n,temperature:a,top_p:s,frequency_penalty:o,presence_penalty:l,seed:d,prompt:m,stop:g.length>0?g:void 0};switch(f){case"regular":if(null==(p=e.tools)?void 0:p.length)throw new e1({functionality:"tools"});if(e.toolChoice)throw new e1({functionality:"toolChoice"});return{args:b,warnings:h};case"object-json":throw new e1({functionality:"object-json mode"});case"object-tool":throw new e1({functionality:"object-tool mode"});default:throw Error(`Unsupported type: ${f}`)}}async doGenerate(e){let{args:t,warnings:r}=this.getArgs(e),{responseHeaders:n,value:a,rawValue:s}=await to({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:e8(this.config.headers(),e.headers),body:t,failedResponseHandler:nc,successfulResponseHandler:td(nw),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:i,...o}=t,l=a.choices[0];return{text:l.text,usage:{promptTokens:a.usage.prompt_tokens,completionTokens:a.usage.completion_tokens},finishReason:nl(l.finish_reason),logprobs:nb(l.logprobs),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n,body:s},response:nd(a),warnings:r,request:{body:JSON.stringify(t)}}}async doStream(e){let t,{args:r,warnings:n}=this.getArgs(e),a={...r,stream:!0,stream_options:"strict"===this.config.compatibility?{include_usage:!0}:void 0},{responseHeaders:s,value:i}=await to({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:e8(this.config.headers(),e.headers),body:a,failedResponseHandler:nc,successfulResponseHandler:tc(nx),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...l}=r,u="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},d=!0;return{stream:i.pipeThrough(new TransformStream({transform(e,r){if(!e.success){u="error",r.enqueue({type:"error",error:e.error});return}let n=e.value;if("error"in n){u="error",r.enqueue({type:"error",error:n.error});return}d&&(d=!1,r.enqueue({type:"response-metadata",...nd(n)})),null!=n.usage&&(c={promptTokens:n.usage.prompt_tokens,completionTokens:n.usage.completion_tokens});let a=n.choices[0];(null==a?void 0:a.finish_reason)!=null&&(u=nl(a.finish_reason)),(null==a?void 0:a.text)!=null&&r.enqueue({type:"text-delta",textDelta:a.text});let s=nb(null==a?void 0:a.logprobs);(null==s?void 0:s.length)&&(void 0===t&&(t=[]),t.push(...s))},flush(e){e.enqueue({type:"finish",finishReason:u,logprobs:t,usage:c})}})),rawCall:{rawPrompt:o,rawSettings:l},rawResponse:{headers:s},warnings:n,request:{body:JSON.stringify(a)}}}},nw=ni.object({id:ni.string().nullish(),created:ni.number().nullish(),model:ni.string().nullish(),choices:ni.array(ni.object({text:ni.string(),finish_reason:ni.string(),logprobs:ni.object({tokens:ni.array(ni.string()),token_logprobs:ni.array(ni.number()),top_logprobs:ni.array(ni.record(ni.string(),ni.number())).nullable()}).nullish()})),usage:ni.object({prompt_tokens:ni.number(),completion_tokens:ni.number()})}),nx=ni.union([ni.object({id:ni.string().nullish(),created:ni.number().nullish(),model:ni.string().nullish(),choices:ni.array(ni.object({text:ni.string(),finish_reason:ni.string().nullish(),index:ni.number(),logprobs:ni.object({tokens:ni.array(ni.string()),token_logprobs:ni.array(ni.number()),top_logprobs:ni.array(ni.record(ni.string(),ni.number())).nullable()}).nullish()})),usage:ni.object({prompt_tokens:ni.number(),completion_tokens:ni.number()}).nullish()}),nu]),n_=class{constructor(e,t,r){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return null!=(e=this.settings.maxEmbeddingsPerCall)?e:2048}get supportsParallelCalls(){var e;return null==(e=this.settings.supportsParallelCalls)||e}async doEmbed({values:e,headers:t,abortSignal:r}){if(e.length>this.maxEmbeddingsPerCall)throw new eH({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let{responseHeaders:n,value:a}=await to({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:e8(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:nc,successfulResponseHandler:td(nE),abortSignal:r,fetch:this.config.fetch});return{embeddings:a.data.map(e=>e.embedding),usage:a.usage?{tokens:a.usage.prompt_tokens}:void 0,rawResponse:{headers:n}}}},nE=ni.object({data:ni.array(ni.object({embedding:ni.array(ni.number())})),usage:ni.object({prompt_tokens:ni.number()}).nullish()}),nI={"dall-e-3":1,"dall-e-2":10},nT=class{constructor(e,t,r){this.modelId=e,this.settings=t,this.config=r,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return null!=(t=null!=(e=this.settings.maxImagesPerCall)?e:nI[this.modelId])?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:r,aspectRatio:n,seed:a,providerOptions:s,headers:i,abortSignal:o}){var l,u,c,d;let p=[];null!=n&&p.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),null!=a&&p.push({type:"unsupported-setting",setting:"seed"});let f=null!=(c=null==(u=null==(l=this.config._internal)?void 0:l.currentDate)?void 0:u.call(l))?c:new Date,{value:h,responseHeaders:m}=await to({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:e8(this.config.headers(),i),body:{model:this.modelId,prompt:e,n:t,size:r,...null!=(d=s.openai)?d:{},response_format:"b64_json"},failedResponseHandler:nc,successfulResponseHandler:td(nk),abortSignal:o,fetch:this.config.fetch});return{images:h.data.map(e=>e.b64_json),warnings:p,response:{timestamp:f,modelId:this.modelId,headers:m}}}},nk=ni.object({data:ni.array(ni.object({b64_json:ni.string()}))}),nP=ni.object({include:ni.array(ni.string()).nullish(),language:ni.string().nullish(),prompt:ni.string().nullish(),temperature:ni.number().min(0).max(1).nullish().default(0),timestampGranularities:ni.array(ni.enum(["word","segment"])).nullish().default(["segment"])}),nA={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},nS=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v1"}get provider(){return this.config.provider}getArgs({audio:e,mediaType:t,providerOptions:r}){var n,a,s,i,o;let l=ts({provider:"openai",providerOptions:r,schema:nP}),u=new FormData,c=e instanceof Uint8Array?new Blob([e]):new Blob([tm(e)]);if(u.append("model",this.modelId),u.append("file",new File([c],"audio",{type:t})),l){let e={include:null!=(n=l.include)?n:void 0,language:null!=(a=l.language)?a:void 0,prompt:null!=(s=l.prompt)?s:void 0,temperature:null!=(i=l.temperature)?i:void 0,timestamp_granularities:null!=(o=l.timestampGranularities)?o:void 0};for(let t in e){let r=e[t];void 0!==r&&u.append(t,String(r))}}return{formData:u,warnings:[]}}async doGenerate(e){var t,r,n,a,s,i;let o=null!=(n=null==(r=null==(t=this.config._internal)?void 0:t.currentDate)?void 0:r.call(t))?n:new Date,{formData:l,warnings:u}=this.getArgs(e),{value:c,responseHeaders:d,rawValue:p}=await tl({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:e8(this.config.headers(),e.headers),formData:l,failedResponseHandler:nc,successfulResponseHandler:td(nO),abortSignal:e.abortSignal,fetch:this.config.fetch}),f=null!=c.language&&c.language in nA?nA[c.language]:void 0;return{text:c.text,segments:null!=(s=null==(a=c.words)?void 0:a.map(e=>({text:e.word,startSecond:e.start,endSecond:e.end})))?s:[],language:f,durationInSeconds:null!=(i=c.duration)?i:void 0,warnings:u,response:{timestamp:o,modelId:this.modelId,headers:d,body:p}}}},nO=ni.object({text:ni.string(),language:ni.string().nullish(),duration:ni.number().nullish(),words:ni.array(ni.object({word:ni.string(),start:ni.number(),end:ni.number()})).nullish()});function n$({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}var nC=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsStructuredOutputs=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:r,stopSequences:n,topP:a,topK:s,presencePenalty:i,frequencyPenalty:o,seed:l,prompt:u,providerMetadata:c,responseFormat:d}){var p,f,h,m;let y=[],g=(m=this.modelId).startsWith("o")?m.startsWith("o1-mini")||m.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1}:{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1},b=e.type;null!=s&&y.push({type:"unsupported-setting",setting:"topK"}),null!=l&&y.push({type:"unsupported-setting",setting:"seed"}),null!=i&&y.push({type:"unsupported-setting",setting:"presencePenalty"}),null!=o&&y.push({type:"unsupported-setting",setting:"frequencyPenalty"}),null!=n&&y.push({type:"unsupported-setting",setting:"stopSequences"});let{messages:v,warnings:w}=function({prompt:e,systemMessageMode:t}){let r=[],n=[];for(let{role:a,content:s}of e)switch(a){case"system":switch(t){case"system":r.push({role:"system",content:s});break;case"developer":r.push({role:"developer",content:s});break;case"remove":n.push({type:"other",message:"system messages are removed for this model"});break;default:throw Error(`Unsupported system message mode: ${t}`)}break;case"user":r.push({role:"user",content:s.map((e,t)=>{var r,n,a,s;switch(e.type){case"text":return{type:"input_text",text:e.text};case"image":return{type:"input_image",image_url:e.image instanceof URL?e.image.toString():`data:${null!=(r=e.mimeType)?r:"image/jpeg"};base64,${ty(e.image)}`,detail:null==(a=null==(n=e.providerMetadata)?void 0:n.openai)?void 0:a.imageDetail};case"file":if(e.data instanceof URL)throw new e1({functionality:"File URLs in user messages"});if("application/pdf"===e.mimeType)return{type:"input_file",filename:null!=(s=e.filename)?s:`part-${t}.pdf`,file_data:`data:application/pdf;base64,${e.data}`};throw new e1({functionality:"Only PDF files are supported in user messages"})}})});break;case"assistant":for(let e of s)switch(e.type){case"text":r.push({role:"assistant",content:[{type:"output_text",text:e.text}]});break;case"tool-call":r.push({type:"function_call",call_id:e.toolCallId,name:e.toolName,arguments:JSON.stringify(e.args)})}break;case"tool":for(let e of s)r.push({type:"function_call_output",call_id:e.toolCallId,output:JSON.stringify(e.result)});break;default:throw Error(`Unsupported role: ${a}`)}return{messages:r,warnings:n}}({prompt:u,systemMessageMode:g.systemMessageMode});y.push(...w);let x=ts({provider:"openai",providerOptions:c,schema:nq}),_=null==(p=null==x?void 0:x.strictSchemas)||p,E={model:this.modelId,input:v,temperature:r,top_p:a,max_output_tokens:t,...(null==d?void 0:d.type)==="json"&&{text:{format:null!=d.schema?{type:"json_schema",strict:_,name:null!=(f=d.name)?f:"response",description:d.description,schema:d.schema}:{type:"json_object"}}},metadata:null==x?void 0:x.metadata,parallel_tool_calls:null==x?void 0:x.parallelToolCalls,previous_response_id:null==x?void 0:x.previousResponseId,store:null==x?void 0:x.store,user:null==x?void 0:x.user,instructions:null==x?void 0:x.instructions,...g.isReasoningModel&&(null==x?void 0:x.reasoningEffort)!=null&&{reasoning:{effort:null==x?void 0:x.reasoningEffort}},...g.requiredAutoTruncation&&{truncation:"auto"}};switch(g.isReasoningModel&&(null!=E.temperature&&(E.temperature=void 0,y.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),null!=E.top_p&&(E.top_p=void 0,y.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),b){case"regular":{let{tools:t,tool_choice:r,toolWarnings:n}=function({mode:e,strict:t}){var r;let n=(null==(r=e.tools)?void 0:r.length)?e.tools:void 0,a=[];if(null==n)return{tools:void 0,tool_choice:void 0,toolWarnings:a};let s=e.toolChoice,i=[];for(let e of n)switch(e.type){case"function":i.push({type:"function",name:e.name,description:e.description,parameters:e.parameters,strict:!!t||void 0});break;case"provider-defined":"openai.web_search_preview"===e.id?i.push({type:"web_search_preview",search_context_size:e.args.searchContextSize,user_location:e.args.userLocation}):a.push({type:"unsupported-tool",tool:e});break;default:a.push({type:"unsupported-tool",tool:e})}if(null==s)return{tools:i,tool_choice:void 0,toolWarnings:a};let o=s.type;switch(o){case"auto":case"none":case"required":return{tools:i,tool_choice:o,toolWarnings:a};case"tool":if("web_search_preview"===s.toolName)return{tools:i,tool_choice:{type:"web_search_preview"},toolWarnings:a};return{tools:i,tool_choice:{type:"function",name:s.toolName},toolWarnings:a};default:throw new e1({functionality:`Unsupported tool choice type: ${o}`})}}({mode:e,strict:_});return{args:{...E,tools:t,tool_choice:r},warnings:[...y,...n]}}case"object-json":return{args:{...E,text:{format:null!=e.schema?{type:"json_schema",strict:_,name:null!=(h=e.name)?h:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:y};case"object-tool":return{args:{...E,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:_}]},warnings:y};default:throw Error(`Unsupported type: ${b}`)}}async doGenerate(e){var t,r,n,a,s;let{args:i,warnings:o}=this.getArgs(e),{responseHeaders:l,value:u,rawValue:c}=await to({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:e8(this.config.headers(),e.headers),body:i,failedResponseHandler:nc,successfulResponseHandler:td(ni.object({id:ni.string(),created_at:ni.number(),model:ni.string(),output:ni.array(ni.discriminatedUnion("type",[ni.object({type:ni.literal("message"),role:ni.literal("assistant"),content:ni.array(ni.object({type:ni.literal("output_text"),text:ni.string(),annotations:ni.array(ni.object({type:ni.literal("url_citation"),start_index:ni.number(),end_index:ni.number(),url:ni.string(),title:ni.string()}))}))}),ni.object({type:ni.literal("function_call"),call_id:ni.string(),name:ni.string(),arguments:ni.string()}),ni.object({type:ni.literal("web_search_call")}),ni.object({type:ni.literal("computer_call")}),ni.object({type:ni.literal("reasoning")})])),incomplete_details:ni.object({reason:ni.string()}).nullable(),usage:nj})),abortSignal:e.abortSignal,fetch:this.config.fetch}),d=u.output.filter(e=>"message"===e.type).flatMap(e=>e.content).filter(e=>"output_text"===e.type),p=u.output.filter(e=>"function_call"===e.type).map(e=>({toolCallType:"function",toolCallId:e.call_id,toolName:e.name,args:e.arguments}));return{text:d.map(e=>e.text).join("\n"),sources:d.flatMap(e=>e.annotations.map(e=>{var t,r,n;return{sourceType:"url",id:null!=(n=null==(r=(t=this.config).generateId)?void 0:r.call(t))?n:e7(),url:e.url,title:e.title}})),finishReason:n$({finishReason:null==(t=u.incomplete_details)?void 0:t.reason,hasToolCalls:p.length>0}),toolCalls:p.length>0?p:void 0,usage:{promptTokens:u.usage.input_tokens,completionTokens:u.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:l,body:c},request:{body:JSON.stringify(i)},response:{id:u.id,timestamp:new Date(1e3*u.created_at),modelId:u.model},providerMetadata:{openai:{responseId:u.id,cachedPromptTokens:null!=(n=null==(r=u.usage.input_tokens_details)?void 0:r.cached_tokens)?n:null,reasoningTokens:null!=(s=null==(a=u.usage.output_tokens_details)?void 0:a.reasoning_tokens)?s:null}},warnings:o}}async doStream(e){let{args:t,warnings:r}=this.getArgs(e),{responseHeaders:n,value:a}=await to({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:e8(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:nc,successfulResponseHandler:tc(nz),abortSignal:e.abortSignal,fetch:this.config.fetch}),s=this,i="unknown",o=NaN,l=NaN,u=null,c=null,d=null,p={},f=!1;return{stream:a.pipeThrough(new TransformStream({transform(e,t){var r,n,a,h,m,y,g,b,v;if(!e.success){i="error",t.enqueue({type:"error",error:e.error});return}let w=e.value;if("response.output_item.added"===w.type)"function_call"===w.item.type&&(p[w.output_index]={toolName:w.item.name,toolCallId:w.item.call_id},t.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:w.item.call_id,toolName:w.item.name,argsTextDelta:w.item.arguments}));else if("response.function_call_arguments.delta"===w.type){let e=p[w.output_index];null!=e&&t.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:e.toolCallId,toolName:e.toolName,argsTextDelta:w.delta})}else{"response.created"===w.type?(d=w.response.id,t.enqueue({type:"response-metadata",id:w.response.id,timestamp:new Date(1e3*w.response.created_at),modelId:w.response.model})):"response.output_text.delta"===w.type?t.enqueue({type:"text-delta",textDelta:w.delta}):"response.output_item.done"===w.type&&"function_call"===w.item.type?(p[w.output_index]=void 0,f=!0,t.enqueue({type:"tool-call",toolCallType:"function",toolCallId:w.item.call_id,toolName:w.item.name,args:w.item.arguments})):"response.completed"===(v=w).type||"response.incomplete"===v.type?(i=n$({finishReason:null==(r=w.response.incomplete_details)?void 0:r.reason,hasToolCalls:f}),o=w.response.usage.input_tokens,l=w.response.usage.output_tokens,u=null!=(a=null==(n=w.response.usage.input_tokens_details)?void 0:n.cached_tokens)?a:u,c=null!=(m=null==(h=w.response.usage.output_tokens_details)?void 0:h.reasoning_tokens)?m:c):"response.output_text.annotation.added"===w.type&&t.enqueue({type:"source",source:{sourceType:"url",id:null!=(b=null==(g=(y=s.config).generateId)?void 0:g.call(y))?b:e7(),url:w.annotation.url,title:w.annotation.title}})}},flush(e){e.enqueue({type:"finish",finishReason:i,usage:{promptTokens:o,completionTokens:l},...(null!=u||null!=c)&&{providerMetadata:{openai:{responseId:d,cachedPromptTokens:u,reasoningTokens:c}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:n},request:{body:JSON.stringify(t)},warnings:r}}},nj=ni.object({input_tokens:ni.number(),input_tokens_details:ni.object({cached_tokens:ni.number().nullish()}).nullish(),output_tokens:ni.number(),output_tokens_details:ni.object({reasoning_tokens:ni.number().nullish()}).nullish()}),nN=ni.object({type:ni.literal("response.output_text.delta"),delta:ni.string()}),nM=ni.object({type:ni.enum(["response.completed","response.incomplete"]),response:ni.object({incomplete_details:ni.object({reason:ni.string()}).nullish(),usage:nj})}),nR=ni.object({type:ni.literal("response.created"),response:ni.object({id:ni.string(),created_at:ni.number(),model:ni.string()})}),nB=ni.object({type:ni.literal("response.output_item.done"),output_index:ni.number(),item:ni.discriminatedUnion("type",[ni.object({type:ni.literal("message")}),ni.object({type:ni.literal("function_call"),id:ni.string(),call_id:ni.string(),name:ni.string(),arguments:ni.string(),status:ni.literal("completed")})])}),nF=ni.object({type:ni.literal("response.function_call_arguments.delta"),item_id:ni.string(),output_index:ni.number(),delta:ni.string()}),nU=ni.object({type:ni.literal("response.output_item.added"),output_index:ni.number(),item:ni.discriminatedUnion("type",[ni.object({type:ni.literal("message")}),ni.object({type:ni.literal("function_call"),id:ni.string(),call_id:ni.string(),name:ni.string(),arguments:ni.string()})])}),nD=ni.object({type:ni.literal("response.output_text.annotation.added"),annotation:ni.object({type:ni.literal("url_citation"),url:ni.string(),title:ni.string()})}),nz=ni.union([nN,nM,nR,nB,nF,nU,nD,ni.object({type:ni.string()}).passthrough()]),nq=ni.object({metadata:ni.any().nullish(),parallelToolCalls:ni.boolean().nullish(),previousResponseId:ni.string().nullish(),store:ni.boolean().nullish(),user:ni.string().nullish(),reasoningEffort:ni.string().nullish(),strictSchemas:ni.boolean().nullish(),instructions:ni.string().nullish()}),nL=ni.object({}),nZ={webSearchPreview:function({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:nL}}},nV=ni.object({instructions:ni.string().nullish(),speed:ni.number().min(.25).max(4).default(1).nullish()}),nG=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v1"}get provider(){return this.config.provider}getArgs({text:e,voice:t="alloy",outputFormat:r="mp3",speed:n,instructions:a,providerOptions:s}){let i=[],o=ts({provider:"openai",providerOptions:s,schema:nV}),l={model:this.modelId,input:e,voice:t,response_format:"mp3",speed:n,instructions:a};if(r&&(["mp3","opus","aac","flac","wav","pcm"].includes(r)?l.response_format=r:i.push({type:"unsupported-setting",setting:"outputFormat",details:`Unsupported output format: ${r}. Using mp3 instead.`})),o){let e={};for(let t in e){let r=e[t];void 0!==r&&(l[t]=r)}}return{requestBody:l,warnings:i}}async doGenerate(e){var t,r,n;let a=null!=(n=null==(r=null==(t=this.config._internal)?void 0:t.currentDate)?void 0:r.call(t))?n:new Date,{requestBody:s,warnings:i}=this.getArgs(e),{value:o,responseHeaders:l,rawValue:u}=await to({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:e8(this.config.headers(),e.headers),body:s,failedResponseHandler:nc,successfulResponseHandler:tp(),abortSignal:e.abortSignal,fetch:this.config.fetch});return{audio:o,warnings:i,request:{body:JSON.stringify(s)},response:{timestamp:a,modelId:this.modelId,headers:l,body:u}}}},nH=function(e={}){var t,r,n,a;let s=null!=(t=null==(a=e.baseURL)?void 0:a.replace(/\/$/,""))?t:"https://api.openai.com/v1",i=null!=(r=e.compatibility)?r:"compatible",o=null!=(n=e.name)?n:"openai",l=()=>({Authorization:`Bearer ${function({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:n}){if("string"==typeof e)return e;if(null!=e)throw new eB({message:`${n} API key must be a string.`});if("undefined"==typeof process)throw new eB({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(null==(e=process.env[t]))throw new eB({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if("string"!=typeof e)throw new eB({message:`${n} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),u=(t,r={})=>new np(t,r,{provider:`${o}.chat`,url:({path:e})=>`${s}${e}`,headers:l,compatibility:i,fetch:e.fetch}),c=(t,r={})=>new nv(t,r,{provider:`${o}.completion`,url:({path:e})=>`${s}${e}`,headers:l,compatibility:i,fetch:e.fetch}),d=(t,r={})=>new n_(t,r,{provider:`${o}.embedding`,url:({path:e})=>`${s}${e}`,headers:l,fetch:e.fetch}),p=(t,r={})=>new nT(t,r,{provider:`${o}.image`,url:({path:e})=>`${s}${e}`,headers:l,fetch:e.fetch}),f=t=>new nS(t,{provider:`${o}.transcription`,url:({path:e})=>`${s}${e}`,headers:l,fetch:e.fetch}),h=t=>new nG(t,{provider:`${o}.speech`,url:({path:e})=>`${s}${e}`,headers:l,fetch:e.fetch}),m=(e,t)=>{if(new.target)throw Error("The OpenAI model function cannot be called with the new keyword.");return"gpt-3.5-turbo-instruct"===e?c(e,t):u(e,t)},y=function(e,t){return m(e,t)};return y.languageModel=m,y.chat=u,y.completion=c,y.responses=t=>new nC(t,{provider:`${o}.responses`,url:({path:e})=>`${s}${e}`,headers:l,fetch:e.fetch}),y.embedding=d,y.textEmbedding=d,y.textEmbeddingModel=d,y.image=p,y.imageModel=p,y.transcription=f,y.transcriptionModel=f,y.speech=h,y.speechModel=h,y.tools=nZ,y}({compatibility:"strict"}),nK=Object.defineProperty,nW=(e,t)=>nK(e,"name",{value:t,configurable:!0});async function nJ({wallet:e,plugins:t=[]}){let r=[],n=e.getChain(),a=e.getCoreTools();for(let a of t){a.supportsChain(n)||console.warn(`Plugin ${a.name} does not support ${n.type}${"id"in n?` chain id ${n.id}`:""}. Skipping.`);let t=await a.getTools(e);r.push(...t)}return[...a,...r]}nW(nJ,"getTools");var nY="vercel.ai.error",nX=Symbol.for(nY),nQ=class e extends Error{constructor({name:e,message:t,cause:r}){super(t),this[I]=!0,this.name=e,this.cause=r}static isInstance(t){return e.hasMarker(t,nY)}static hasMarker(e,t){let r=Symbol.for(t);return null!=e&&"object"==typeof e&&r in e&&"boolean"==typeof e[r]&&!0===e[r]}};I=nX;var n0=nQ,n1=Symbol.for("vercel.ai.error.AI_APICallError"),n2=Symbol.for("vercel.ai.error.AI_EmptyResponseBodyError"),n6="AI_InvalidArgumentError",n5=`vercel.ai.error.${n6}`,n8=Symbol.for(n5),n3=class extends n0{constructor({message:e,cause:t,argument:r}){super({name:n6,message:e,cause:t}),this[T]=!0,this.argument=r}static isInstance(e){return n0.hasMarker(e,n5)}};T=n8;var n4=Symbol.for("vercel.ai.error.AI_InvalidPromptError"),n9=Symbol.for("vercel.ai.error.AI_InvalidResponseDataError"),n7=Symbol.for("vercel.ai.error.AI_JSONParseError"),ae=Symbol.for("vercel.ai.error.AI_LoadAPIKeyError"),at=Symbol.for("vercel.ai.error.AI_LoadSettingError"),ar=Symbol.for("vercel.ai.error.AI_NoContentGeneratedError"),an="AI_NoSuchModelError",aa=`vercel.ai.error.${an}`,as=Symbol.for(aa),ai=class extends n0{constructor({errorName:e=an,modelId:t,modelType:r,message:n=`No such ${r}: ${t}`}){super({name:e,message:n}),this[k]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return n0.hasMarker(e,aa)}};k=as;var ao=Symbol.for("vercel.ai.error.AI_TooManyEmbeddingValuesForCallError"),al=Symbol.for("vercel.ai.error.AI_TypeValidationError"),au="AI_UnsupportedFunctionalityError",ac=`vercel.ai.error.${au}`,ad=Symbol.for(ac),ap=class extends n0{constructor({functionality:e}){super({name:au,message:`'${e}' functionality not supported.`}),this[P]=!0,this.functionality=e}static isInstance(e){return n0.hasMarker(e,ac)}};function af(e){return null===e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||(Array.isArray(e)?e.every(af):"object"==typeof e&&Object.entries(e).every(([e,t])=>"string"==typeof e&&af(t)))}P=ad;var ah=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let a=e6(r,t);if(null==e)return a;if(r.includes(n))throw new n3({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return t=>`${e}${n}${a(t)}`};function am(e){return e instanceof Error&&("AbortError"===e.name||"TimeoutError"===e.name)}ah();var ay=Symbol.for("vercel.ai.validator"),ag=()=>globalThis.fetch,{btoa:ab,atob:av}=globalThis;let aw=Symbol("Let zodToJsonSchema decide on which parser to use"),ax={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},a_=e=>"string"==typeof e?{...ax,name:e}:{...ax,...e},aE=e=>{let t=a_(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,r])=>[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}};function aI(e,t,r,n){n?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function aT(e,t,r,n,a){e[t]=r,aI(e,t,n,a)}function ak(e,t){return aZ(e.type._def,t)}let aP=(e,t)=>aZ(e.innerType._def,t),aA=(e,t)=>{let r={type:"integer",format:"unix-time"};if("openApi3"===t.target)return r;for(let n of e.checks)switch(n.kind){case"min":aT(r,"minimum",n.value,n.message,t);break;case"max":aT(r,"maximum",n.value,n.message,t)}return r},aS=e=>(!("type"in e)||"string"!==e.type)&&"allOf"in e,aO={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===s&&(s=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),s),ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function a$(e,t){let r={type:"string"};if(e.checks)for(let n of e.checks)switch(n.kind){case"min":aT(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,n.value):n.value,n.message,t);break;case"max":aT(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"email":switch(t.emailStrategy){case"format:email":aN(r,"email",n.message,t);break;case"format:idn-email":aN(r,"idn-email",n.message,t);break;case"pattern:zod":aM(r,aO.email,n.message,t)}break;case"url":aN(r,"uri",n.message,t);break;case"uuid":aN(r,"uuid",n.message,t);break;case"regex":aM(r,n.regex,n.message,t);break;case"cuid":aM(r,aO.cuid,n.message,t);break;case"cuid2":aM(r,aO.cuid2,n.message,t);break;case"startsWith":aM(r,RegExp(`^${aC(n.value,t)}`),n.message,t);break;case"endsWith":aM(r,RegExp(`${aC(n.value,t)}$`),n.message,t);break;case"datetime":aN(r,"date-time",n.message,t);break;case"date":aN(r,"date",n.message,t);break;case"time":aN(r,"time",n.message,t);break;case"duration":aN(r,"duration",n.message,t);break;case"length":aT(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,n.value):n.value,n.message,t),aT(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"includes":aM(r,RegExp(aC(n.value,t)),n.message,t);break;case"ip":"v6"!==n.version&&aN(r,"ipv4",n.message,t),"v4"!==n.version&&aN(r,"ipv6",n.message,t);break;case"base64url":aM(r,aO.base64url,n.message,t);break;case"jwt":aM(r,aO.jwt,n.message,t);break;case"cidr":"v6"!==n.version&&aM(r,aO.ipv4Cidr,n.message,t),"v4"!==n.version&&aM(r,aO.ipv6Cidr,n.message,t);break;case"emoji":aM(r,aO.emoji(),n.message,t);break;case"ulid":aM(r,aO.ulid,n.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":aN(r,"binary",n.message,t);break;case"contentEncoding:base64":aT(r,"contentEncoding","base64",n.message,t);break;case"pattern:zod":aM(r,aO.base64,n.message,t)}break;case"nanoid":aM(r,aO.nanoid,n.message,t)}return r}function aC(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let r=0;r<e.length;r++)aj.has(e[r])||(t+="\\"),t+=e[r];return t}(e):e}let aj=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function aN(e,t,r,n){e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&n.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):aT(e,"format",t,r,n)}function aM(e,t,r,n){e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&n.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:aR(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):aT(e,"pattern",aR(t,n),r,n)}function aR(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;let r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=r.i?e.source.toLowerCase():e.source,a="",s=!1,i=!1,o=!1;for(let e=0;e<n.length;e++){if(s){a+=n[e],s=!1;continue}if(r.i){if(i){if(n[e].match(/[a-z]/)){o?(a+=n[e],a+=`${n[e-2]}-${n[e]}`.toUpperCase(),o=!1):"-"===n[e+1]&&n[e+2]?.match(/[a-z]/)?(a+=n[e],o=!0):a+=`${n[e]}${n[e].toUpperCase()}`;continue}}else if(n[e].match(/[a-z]/)){a+=`[${n[e]}${n[e].toUpperCase()}]`;continue}}if(r.m){if("^"===n[e]){a+=`(^|(?<=[\r
]))`;continue}else if("$"===n[e]){a+=`($|(?=[\r
]))`;continue}}if(r.s&&"."===n[e]){a+=i?`${n[e]}\r
`:`[${n[e]}\r
]`;continue}a+=n[e],"\\"===n[e]?s=!0:i&&"]"===n[e]?i=!1:i||"["!==n[e]||(i=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function aB(e,t){if("openAi"===t.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===t.target&&e.keyType?._def.typeName===E.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,n)=>({...r,[n]:aZ(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",n]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};let r={type:"object",additionalProperties:aZ(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===E.ZodString&&e.keyType._def.checks?.length){let{type:n,...a}=a$(e.keyType._def,t);return{...r,propertyNames:a}}if(e.keyType?._def.typeName===E.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===E.ZodBranded&&e.keyType._def.type._def.typeName===E.ZodString&&e.keyType._def.type._def.checks?.length){let{type:n,...a}=ak(e.keyType._def,t);return{...r,propertyNames:a}}return r}let aF={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},aU=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>aZ(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0},aD=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return aZ(e.innerType._def,t);let r=aZ(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}},az=(e,t)=>{if("input"===t.pipeStrategy)return aZ(e.in._def,t);if("output"===t.pipeStrategy)return aZ(e.out._def,t);let r=aZ(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),n=aZ(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(e=>void 0!==e)}},aq=(e,t)=>aZ(e.innerType._def,t),aL=(e,t,r)=>{switch(t){case E.ZodString:return a$(e,r);case E.ZodNumber:return function(e,t){let r={type:"number"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"int":r.type="integer",aI(r,"type",n.message,t);break;case"min":"jsonSchema7"===t.target?n.inclusive?aT(r,"minimum",n.value,n.message,t):aT(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),aT(r,"minimum",n.value,n.message,t));break;case"max":"jsonSchema7"===t.target?n.inclusive?aT(r,"maximum",n.value,n.message,t):aT(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),aT(r,"maximum",n.value,n.message,t));break;case"multipleOf":aT(r,"multipleOf",n.value,n.message,t)}return r}(e,r);case E.ZodObject:return function(e,t){let r="openAi"===t.target,n={type:"object",properties:{}},a=[],s=e.shape();for(let e in s){let i=s[e];if(void 0===i||void 0===i._def)continue;let o=function(e){try{return e.isOptional()}catch{return!0}}(i);o&&r&&(i instanceof rI&&(i=i._def.innerType),i.isNullable()||(i=i.nullable()),o=!1);let l=aZ(i._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==l&&(n.properties[e]=l,o||a.push(e))}a.length&&(n.required=a);let i=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return aZ(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==i&&(n.additionalProperties=i),n}(e,r);case E.ZodBigInt:return function(e,t){let r={type:"integer",format:"int64"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"min":"jsonSchema7"===t.target?n.inclusive?aT(r,"minimum",n.value,n.message,t):aT(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),aT(r,"minimum",n.value,n.message,t));break;case"max":"jsonSchema7"===t.target?n.inclusive?aT(r,"maximum",n.value,n.message,t):aT(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),aT(r,"maximum",n.value,n.message,t));break;case"multipleOf":aT(r,"multipleOf",n.value,n.message,t)}return r}(e,r);case E.ZodBoolean:return{type:"boolean"};case E.ZodDate:return function e(t,r,n){let a=n??r.dateStrategy;if(Array.isArray(a))return{anyOf:a.map((n,a)=>e(t,r,n))};switch(a){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return aA(t,r)}}(e,r);case E.ZodUndefined:return{not:{}};case E.ZodNull:return"openApi3"===r.target?{enum:["null"],nullable:!0}:{type:"null"};case E.ZodArray:return function(e,t){let r={type:"array"};return e.type?._def&&e.type?._def?.typeName!==E.ZodAny&&(r.items=aZ(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&aT(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&aT(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(aT(r,"minItems",e.exactLength.value,e.exactLength.message,t),aT(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}(e,r);case E.ZodUnion:case E.ZodDiscriminatedUnion:return function(e,t){if("openApi3"===t.target)return aU(e,t);let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(e=>e._def.typeName in aF&&(!e._def.checks||!e._def.checks.length))){let e=r.reduce((e,t)=>{let r=aF[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e},[]);return{type:e.length>1?e:e[0]}}if(r.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=r.reduce((e,t)=>{let r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===r.length){let t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:r.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(r.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:r.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return aU(e,t)}(e,r);case E.ZodIntersection:return function(e,t){let r=[aZ(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),aZ(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e),n="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0,a=[];return r.forEach(e=>{if(aS(e))a.push(...e.allOf),void 0===e.unevaluatedProperties&&(n=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:r,...n}=e;t=n}else n=void 0;a.push(t)}}),a.length?{allOf:a,...n}:void 0}(e,r);case E.ZodTuple:return function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,r)=>aZ(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:aZ(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,r)=>aZ(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}(e,r);case E.ZodRecord:return aB(e,r);case E.ZodLiteral:return function(e,t){let r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}(e,r);case E.ZodEnum:return{type:"string",enum:Array.from(e.values)};case E.ZodNativeEnum:return function(e){let t=e.values,r=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),n=Array.from(new Set(r.map(e=>typeof e)));return{type:1===n.length?"string"===n[0]?"string":"number":["string","number"],enum:r}}(e);case E.ZodNullable:return function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:aF[e.innerType._def.typeName],nullable:!0}:{type:[aF[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){let r=aZ(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}let r=aZ(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}(e,r);case E.ZodOptional:return aD(e,r);case E.ZodMap:return function(e,t){return"record"===t.mapStrategy?aB(e,t):{type:"array",maxItems:125,items:{type:"array",items:[aZ(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},aZ(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}}}(e,r);case E.ZodSet:return function(e,t){let r={type:"array",uniqueItems:!0,items:aZ(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&aT(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&aT(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}(e,r);case E.ZodLazy:return()=>e.getter()._def;case E.ZodPromise:return aZ(e.type._def,r);case E.ZodNaN:case E.ZodNever:return{not:{}};case E.ZodEffects:return function(e,t){return"input"===t.effectStrategy?aZ(e.schema._def,t):{}}(e,r);case E.ZodAny:case E.ZodUnknown:return{};case E.ZodDefault:return function(e,t){return{...aZ(e.innerType._def,t),default:e.defaultValue()}}(e,r);case E.ZodBranded:return ak(e,r);case E.ZodReadonly:return aq(e,r);case E.ZodCatch:return aP(e,r);case E.ZodPipeline:return az(e,r);case E.ZodFunction:case E.ZodVoid:case E.ZodSymbol:default:return}};function aZ(e,t,r=!1){let n=t.seen.get(e);if(t.override){let a=t.override?.(e,t,n,r);if(a!==aw)return a}if(n&&!r){let e=aV(n,t);if(void 0!==e)return e}let a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);let s=aL(e,e.typeName,t),i="function"==typeof s?aZ(s(),t):s;if(i&&aH(e,t,i),t.postProcess){let r=t.postProcess(i,e,t);return a.jsonSchema=i,r}return a.jsonSchema=i,i}let aV=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:aG(t.currentPath,e.path)};case"none":case"seen":if(e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e))return console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{};return"seen"===t.$refStrategy?{}:void 0}},aG=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},aH=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r),aK=(e,t)=>{let r=aE(t),n="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,n])=>({...e,[t]:aZ(n._def,{...r,currentPath:[...r.basePath,r.definitionPath,t]},!0)??{}}),{}):void 0,a="string"==typeof t?t:t?.nameStrategy==="title"?void 0:t?.name,s=aZ(e._def,void 0===a?r:{...r,currentPath:[...r.basePath,r.definitionPath,a]},!1)??{},i="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==i&&(s.title=i);let o=void 0===a?n?{...s,[r.definitionPath]:n}:s:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,a].join("/"),[r.definitionPath]:{...n,[a]:s}};return"jsonSchema7"===r.target?o.$schema="http://json-schema.org/draft-07/schema#":("jsonSchema2019-09"===r.target||"openAi"===r.target)&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===r.target&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};var aW={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},aJ={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},aY={code:"4",name:"assistant_message",parse:e=>{if(null==e||"object"!=typeof e||!("id"in e)||!("role"in e)||!("content"in e)||"string"!=typeof e.id||"string"!=typeof e.role||"assistant"!==e.role||!Array.isArray(e.content)||!e.content.every(e=>null!=e&&"object"==typeof e&&"type"in e&&"text"===e.type&&"text"in e&&null!=e.text&&"object"==typeof e.text&&"value"in e.text&&"string"==typeof e.text.value))throw Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},aX={code:"5",name:"assistant_control_data",parse:e=>{if(null==e||"object"!=typeof e||!("threadId"in e)||!("messageId"in e)||"string"!=typeof e.threadId||"string"!=typeof e.messageId)throw Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},aQ={code:"6",name:"data_message",parse:e=>{if(null==e||"object"!=typeof e||!("role"in e)||!("data"in e)||"string"!=typeof e.role||"data"!==e.role)throw Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},a0=[aW,aJ,aY,aX,aQ],a1={[aW.code]:aW,[aJ.code]:aJ,[aY.code]:aY,[aX.code]:aX,[aQ.code]:aQ};aW.name,aW.code,aJ.name,aJ.code,aY.name,aY.code,aX.name,aX.code,aQ.name,aQ.code;var a2=a0.map(e=>e.code),a6={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},a5={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw Error('"data" parts expect an array value.');return{type:"data",value:e}}},a8={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},a3={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},a4={code:"9",name:"tool_call",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName||!("args"in e)||"object"!=typeof e.args)throw Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},a9={code:"a",name:"tool_result",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("result"in e))throw Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},a7={code:"b",name:"tool_call_streaming_start",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName)throw Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},se={code:"c",name:"tool_call_delta",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("argsTextDelta"in e)||"string"!=typeof e.argsTextDelta)throw Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},st={code:"d",name:"finish_message",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_message" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},sr={code:"e",name:"finish_step",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_step" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&"boolean"==typeof e.isContinued&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},sn=[a6,a5,a8,a3,a4,a9,a7,se,st,sr],sa={[a6.code]:a6,[a5.code]:a5,[a8.code]:a8,[a3.code]:a3,[a4.code]:a4,[a9.code]:a9,[a7.code]:a7,[se.code]:se,[st.code]:st,[sr.code]:sr};a6.name,a6.code,a5.name,a5.code,a8.name,a8.code,a3.name,a3.code,a4.name,a4.code,a9.name,a9.code,a7.name,a7.code,se.name,se.code,st.name,st.code,sr.name,sr.code;var ss=sn.map(e=>e.code),si=e=>{let t=e.indexOf(":");if(-1===t)throw Error("Failed to parse stream string. No separator found.");let r=e.slice(0,t);if(!ss.includes(r))throw Error(`Failed to parse stream string. Invalid code ${r}.`);let n=JSON.parse(e.slice(t+1));return sa[r].parse(n)};async function so({stream:e,onTextPart:t,onDataPart:r,onErrorPart:n,onToolCallStreamingStartPart:a,onToolCallDeltaPart:s,onToolCallPart:i,onToolResultPart:o,onMessageAnnotationsPart:l,onFinishMessagePart:u,onFinishStepPart:c}){let d=e.getReader(),p=new TextDecoder,f=[],h=0;for(;;){let{value:e}=await d.read();if(e&&(f.push(e),h+=e.length,10!==e[e.length-1]))continue;if(0===f.length)break;let m=function(e,t){let r=new Uint8Array(t),n=0;for(let t of e)r.set(t,n),n+=t.length;return e.length=0,r}(f,h);for(let{type:e,value:d}of(h=0,p.decode(m,{stream:!0}).split("\n").filter(e=>""!==e).map(si)))switch(e){case"text":await (null==t?void 0:t(d));break;case"data":await (null==r?void 0:r(d));break;case"error":await (null==n?void 0:n(d));break;case"message_annotations":await (null==l?void 0:l(d));break;case"tool_call_streaming_start":await (null==a?void 0:a(d));break;case"tool_call_delta":await (null==s?void 0:s(d));break;case"tool_call":await (null==i?void 0:i(d));break;case"tool_result":await (null==o?void 0:o(d));break;case"finish_message":await (null==u?void 0:u(d));break;case"finish_step":await (null==c?void 0:c(d));break;default:throw Error(`Unknown stream part type: ${e}`)}}}Symbol.for("vercel.ai.schema");var sl=Object.defineProperty,su=(e,t)=>{for(var r in t)sl(e,r,{get:t[r],enumerable:!0})};async function sc(e){return void 0===e?Promise.resolve():new Promise(t=>setTimeout(t,e))}var sd="AI_RetryError",sp=`vercel.ai.error.${sd}`,sf=Symbol.for(sp),sh=class extends n0{constructor({message:e,reason:t,errors:r}){super({name:sd,message:e}),this[A]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return n0.hasMarker(e,sp)}};A=sf;var sm=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:r=2}={})=>async n=>sy(n,{maxRetries:e,delayInMs:t,backoffFactor:r});async function sy(e,{maxRetries:t,delayInMs:r,backoffFactor:n},a=[]){try{return await e()}catch(l){if(isAbortError(l)||0===t)throw l;let s=getErrorMessage(l),i=[...a,l],o=i.length;if(o>t)throw new sh({message:`Failed after ${o} attempts. Last error: ${s}`,reason:"maxRetriesExceeded",errors:i});if(l instanceof Error&&APICallError.isInstance(l)&&!0===l.isRetryable&&o<=t)return await sc(r),sy(e,{maxRetries:t,delayInMs:n*r,backoffFactor:n},i);if(1===o)throw l;throw new sh({message:`Failed after ${o} attempts with non-retryable error: '${s}'`,reason:"errorNotRetryable",errors:i})}}function sg({operationId:e,telemetry:t}){return{"operation.name":`${e}${(null==t?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":null==t?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":null==t?void 0:t.functionId}}function sb({model:e,settings:t,telemetry:r,headers:n}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((e,[t,r])=>(e[`ai.settings.${t}`]=r,e),{}),...Object.entries(null!=(a=null==r?void 0:r.metadata)?a:{}).reduce((e,[t,r])=>(e[`ai.telemetry.metadata.${t}`]=r,e),{}),...Object.entries(null!=n?n:{}).reduce((e,[t,r])=>(void 0!==r&&(e[`ai.request.headers.${t}`]=r),e),{})}}var sv={startSpan:()=>sw,startActiveSpan:(e,t,r,n)=>"function"==typeof t?t(sw):"function"==typeof r?r(sw):"function"==typeof n?n(sw):void 0},sw={spanContext:()=>sx,setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording:()=>!1,recordException(){return this}},sx={traceId:"",spanId:"",traceFlags:0};function s_({isEnabled:e=!1,tracer:t}={}){return e?t||trace.getTracer("ai"):sv}function sE({name:e,tracer:t,attributes:r,fn:n,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:r},async e=>{try{let t=await n(e);return a&&e.end(),t}catch(t){try{t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:SpanStatusCode.ERROR,message:t.message})):e.setStatus({code:SpanStatusCode.ERROR})}finally{e.end()}throw t}})}function sI({telemetry:e,attributes:t}){return(null==e?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((t,[r,n])=>{if(void 0===n)return t;if("object"==typeof n&&"input"in n&&"function"==typeof n.input){if((null==e?void 0:e.recordInputs)===!1)return t;let a=n.input();return void 0===a?t:{...t,[r]:a}}if("object"==typeof n&&"output"in n&&"function"==typeof n.output){if((null==e?void 0:e.recordOutputs)===!1)return t;let a=n.output();return void 0===a?t:{...t,[r]:a}}return{...t,[r]:n}},{})}var sT="AI_DownloadError",sk=`vercel.ai.error.${sT}`,sP=Symbol.for(sk),sA=class extends n0{constructor({url:e,statusCode:t,statusText:r,cause:n,message:a=null==n?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${n}`}){super({name:sT,message:a,cause:n}),this[S]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return n0.hasMarker(e,sk)}};async function sS({url:e,fetchImplementation:t=fetch}){var r;let n=e.toString();try{let e=await t(n);if(!e.ok)throw new sA({url:n,statusCode:e.status,statusText:e.statusText});return{data:new Uint8Array(await e.arrayBuffer()),mimeType:null!=(r=e.headers.get("content-type"))?r:void 0}}catch(e){if(sA.isInstance(e))throw e;throw new sA({url:n,cause:e})}}S=sP;var sO=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}],s$="AI_InvalidDataContentError",sC=`vercel.ai.error.${s$}`,sj=Symbol.for(sC),sN=class extends n0{constructor({content:e,cause:t,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:s$,message:r,cause:t}),this[O]=!0,this.content=e}static isInstance(e){return n0.hasMarker(e,sC)}};O=sj;var sM=ni.union([ni.string(),ni.instanceof(Uint8Array),ni.instanceof(ArrayBuffer),ni.custom(e=>{var t,r;return null!=(r=null==(t=globalThis.Buffer)?void 0:t.isBuffer(e))&&r},{message:"Must be a Buffer"})]);function sR(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)try{return convertBase64ToUint8Array(e)}catch(t){throw new sN({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new sN({content:e})}var sB="AI_InvalidMessageRoleError",sF=`vercel.ai.error.${sB}`,sU=Symbol.for(sF),sD=class extends n0{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:sB,message:t}),this[$]=!0,this.role=e}static isInstance(e){return n0.hasMarker(e,sF)}};async function sz({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:r=()=>!1,downloadImplementation:n=sS}){let a=await sq(e.messages,n,t,r);return[...null!=e.system?[{role:"system",content:e.system}]:[],...e.messages.map(e=>(function(e,t){let r=e.role;switch(r){case"system":return{role:"system",content:e.content,providerMetadata:e.experimental_providerMetadata};case"user":if("string"==typeof e.content)return{role:"user",content:[{type:"text",text:e.content}],providerMetadata:e.experimental_providerMetadata};return{role:"user",content:e.content.map(e=>(function(e,t){let r,n,a;if("text"===e.type)return{type:"text",text:e.text,providerMetadata:e.experimental_providerMetadata};let s=e.mimeType,i=e.type;switch(i){case"image":r=e.image;break;case"file":r=e.data;break;default:throw Error(`Unsupported part type: ${i}`)}try{n="string"==typeof r?new URL(r):r}catch(e){n=r}if(n instanceof URL)if("data:"===n.protocol){let{mimeType:e,base64Content:t}=function(e){try{let[t,r]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:r}}catch(e){return{mimeType:void 0,base64Content:void 0}}}(n.toString());if(null==e||null==t)throw Error(`Invalid data URL format in part ${i}`);s=e,a=sR(t)}else{let e=t[n.toString()];e?(a=e.data,null!=s||(s=e.mimeType)):a=n}else a=sR(n);switch(i){case"image":return null==s&&a instanceof Uint8Array&&(s=function(e){for(let{bytes:t,mimeType:r}of sO)if(e.length>=t.length&&t.every((t,r)=>e[r]===t))return r}(a)),{type:"image",image:a,mimeType:s,providerMetadata:e.experimental_providerMetadata};case"file":var o;if(null==s)throw Error("Mime type is missing for file part");return{type:"file",data:a instanceof Uint8Array?"string"==typeof(o=a)?o:o instanceof ArrayBuffer?convertUint8ArrayToBase64(new Uint8Array(o)):convertUint8ArrayToBase64(o):a,mimeType:s,providerMetadata:e.experimental_providerMetadata}}})(e,t)).filter(e=>"text"!==e.type||""!==e.text),providerMetadata:e.experimental_providerMetadata};case"assistant":if("string"==typeof e.content)return{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:e.experimental_providerMetadata};return{role:"assistant",content:e.content.filter(e=>"text"!==e.type||""!==e.text).map(e=>{let{experimental_providerMetadata:t,...r}=e;return{...r,providerMetadata:t}}),providerMetadata:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(e=>({type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:e.result,content:e.experimental_content,isError:e.isError,providerMetadata:e.experimental_providerMetadata})),providerMetadata:e.experimental_providerMetadata};default:throw new sD({role:r})}})(e,a))]}async function sq(e,t,r,n){let a=e.filter(e=>"user"===e.role).map(e=>e.content).filter(e=>Array.isArray(e)).flat().filter(e=>"image"===e.type||"file"===e.type).filter(e=>"image"!==e.type||!0!==r).map(e=>"image"===e.type?e.image:e.data).map(e=>"string"==typeof e&&(e.startsWith("http:")||e.startsWith("https:"))?new URL(e):e).filter(e=>e instanceof URL).filter(e=>!n(e));return Object.fromEntries((await Promise.all(a.map(async e=>({url:e,data:await t({url:e})})))).map(({url:e,data:t})=>[e.toString(),t]))}$=sU;var sL="AI_InvalidArgumentError",sZ=`vercel.ai.error.${sL}`,sV=Symbol.for(sZ),sG=class extends n0{constructor({parameter:e,value:t,message:r}){super({name:sL,message:`Invalid argument for parameter ${e}: ${r}`}),this[C]=!0,this.parameter=e,this.value=t}static isInstance(e){return n0.hasMarker(e,sZ)}};function sH({maxTokens:e,temperature:t,topP:r,topK:n,presencePenalty:a,frequencyPenalty:s,stopSequences:i,seed:o,maxRetries:l}){if(null!=e){if(!Number.isInteger(e))throw new sG({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new sG({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(null!=t&&"number"!=typeof t)throw new sG({parameter:"temperature",value:t,message:"temperature must be a number"});if(null!=r&&"number"!=typeof r)throw new sG({parameter:"topP",value:r,message:"topP must be a number"});if(null!=n&&"number"!=typeof n)throw new sG({parameter:"topK",value:n,message:"topK must be a number"});if(null!=a&&"number"!=typeof a)throw new sG({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(null!=s&&"number"!=typeof s)throw new sG({parameter:"frequencyPenalty",value:s,message:"frequencyPenalty must be a number"});if(null!=o&&!Number.isInteger(o))throw new sG({parameter:"seed",value:o,message:"seed must be an integer"});if(null!=l){if(!Number.isInteger(l))throw new sG({parameter:"maxRetries",value:l,message:"maxRetries must be an integer"});if(l<0)throw new sG({parameter:"maxRetries",value:l,message:"maxRetries must be >= 0"})}return{maxTokens:e,temperature:null!=t?t:0,topP:r,topK:n,presencePenalty:a,frequencyPenalty:s,stopSequences:null!=i&&i.length>0?i:void 0,seed:o,maxRetries:null!=l?l:2}}C=sV;var sK=ni.lazy(()=>ni.union([ni.null(),ni.string(),ni.number(),ni.boolean(),ni.record(ni.string(),sK),ni.array(sK)])),sW=ni.record(ni.string(),ni.record(ni.string(),sK)),sJ=ni.array(ni.union([ni.object({type:ni.literal("text"),text:ni.string()}),ni.object({type:ni.literal("image"),data:ni.string(),mimeType:ni.string().optional()})])),sY=ni.object({type:ni.literal("text"),text:ni.string(),experimental_providerMetadata:sW.optional()}),sX=ni.object({type:ni.literal("image"),image:ni.union([sM,ni.instanceof(URL)]),mimeType:ni.string().optional(),experimental_providerMetadata:sW.optional()}),sQ=ni.object({type:ni.literal("file"),data:ni.union([sM,ni.instanceof(URL)]),mimeType:ni.string(),experimental_providerMetadata:sW.optional()}),s0=ni.object({type:ni.literal("tool-call"),toolCallId:ni.string(),toolName:ni.string(),args:ni.unknown()}),s1=ni.object({type:ni.literal("tool-result"),toolCallId:ni.string(),toolName:ni.string(),result:ni.unknown(),content:sJ.optional(),isError:ni.boolean().optional(),experimental_providerMetadata:sW.optional()}),s2=ni.object({role:ni.literal("system"),content:ni.string(),experimental_providerMetadata:sW.optional()}),s6=ni.object({role:ni.literal("user"),content:ni.union([ni.string(),ni.array(ni.union([sY,sX,sQ]))]),experimental_providerMetadata:sW.optional()}),s5=ni.object({role:ni.literal("assistant"),content:ni.union([ni.string(),ni.array(ni.union([sY,s0]))]),experimental_providerMetadata:sW.optional()}),s8=ni.object({role:ni.literal("tool"),content:ni.array(s1),experimental_providerMetadata:sW.optional()}),s3=ni.union([s2,s6,s5,s8]);function s4(e){return"object"==typeof e&&null!==e&&("function"===e.role||"data"===e.role||"toolInvocations"in e||"experimental_attachments"in e)?"has-ui-specific-parts":"object"==typeof e&&null!==e&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e)?"has-core-specific-parts":"object"==typeof e&&null!==e&&"role"in e&&"content"in e&&"string"==typeof e.content&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var s9="AI_MessageConversionError",s7=`vercel.ai.error.${s9}`,ie=Symbol.for(s7),it=class extends n0{constructor({originalMessage:e,message:t}){super({name:s9,message:t}),this[j]=!0,this.originalMessage=e}static isInstance(e){return n0.hasMarker(e,s7)}};function ir({prompt:e,tools:t}){if(null==e.prompt&&null==e.messages)throw new InvalidPromptError({prompt:e,message:"prompt or messages must be defined"});if(null!=e.prompt&&null!=e.messages)throw new InvalidPromptError({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(null!=e.system&&"string"!=typeof e.system)throw new InvalidPromptError({prompt:e,message:"system must be a string"});if(null!=e.prompt){if("string"!=typeof e.prompt)throw new InvalidPromptError({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(null!=e.messages){let r=function(e){if(!Array.isArray(e))return"other";if(0===e.length)return"messages";let t=e.map(s4);return t.some(e=>"has-ui-specific-parts"===e)?"ui-messages":t.every(e=>"has-core-specific-parts"===e||"message"===e)?"messages":"other"}(e.messages);if("other"===r)throw new InvalidPromptError({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});let n="ui-messages"===r?function(e,t){var r;let n=null!=(r=null==t?void 0:t.tools)?r:{},a=[];for(let t of e){let{role:e,content:r,toolInvocations:s,experimental_attachments:i}=t;switch(e){case"system":a.push({role:"system",content:r});break;case"user":a.push({role:"user",content:i?[{type:"text",text:r},...function(e){var t,r,n;let a=[];for(let s of e){let e;try{e=new URL(s.url)}catch(e){throw Error(`Invalid URL: ${s.url}`)}switch(e.protocol){case"http:":case"https:":if(null==(t=s.contentType)?void 0:t.startsWith("image/"))a.push({type:"image",image:e});else{if(!s.contentType)throw Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:e,mimeType:s.contentType})}break;case"data:":{let e,t,i;try{[e,t]=s.url.split(","),i=e.split(";")[0].split(":")[1]}catch(e){throw Error(`Error processing data URL: ${s.url}`)}if(null==i||null==t)throw Error(`Invalid data URL format: ${s.url}`);if(null==(r=s.contentType)?void 0:r.startsWith("image/"))a.push({type:"image",image:sR(t)});else if(null==(n=s.contentType)?void 0:n.startsWith("text/"))a.push({type:"text",text:function(e){try{return new TextDecoder().decode(e)}catch(e){throw Error("Error decoding Uint8Array to text")}}(sR(t))});else{if(!s.contentType)throw Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:t,mimeType:s.contentType})}break}default:throw Error(`Unsupported URL protocol: ${e.protocol}`)}}return a}(i)]:r});break;case"assistant":if(null==s){a.push({role:"assistant",content:r});break}a.push({role:"assistant",content:[{type:"text",text:r},...s.map(({toolCallId:e,toolName:t,args:r})=>({type:"tool-call",toolCallId:e,toolName:t,args:r}))]}),a.push({role:"tool",content:s.map(e=>{if(!("result"in e))throw new it({originalMessage:t,message:"ToolInvocation must have a result: "+JSON.stringify(e)});let{toolCallId:r,toolName:a,result:s}=e,i=n[a];return(null==i?void 0:i.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:r,toolName:a,result:i.experimental_toToolResultContent(s),experimental_content:i.experimental_toToolResultContent(s)}:{type:"tool-result",toolCallId:r,toolName:a,result:s}})});break;case"data":break;default:throw new it({originalMessage:t,message:`Unsupported role: ${e}`})}}return a}(e.messages,{tools:t}):e.messages,a=safeValidateTypes({value:n,schema:z7.array(s3)});if(!a.success)throw new InvalidPromptError({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:n,system:e.system}}throw Error("unreachable")}function ia({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function is(e,{contentType:t,dataStreamVersion:r}){let n=new Headers(null!=e?e:{});return n.has("Content-Type")||n.set("Content-Type",t),void 0!==r&&n.set("X-Vercel-AI-Data-Stream",r),n}function ii({prompt:e,schema:t,schemaPrefix:r=null!=t?"JSON schema:":void 0,schemaSuffix:n=null!=t?"You MUST answer with a JSON object that matches the JSON schema above.":"You MUST answer with JSON."}){return[null!=e&&e.length>0?e:void 0,null!=e&&e.length>0?"":void 0,r,null!=t?JSON.stringify(t):void 0,n].filter(e=>null!=e).join("\n")}j=ie;var io="AI_NoObjectGeneratedError",il=`vercel.ai.error.${io}`,iu=Symbol.for(il),ic=class extends n0{constructor({message:e="No object generated."}={}){super({name:io,message:e}),this[N]=!0}static isInstance(e){return n0.hasMarker(e,il)}};function id(e,t){let r=e.pipeThrough(new TransformStream(t));return r[Symbol.asyncIterator]=()=>{let e=r.getReader();return{async next(){let{done:t,value:r}=await e.read();return t?{done:!0,value:void 0}:{done:!1,value:r}}}},r}N=iu;var ip={type:"no-schema",jsonSchema:void 0,validatePartialResult:({value:e,textDelta:t})=>({success:!0,value:{partial:e,textDelta:t}}),validateFinalResult:e=>void 0===e?{success:!1,error:new ic}:{success:!0,value:e},createElementStream(){throw new ap({functionality:"element streams in no-schema mode"})}},ih=e=>({type:"object",jsonSchema:e.jsonSchema,validatePartialResult:({value:e,textDelta:t})=>({success:!0,value:{partial:e,textDelta:t}}),validateFinalResult:t=>safeValidateTypes2({value:t,schema:e}),createElementStream(){throw new UnsupportedFunctionalityError({functionality:"element streams in object mode"})}}),im=e=>{let{$schema:t,...r}=e.jsonSchema;return{type:"enum",jsonSchema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:r}},required:["elements"],additionalProperties:!1},validatePartialResult({value:t,latestObject:r,isFirstDelta:n,isFinalDelta:a}){var s;if(!isJSONObject(t)||!isJSONArray(t.elements))return{success:!1,error:new TypeValidationError({value:t,cause:"value must be an object that contains an array of elements"})};let i=t.elements,o=[];for(let t=0;t<i.length;t++){let r=safeValidateTypes2({value:i[t],schema:e});if(t!==i.length-1||a){if(!r.success)return r;o.push(r.value)}}let l=null!=(s=null==r?void 0:r.length)?s:0,u="";return n&&(u+="["),l>0&&(u+=","),u+=o.slice(l).map(e=>JSON.stringify(e)).join(","),a&&(u+="]"),{success:!0,value:{partial:o,textDelta:u}}},validateFinalResult(t){if(!isJSONObject(t)||!isJSONArray(t.elements))return{success:!1,error:new TypeValidationError({value:t,cause:"value must be an object that contains an array of elements"})};let r=t.elements;for(let t of r){let r=safeValidateTypes2({value:t,schema:e});if(!r.success)return r}return{success:!0,value:r}},createElementStream(e){let t=0;return id(e,{transform(e,r){switch(e.type){case"object":{let n=e.object;for(;t<n.length;t++)r.enqueue(n[t]);break}case"text-delta":case"finish":break;case"error":r.error(e.error);break;default:throw Error(`Unsupported chunk type: ${e}`)}}})}}},iy=e=>({type:"enum",jsonSchema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:e}},required:["result"],additionalProperties:!1},validateFinalResult(t){if(!isJSONObject(t)||"string"!=typeof t.result)return{success:!1,error:new TypeValidationError({value:t,cause:'value must be an object that contains a string in the "result" property.'})};let r=t.result;return e.includes(r)?{success:!0,value:r}:{success:!1,error:new TypeValidationError({value:t,cause:"value must be a string in the enum"})}},validatePartialResult(){throw new UnsupportedFunctionalityError({functionality:"partial results in enum mode"})},createElementStream(){throw new UnsupportedFunctionalityError({functionality:"element streams in enum mode"})}});ah({prefix:"aiobj",size:24});var ig=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise||(this.promise=new Promise((e,t)=>{"resolved"===this.status.type?e(this.status.value):"rejected"===this.status.type&&t(this.status.error),this._resolve=e,this._reject=t})),this.promise}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&(null==(t=this._resolve)||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&(null==(t=this._reject)||t.call(this,e))}};function ib(e,{contentType:t,dataStreamVersion:r}){let n={};if(null!=e)for(let[t,r]of Object.entries(e))n[t]=r;return null==n["Content-Type"]&&(n["Content-Type"]=t),void 0!==r&&(n["X-Vercel-AI-Data-Stream"]=r),n}function iv({response:e,status:t,statusText:r,headers:n,stream:a}){e.writeHead(null!=t?t:200,r,n);let s=a.getReader();(async()=>{try{for(;;){let{done:t,value:r}=await s.read();if(t)break;e.write(r)}}catch(e){throw e}finally{e.end()}})()}function iw(){let e,t;return{promise:new Promise((r,n)=>{e=r,t=n}),resolve:e,reject:t}}function ix(){let e=[],t=null,r=!1,n=iw(),a=async()=>{if(r&&0===e.length){null==t||t.close();return}if(0===e.length)return n=iw(),await n.promise,a();try{let{value:n,done:s}=await e[0].read();s?(e.shift(),e.length>0?await a():r&&(null==t||t.close())):null==t||t.enqueue(n)}catch(n){null==t||t.error(n),e.shift(),r&&0===e.length&&(null==t||t.close())}};return{stream:new ReadableStream({start(e){t=e},pull:a,async cancel(){for(let t of e)await t.cancel();e=[],r=!0}}),addStream:t=>{if(r)throw Error("Cannot add inner stream: outer stream is closed");e.push(t.getReader()),n.resolve()},close:()=>{r=!0,n.resolve(),0===e.length&&(null==t||t.close())}}}ah({prefix:"aiobj",size:24});var i_="AI_InvalidToolArgumentsError",iE=`vercel.ai.error.${i_}`,iI=Symbol.for(iE),iT=class extends n0{constructor({toolArgs:e,toolName:t,cause:r,message:n=`Invalid arguments for tool ${t}: ${function(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}(r)}`}){super({name:i_,message:n,cause:r}),this[M]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return n0.hasMarker(e,iE)}};M=iI;var ik="AI_NoSuchToolError",iP=`vercel.ai.error.${ik}`,iA=Symbol.for(iP),iS=class extends n0{constructor({toolName:e,availableTools:t,message:r=`Model tried to call unavailable tool '${e}'. ${void 0===t?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:ik,message:r}),this[R]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return n0.hasMarker(e,iP)}};R=iA;var iO=/^([\s\S]*?)(\s+)(\S*)$/;ah({prefix:"aitxt",size:24});function i$(e,t){let r,n,a=e.getReader(),s=t.getReader(),i=!1,o=!1;async function l(e){try{null==r&&(r=a.read());let t=await r;r=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}async function u(e){try{null==n&&(n=s.read());let t=await n;n=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}return new ReadableStream({async pull(e){try{if(i)return void await u(e);if(o)return void await l(e);null==r&&(r=a.read()),null==n&&(n=s.read());let{result:t,reader:c}=await Promise.race([r.then(e=>({result:e,reader:a})),n.then(e=>({result:e,reader:s}))]);t.done||e.enqueue(t.value),c===a?(r=void 0,t.done&&(await u(e),i=!0)):(n=void 0,t.done&&(o=!0,await l(e)))}catch(t){e.error(t)}},cancel(){a.cancel(),s.cancel()}})}ah({prefix:"aitxt",size:24});var iC="AI_NoSuchProviderError",ij=`vercel.ai.error.${iC}`,iN=Symbol.for(ij),iM=class extends ai{constructor({modelId:e,modelType:t,providerId:r,availableProviders:n,message:a=`No such provider: ${r} (available providers: ${n.join()})`}){super({errorName:iC,modelId:e,modelType:t,message:a}),this[B]=!0,this.providerId=r,this.availableProviders=n}static isInstance(e){return n0.hasMarker(e,ij)}};B=iN;function iR(e={}){let t=new TextEncoder,r="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(n,a){a.enqueue(t.encode(n)),r+=n,e.onToken&&await e.onToken(n),e.onText&&"string"==typeof n&&await e.onText(n)},async flush(){e.onCompletion&&await e.onCompletion(r)}})}function iB(){let e=new TextEncoder,t=new TextDecoder;return new TransformStream({transform:async(r,n)=>{let a=t.decode(r);n.enqueue(e.encode(function(e,t){let r=sn.find(t=>t.name===e);if(!r)throw Error(`Invalid stream part type: ${e}`);return`${r.code}:${JSON.stringify(t)}
`}("text",a)))}})}function iF(e,t){return e.pipeThrough(new TransformStream({transform:async(e,t)=>{var r;if("string"==typeof e)return void t.enqueue(e);if("event"in e){"on_chat_model_stream"===e.event&&iD(null==(r=e.data)?void 0:r.chunk,t);return}iD(e,t)}})).pipeThrough(iR(t)).pipeThrough(iB())}function iU(e,t){var r;let n=iF(e,null==t?void 0:t.callbacks),a=null==t?void 0:t.data,s=null==t?void 0:t.init;return new Response(a?i$(a.stream,n):n,{status:null!=(r=null==s?void 0:s.status)?r:200,statusText:null==s?void 0:s.statusText,headers:is(null==s?void 0:s.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function iD(e,t){if("string"==typeof e.content)t.enqueue(e.content);else for(let r of e.content)"text"===r.type&&t.enqueue(r.text)}function iz(e,t){var r;let n,a=(n=!0,e=>(n&&(e=e.trimStart())&&(n=!1),e));return(r=e[Symbol.asyncIterator](),new ReadableStream({async pull(e){try{let{value:t,done:n}=await r.next();n?e.close():e.enqueue(t)}catch(t){e.error(t)}},cancel(){}})).pipeThrough(new TransformStream({async transform(e,t){t.enqueue(a(e.delta))}})).pipeThrough(iR(t)).pipeThrough(iB())}function iq(e,t={}){var r;let{init:n,data:a,callbacks:s}=t,i=iz(e,s);return new Response(a?i$(a.stream,i):i,{status:null!=(r=null==n?void 0:n.status)?r:200,statusText:null==n?void 0:n.statusText,headers:is(null==n?void 0:n.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}su({},{toDataStream:()=>iF,toDataStreamResponse:()=>iU}),su({},{toDataStream:()=>iz,toDataStreamResponse:()=>iq});var iL=Object.defineProperty,iZ=(e,t)=>iL(e,"name",{value:t,configurable:!0});async function iV({wallet:e,plugins:t}){let r=await nJ({wallet:e,plugins:t}),n={};for(let e of r)n[e.name]={description:e.description,parameters:e.parameters,execute:iZ(async t=>await e.execute(t),"execute")};return n}iZ(iV,"getOnChainTools");var iG=Object.defineProperty,iH=(e,t)=>iG(e,"name",{value:t,configurable:!0}),iK=class{static{nW(this,"ToolBase")}name;description;parameters;constructor(e){this.name=e.name,this.description=e.description,this.parameters=e.parameters}};function iW(e,t){return new class extends iK{execute(e){return t(e)}}(e)}nW(iW,"createTool");var iJ=class{static{nW(this,"WalletClientBase")}getCoreTools(){return[iW({name:"get_address",description:"Get the address of the wallet",parameters:ni.object({})},()=>this.getAddress()),iW({name:"get_chain",description:"Get the chain of the wallet",parameters:ni.object({})},()=>this.getChain()),iW({name:"get_balance",description:"Get the balance of the wallet",parameters:ni.object({address:ni.string()})},e=>this.balanceOf(e.address)),iW({name:"sign_message",description:"Sign a message with the wallet",parameters:ni.object({message:ni.string()})},e=>this.signMessage(e.message))]}},iY=class extends iJ{static{iH(this,"EVMWalletClient")}},iX=r(57563),iQ=r(98900),i0=r(34693),i1=r(74297),i2=r(30891),i6=r(64080),i5=r(88981),i8=r(24029),i3=r(84439);function i4(e,t){if(!(e instanceof i8.C))return!1;let r=e.walk(e=>e instanceof i3.M);return r instanceof i3.M&&(!!(r.data?.errorName==="ResolverNotFound"||r.data?.errorName==="ResolverWildcardNotSupported"||r.data?.errorName==="ResolverNotContract"||r.data?.errorName==="ResolverError"||r.data?.errorName==="HttpError"||r.reason?.includes("Wildcard on non-extended resolvers is not supported"))||"reverse"===t&&r.reason===i5.fD[50])}var i9=r(50327),i7=r(53958),oe=r(57131),ot=r(11246);function or(e){if(66!==e.length||0!==e.indexOf("[")||65!==e.indexOf("]"))return null;let t=`0x${e.slice(1,65)}`;return(0,ot.q)(t)?t:null}function on(e){let t=new Uint8Array(32).fill(0);if(!e)return(0,i6.My)(t);let r=e.split(".");for(let e=r.length-1;e>=0;e-=1){let n=or(r[e]),a=n?(0,i7.ZJ)(n):(0,oe.S)((0,i7.Af)(r[e]),"bytes");t=(0,oe.S)((0,i9.xW)([t,a]),"bytes")}return(0,i6.My)(t)}function oa(e){let t=e.replace(/^\.|\.$/gm,"");if(0===t.length)return new Uint8Array(1);let r=new Uint8Array((0,i7.Af)(t).byteLength+2),n=0,a=t.split(".");for(let e=0;e<a.length;e++){var s;let t=(0,i7.Af)(a[e]);t.byteLength>255&&(t=(0,i7.Af)((s=function(e){let t=new Uint8Array(32).fill(0);return e?or(e)||(0,oe.S)((0,i7.Af)(e)):(0,i6.My)(t)}(a[e]),`[${s.slice(2)}]`))),r[n]=t.length,r.set(t,n+1),n+=t.length+1}return r.byteLength!==n+1?r.slice(0,n+1):r}function os(e,t,r){let n=e[t.name];if("function"==typeof n)return n;let a=e[r];return"function"==typeof a?a:r=>t(e,r)}var oi=r(58356),oo=r(34607);class ol extends i8.C{constructor(e,{code:t,docsPath:r,metaMessages:n,name:a,shortMessage:s}){super(s,{cause:e,docsPath:r,metaMessages:n||e?.metaMessages,name:a||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=a||e.name,this.code=e instanceof oo.J8?e.code:t??-1}}class ou extends ol{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class oc extends ol{constructor(e){super(e,{code:oc.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(oc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class od extends ol{constructor(e){super(e,{code:od.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(od,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class op extends ol{constructor(e,{method:t}={}){super(e,{code:op.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}}Object.defineProperty(op,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class of extends ol{constructor(e){super(e,{code:of.code,name:"InvalidParamsRpcError",shortMessage:"Invalid parameters were provided to the RPC method.\nDouble check you have provided the correct parameters."})}}Object.defineProperty(of,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class oh extends ol{constructor(e){super(e,{code:oh.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(oh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class om extends ol{constructor(e){super(e,{code:om.code,name:"InvalidInputRpcError",shortMessage:"Missing or invalid parameters.\nDouble check you have provided the correct parameters."})}}Object.defineProperty(om,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class oy extends ol{constructor(e){super(e,{code:oy.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(oy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class og extends ol{constructor(e){super(e,{code:og.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(og,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class ob extends ol{constructor(e){super(e,{code:ob.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(ob,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class ov extends ol{constructor(e,{method:t}={}){super(e,{code:ov.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not supported.`})}}Object.defineProperty(ov,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class ow extends ol{constructor(e){super(e,{code:ow.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(ow,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class ox extends ol{constructor(e){super(e,{code:ox.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(ox,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class o_ extends ou{constructor(e){super(e,{code:o_.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(o_,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class oE extends ou{constructor(e){super(e,{code:oE.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(oE,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class oI extends ou{constructor(e,{method:t}={}){super(e,{code:oI.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}}Object.defineProperty(oI,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class oT extends ou{constructor(e){super(e,{code:oT.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(oT,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class ok extends ou{constructor(e){super(e,{code:ok.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(ok,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class oP extends ou{constructor(e){super(e,{code:oP.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}function oA(e,{abi:t,address:r,args:n,docsPath:a,functionName:s,sender:i}){let o=e instanceof i3.$S?e:e instanceof i8.C?e.walk(e=>"data"in e)||e.walk():{},{code:l,data:u,details:c,message:d,shortMessage:p}=o,f=e instanceof oi.O?new i3.rR({functionName:s}):[3,oh.code].includes(l)&&(u||c||d||p)?new i3.M({abi:t,data:"object"==typeof u?u.data:u,functionName:s,message:o instanceof oo.J8?c:p??d}):e;return new i3.bG(f,{abi:t,args:n,contractAddress:r,docsPath:a,functionName:s,sender:i})}Object.defineProperty(oP,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});var oS=r(35604);async function oO(e,t){let{abi:r,address:n,args:a,functionName:s,...i}=t,o=(0,i0.p)({abi:r,args:a,functionName:s});try{let{data:t}=await os(e,oS.T,"call")({...i,data:o,to:n});return(0,iQ.e)({abi:r,args:a,functionName:s,data:t||"0x"})}catch(e){throw oA(e,{abi:r,address:n,args:a,docsPath:"/docs/contract/readContract",functionName:s})}}async function o$(e,{blockNumber:t,blockTag:r,coinType:n,name:a,gatewayUrls:s,strict:i,universalResolverAddress:o}){let l=o;if(!l){if(!e.chain)throw Error("client chain not configured. universalResolverAddress is required.");l=(0,i1.M)({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{let i=(0,i0.p)({abi:iX.Rm,functionName:"addr",...null!=n?{args:[on(a),BigInt(n)]}:{args:[on(a)]}}),o={address:l,abi:iX.Ag,functionName:"resolve",args:[(0,i6.nj)(oa(a)),i],blockNumber:t,blockTag:r},u=os(e,oO,"readContract"),c=s?await u({...o,args:[...o.args,s]}):await u(o);if("0x"===c[0])return null;let d=(0,iQ.e)({abi:iX.Rm,args:null!=n?[on(a),BigInt(n)]:void 0,functionName:"addr",data:c[0]});if("0x"===d||"0x00"===(0,i2.B)(d))return null;return d}catch(e){if(i)throw e;if(i4(e,"resolve"))return null;throw e}}class oC extends i8.C{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class oj extends i8.C{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class oN extends i8.C{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class oM extends i8.C{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}let oR=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,oB=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,oF=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,oU=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function oD(e){try{let t=await fetch(e,{method:"HEAD"});if(200===t.status){let e=t.headers.get("content-type");return e?.startsWith("image/")}return!1}catch(t){if("object"==typeof t&&void 0!==t.response||!globalThis.hasOwnProperty("Image"))return!1;return new Promise(t=>{let r=new Image;r.onload=()=>{t(!0)},r.onerror=()=>{t(!1)},r.src=e})}}function oz(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function oq({uri:e,gatewayUrls:t}){let r=oF.test(e);if(r)return{uri:e,isOnChain:!0,isEncoded:r};let n=oz(t?.ipfs,"https://ipfs.io"),a=oz(t?.arweave,"https://arweave.net"),s=e.match(oR),{protocol:i,subpath:o,target:l,subtarget:u=""}=s?.groups||{},c="ipns:/"===i||"ipns/"===o,d="ipfs:/"===i||"ipfs/"===o||oB.test(e);if(e.startsWith("http")&&!c&&!d){let r=e;return t?.arweave&&(r=e.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:r,isOnChain:!1,isEncoded:!1}}if((c||d)&&l)return{uri:`${n}/${c?"ipns":"ipfs"}/${l}${u}`,isOnChain:!1,isEncoded:!1};if("ar:/"===i&&l)return{uri:`${a}/${l}${u||""}`,isOnChain:!1,isEncoded:!1};let p=e.replace(oU,"");if(p.startsWith("<svg")&&(p=`data:image/svg+xml;base64,${btoa(p)}`),p.startsWith("data:")||p.startsWith("{"))return{uri:p,isOnChain:!0,isEncoded:!1};throw new oN({uri:e})}function oL(e){if("object"!=typeof e||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new oC({data:e});return e.image||e.image_url||e.image_data}async function oZ({gatewayUrls:e,uri:t}){try{let r=await fetch(t).then(e=>e.json());return await oV({gatewayUrls:e,uri:oL(r)})}catch{throw new oN({uri:t})}}async function oV({gatewayUrls:e,uri:t}){let{uri:r,isOnChain:n}=oq({uri:t,gatewayUrls:e});if(n||await oD(r))return r;throw new oN({uri:t})}async function oG(e,{nft:t}){if("erc721"===t.namespace)return oO(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if("erc1155"===t.namespace)return oO(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new oM({namespace:t.namespace})}async function oH(e,{gatewayUrls:t,record:r}){return/eip155:/i.test(r)?oK(e,{gatewayUrls:t,record:r}):oV({uri:r,gatewayUrls:t})}async function oK(e,{gatewayUrls:t,record:r}){let n=function(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));let[r,n,a]=t.split("/"),[s,i]=r.split(":"),[o,l]=n.split(":");if(!s||"eip155"!==s.toLowerCase())throw new oj({reason:"Only EIP-155 supported"});if(!i)throw new oj({reason:"Chain ID not found"});if(!l)throw new oj({reason:"Contract address not found"});if(!a)throw new oj({reason:"Token ID not found"});if(!o)throw new oj({reason:"ERC namespace not found"});return{chainID:Number.parseInt(i),namespace:o.toLowerCase(),contractAddress:l,tokenID:a}}(r),{uri:a,isOnChain:s,isEncoded:i}=oq({uri:await oG(e,{nft:n}),gatewayUrls:t});if(s&&(a.includes("data:application/json;base64,")||a.startsWith("{")))return oV({uri:oL(JSON.parse(i?atob(a.replace("data:application/json;base64,","")):a)),gatewayUrls:t});let o=n.tokenID;return"erc1155"===n.namespace&&(o=o.replace("0x","").padStart(64,"0")),oZ({gatewayUrls:t,uri:a.replace(/(?:0x)?{id}/,o)})}async function oW(e,{blockNumber:t,blockTag:r,name:n,key:a,gatewayUrls:s,strict:i,universalResolverAddress:o}){let l=o;if(!l){if(!e.chain)throw Error("client chain not configured. universalResolverAddress is required.");l=(0,i1.M)({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{let i={address:l,abi:iX.Ag,functionName:"resolve",args:[(0,i6.nj)(oa(n)),(0,i0.p)({abi:iX.SJ,functionName:"text",args:[on(n),a]})],blockNumber:t,blockTag:r},o=os(e,oO,"readContract"),u=s?await o({...i,args:[...i.args,s]}):await o(i);if("0x"===u[0])return null;let c=(0,iQ.e)({abi:iX.SJ,functionName:"text",data:u[0]});return""===c?null:c}catch(e){if(i)throw e;if(i4(e,"resolve"))return null;throw e}}async function oJ(e,{blockNumber:t,blockTag:r,assetGatewayUrls:n,name:a,gatewayUrls:s,strict:i,universalResolverAddress:o}){let l=await os(e,oW,"getEnsText")({blockNumber:t,blockTag:r,key:"avatar",name:a,universalResolverAddress:o,gatewayUrls:s,strict:i});if(!l)return null;try{return await oH(e,{record:l,gatewayUrls:n})}catch{return null}}async function oY(e,{address:t,blockNumber:r,blockTag:n,gatewayUrls:a,strict:s,universalResolverAddress:i}){let o=i;if(!o){if(!e.chain)throw Error("client chain not configured. universalResolverAddress is required.");o=(0,i1.M)({blockNumber:r,chain:e.chain,contract:"ensUniversalResolver"})}let l=`${t.toLowerCase().substring(2)}.addr.reverse`;try{let s={address:o,abi:iX.oX,functionName:"reverse",args:[(0,i6.nj)(oa(l))],blockNumber:r,blockTag:n},i=os(e,oO,"readContract"),[u,c]=a?await i({...s,args:[...s.args,a]}):await i(s);if(t.toLowerCase()!==c.toLowerCase())return null;return u}catch(e){if(s)throw e;if(i4(e,"reverse"))return null;throw e}}async function oX(e,{blockNumber:t,blockTag:r,name:n,universalResolverAddress:a}){let s=a;if(!s){if(!e.chain)throw Error("client chain not configured. universalResolverAddress is required.");s=(0,i1.M)({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}let[i]=await os(e,oO,"readContract")({address:s,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[(0,i6.nj)(oa(n))],blockNumber:t,blockTag:r});return i}var oQ=r(52049),o0=r(90580),o1=r(69005),o2=r(25371),o6=r(93154);async function o5(e,t){let{account:r=e.account,blockNumber:n,blockTag:a="latest",blobs:s,data:i,gas:o,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:c,maxPriorityFeePerGas:d,to:p,value:f,...h}=t,m=r?(0,oQ.J)(r):void 0;try{(0,o6.c)(t);let r=n?(0,i6.cK)(n):void 0,y=e.chain?.formatters?.transactionRequest?.format,g=(y||o2.Bv)({...(0,o1.o)(h,{format:y}),from:m?.address,blobs:s,data:i,gas:o,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:c,maxPriorityFeePerGas:d,to:p,value:f}),b=await e.request({method:"eth_createAccessList",params:[g,r||a]});return{accessList:b.accessList,gasUsed:BigInt(b.gasUsed)}}catch(r){throw(0,o0.d)(r,{...t,account:m,chain:e.chain})}}function o8(e,{method:t}){let r={};return"fallback"===e.transport.type&&e.transport.onResponse?.(({method:e,response:n,status:a,transport:s})=>{"success"===a&&t===e&&(r[n]=s.request)}),t=>r[t]||e.request}async function o3(e){let t=o8(e,{method:"eth_newBlockFilter"}),r=await e.request({method:"eth_newBlockFilter"});return{id:r,request:t(r),type:"block"}}class o4 extends i8.C{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}var o9=r(97705),o7=r(67743),le=r(39491),lt=r(28286);let lr="/docs/contract/encodeEventTopics";function ln(e){let{abi:t,eventName:r,args:n}=e,a=t[0];if(r){let e=(0,lt.iY)({abi:t,name:r});if(!e)throw new oi.M_(r,{docsPath:lr});a=e}if("event"!==a.type)throw new oi.M_(void 0,{docsPath:lr});let s=(0,le.B)(a),i=(0,o9.h)(s),o=[];if(n&&"inputs"in a){let e=a.inputs?.filter(e=>"indexed"in e&&e.indexed),t=Array.isArray(n)?n:Object.values(n).length>0?e?.map(e=>n[e.name])??[]:[];t.length>0&&(o=e?.map((e,r)=>Array.isArray(t[r])?t[r].map((n,a)=>la({param:e,value:t[r][a]})):void 0!==t[r]&&null!==t[r]?la({param:e,value:t[r]}):null)??[])}return[i,...o]}function la({param:e,value:t}){if("string"===e.type||"bytes"===e.type)return(0,oe.S)((0,i7.ZJ)(t));if("tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/))throw new o4(e.type);return(0,o7.h)([e],[t])}async function ls(e,t){let{address:r,abi:n,args:a,eventName:s,fromBlock:i,strict:o,toBlock:l}=t,u=o8(e,{method:"eth_newFilter"}),c=s?ln({abi:n,args:a,eventName:s}):void 0,d=await e.request({method:"eth_newFilter",params:[{address:r,fromBlock:"bigint"==typeof i?(0,i6.cK)(i):i,toBlock:"bigint"==typeof l?(0,i6.cK)(l):l,topics:c}]});return{abi:n,args:a,eventName:s,id:d,request:u(d),strict:!!o,type:"event"}}async function li(e,{address:t,args:r,event:n,events:a,fromBlock:s,strict:i,toBlock:o}={}){let l=a??(n?[n]:void 0),u=o8(e,{method:"eth_newFilter"}),c=[];l&&(c=[l.flatMap(e=>ln({abi:[e],eventName:e.name,args:r}))],n&&(c=c[0]));let d=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:"bigint"==typeof s?(0,i6.cK)(s):s,toBlock:"bigint"==typeof o?(0,i6.cK)(o):o,...c.length?{topics:c}:{}}]});return{abi:l,args:r,eventName:n?n.name:void 0,fromBlock:s,id:d,request:u(d),strict:!!i,toBlock:o,type:"event"}}async function lo(e){let t=o8(e,{method:"eth_newPendingTransactionFilter"}),r=await e.request({method:"eth_newPendingTransactionFilter"});return{id:r,request:t(r),type:"transaction"}}var ll=r(53697),lu=r(4719);async function lc({hash:e,signature:t}){let n=(0,ot.q)(e)?e:(0,i6.nj)(e),{secp256k1:a}=await Promise.resolve().then(r.bind(r,54602)),s=(()=>{if("object"==typeof t&&"r"in t&&"s"in t){let{r:e,s:r,v:n,yParity:s}=t,i=ld(Number(s??n));return new a.Signature((0,lu.uU)(e),(0,lu.uU)(r)).addRecoveryBit(i)}let e=(0,ot.q)(t)?t:(0,i6.nj)(t),r=ld((0,lu.ME)(`0x${e.slice(130)}`));return a.Signature.fromCompact(e.substring(2,130)).addRecoveryBit(r)})().recoverPublicKey(n.substring(2)).toHex(!1);return`0x${s}`}function ld(e){if(0===e||1===e)return e;if(27===e)return 0;if(28===e)return 1;throw Error("Invalid yParityOrV value")}async function lp({hash:e,signature:t}){var r=await lc({hash:e,signature:t});let n=(0,oe.S)(`0x${r.substring(4)}`).substring(26);return(0,ll.o)(`0x${n}`)}var lf=r(83534);function lh(e){if(e<256)return 1;if(e<65536)return 2;if(e<0x1000000)return 3;if(e<0x100000000)return 4;throw new i8.C("Length is too large.")}async function lm(e){let{authorization:t,signature:r}=e;return lp({hash:function(e){let{chainId:t,contractAddress:r,nonce:n,to:a}=e,s=(0,oe.S)((0,i9.aP)(["0x05",function(e,t="hex"){let r=function e(t){return Array.isArray(t)?function(e){let t=e.reduce((e,t)=>e+t.length,0),r=lh(t);return{length:t<=55?1+t:1+r+t,encode(n){for(let{encode:a}of(t<=55?n.pushByte(192+t):(n.pushByte(247+r),1===r?n.pushUint8(t):2===r?n.pushUint16(t):3===r?n.pushUint24(t):n.pushUint32(t)),e))a(n)}}}(t.map(t=>e(t))):function(e){let t="string"==typeof e?(0,i7.aT)(e):e,r=lh(t.length);return{length:1===t.length&&t[0]<128?1:t.length<=55?1+t.length:1+r+t.length,encode(e){1===t.length&&t[0]<128||(t.length<=55?e.pushByte(128+t.length):(e.pushByte(183+r),1===r?e.pushUint8(t.length):2===r?e.pushUint16(t.length):3===r?e.pushUint24(t.length):e.pushUint32(t.length))),e.pushBytes(t)}}}(t)}(e),n=(0,lf.l)(new Uint8Array(r.length));return(r.encode(n),"hex"===t)?(0,i6.My)(n.bytes):n.bytes}([t?(0,i6.cK)(t):"0x",r,n?(0,i6.cK)(n):"0x"])]));return"bytes"===a?(0,i7.aT)(s):s}(t),signature:r??t})}var ly=r(97268),lg=r(93490),lb=r(49802);class lv extends i8.C{constructor(e,{account:t,docsPath:r,chain:n,data:a,gas:s,gasPrice:i,maxFeePerGas:o,maxPriorityFeePerGas:l,nonce:u,to:c,value:d}){super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",(0,lb.aO)({from:t?.address,to:c,value:void 0!==d&&`${(0,ly.c)(d)} ${n?.nativeCurrency?.symbol||"ETH"}`,data:a,gas:s,gasPrice:void 0!==i&&`${(0,lg.Q)(i)} gwei`,maxFeePerGas:void 0!==o&&`${(0,lg.Q)(o)} gwei`,maxPriorityFeePerGas:void 0!==l&&`${(0,lg.Q)(l)} gwei`,nonce:u})].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}var lw=r(85408),lx=r(29172),l_=r(90455);class lE extends i8.C{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class lI extends i8.C{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class lT extends i8.C{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${(0,lg.Q)(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class lk extends i8.C{constructor({blockHash:e,blockNumber:t}){let r="Block";e&&(r=`Block at hash "${e}"`),t&&(r=`Block at number "${t}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}let lP={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function lA(e){let t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?(0,lu.ME)(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?(0,lu.ME)(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?lP[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=e.authorizationList.map(e=>({contractAddress:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if("bigint"==typeof t.v){if(0n===t.v||27n===t.v)return 0;if(1n===t.v||28n===t.v)return 1;if(t.v>=35n)return+(t.v%2n===0n)}})(),"legacy"===t.type&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),"eip2930"===t.type&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),"eip1559"===t.type&&delete t.maxFeePerBlobGas,t}function lS(e){let t=(e.transactions??[]).map(e=>"string"==typeof e?e:lA(e));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}async function lO(e,{blockHash:t,blockNumber:r,blockTag:n,includeTransactions:a}={}){let s=a??!1,i=void 0!==r?(0,i6.cK)(r):void 0,o=null;if(!(o=t?await e.request({method:"eth_getBlockByHash",params:[t,s]},{dedupe:!0}):await e.request({method:"eth_getBlockByNumber",params:[i||(n??"latest"),s]},{dedupe:!!i})))throw new lk({blockHash:t,blockNumber:r});return(e.chain?.formatters?.block?.format||lS)(o)}async function l$(e){return BigInt(await e.request({method:"eth_gasPrice"}))}async function lC(e,t){return lj(e,t)}async function lj(e,t){let{block:r,chain:n=e.chain,request:a}=t||{};try{let t=n?.fees?.maxPriorityFeePerGas??n?.fees?.defaultPriorityFee;if("function"==typeof t){let n=r||await os(e,lO,"getBlock")({}),s=await t({block:n,client:e,request:a});if(null===s)throw Error();return s}if(void 0!==t)return t;let s=await e.request({method:"eth_maxPriorityFeePerGas"});return(0,lu.uU)(s)}catch{let[t,n]=await Promise.all([r?Promise.resolve(r):os(e,lO,"getBlock")({}),os(e,l$,"getGasPrice")({})]);if("bigint"!=typeof t.baseFeePerGas)throw new lI;let a=n-t.baseFeePerGas;if(a<0n)return 0n;return a}}async function lN(e,t){return lM(e,t)}async function lM(e,t){let{block:r,chain:n=e.chain,request:a,type:s="eip1559"}=t||{},i=await (async()=>"function"==typeof n?.fees?.baseFeeMultiplier?n.fees.baseFeeMultiplier({block:r,client:e,request:a}):n?.fees?.baseFeeMultiplier??1.2)();if(i<1)throw new lE;let o=i.toString().split(".")[1]?.length??0,l=10**o,u=e=>e*BigInt(Math.ceil(i*l))/BigInt(l),c=r||await os(e,lO,"getBlock")({});if("function"==typeof n?.fees?.estimateFeesPerGas){let t=await n.fees.estimateFeesPerGas({block:r,client:e,multiply:u,request:a,type:s});if(null!==t)return t}if("eip1559"===s){if("bigint"!=typeof c.baseFeePerGas)throw new lI;let t="bigint"==typeof a?.maxPriorityFeePerGas?a.maxPriorityFeePerGas:await lj(e,{block:c,chain:n,request:a}),r=u(c.baseFeePerGas);return{maxFeePerGas:a?.maxFeePerGas??r+t,maxPriorityFeePerGas:t}}return{gasPrice:a?.gasPrice??u(await os(e,l$,"getGasPrice")({}))}}async function lR(e,{address:t,blockTag:r="latest",blockNumber:n}){let a=await e.request({method:"eth_getTransactionCount",params:[t,n?(0,i6.cK)(n):r]},{dedupe:!!n});return(0,lu.ME)(a)}function lB(e){let{kzg:t}=e,r=e.to??("string"==typeof e.blobs[0]?"hex":"bytes"),n="string"==typeof e.blobs[0]?e.blobs.map(e=>(0,i7.aT)(e)):e.blobs,a=[];for(let e of n)a.push(Uint8Array.from(t.blobToKzgCommitment(e)));return"bytes"===r?a:a.map(e=>(0,i6.My)(e))}function lF(e){let{kzg:t}=e,r=e.to??("string"==typeof e.blobs[0]?"hex":"bytes"),n="string"==typeof e.blobs[0]?e.blobs.map(e=>(0,i7.aT)(e)):e.blobs,a="string"==typeof e.commitments[0]?e.commitments.map(e=>(0,i7.aT)(e)):e.commitments,s=[];for(let e=0;e<n.length;e++){let r=n[e],i=a[e];s.push(Uint8Array.from(t.computeBlobKzgProof(r,i)))}return"bytes"===r?s:s.map(e=>(0,i6.My)(e))}var lU=r(69806);function lD(e,t){let r=(0,lU.sc)((0,ot.q)(e,{strict:!1})?(0,i7.ZJ)(e):e);return"bytes"===(t||"hex")?r:(0,i6.nj)(r)}class lz extends i8.C{constructor({maxSize:e,size:t}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${t} bytes`],name:"BlobSizeTooLargeError"})}}class lq extends i8.C{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}i8.C,i8.C;var lL=r(80298);async function lZ(e){let t=await e.request({method:"eth_chainId"},{dedupe:!0});return(0,lu.ME)(t)}let lV=["blobVersionedHashes","chainId","fees","gas","nonce","type"],lG=new Map;async function lH(e,t){let r,n,{account:a=e.account,blobs:s,chain:i,gas:o,kzg:l,nonce:u,nonceManager:c,parameters:d=lV,type:p}=t,f=a?(0,oQ.J)(a):a,h={...t,...f?{from:f?.address}:{}};async function m(){return r||(r=await os(e,lO,"getBlock")({blockTag:"latest"}))}async function y(){return n||(i?i.id:void 0!==t.chainId?t.chainId:n=await os(e,lZ,"getChainId")({}))}if((d.includes("blobVersionedHashes")||d.includes("sidecars"))&&s&&l){let e=lB({blobs:s,kzg:l});if(d.includes("blobVersionedHashes")&&(h.blobVersionedHashes=function(e){let{commitments:t,version:r}=e,n=e.to??("string"==typeof t[0]?"hex":"bytes"),a=[];for(let e of t)a.push(function(e){let{commitment:t,version:r=1}=e,n=e.to??("string"==typeof t?"hex":"bytes"),a=lD(t,"bytes");return a.set([r],0),"bytes"===n?a:(0,i6.My)(a)}({commitment:e,to:n,version:r}));return a}({commitments:e,to:"hex"})),d.includes("sidecars")){let t=lF({blobs:s,commitments:e,kzg:l});h.sidecars=function(e){let{data:t,kzg:r,to:n}=e,a=e.blobs??function(e){let t=e.to??("string"==typeof e.data?"hex":"bytes"),r="string"==typeof e.data?(0,i7.aT)(e.data):e.data,n=(0,lL.E)(r);if(!n)throw new lq;if(n>761855)throw new lz({maxSize:761855,size:n});let a=[],s=!0,i=0;for(;s;){let e=(0,lf.l)(new Uint8Array(131072)),t=0;for(;t<4096;){let n=r.slice(i,i+31);if(e.pushByte(0),e.pushBytes(n),n.length<31){e.pushByte(128),s=!1;break}t++,i+=31}a.push(e)}return"bytes"===t?a.map(e=>e.bytes):a.map(e=>(0,i6.My)(e.bytes))}({data:t,to:n}),s=e.commitments??lB({blobs:a,kzg:r,to:n}),i=e.proofs??lF({blobs:a,commitments:s,kzg:r,to:n}),o=[];for(let e=0;e<a.length;e++)o.push({blob:a[e],commitment:s[e],proof:i[e]});return o}({blobs:s,commitments:e,proofs:t,to:"hex"})}}if(d.includes("chainId")&&(h.chainId=await y()),(d.includes("fees")||d.includes("type"))&&void 0===p)try{h.type=function(e){if(e.type)return e.type;if(void 0!==e.authorizationList)return"eip7702";if(void 0!==e.blobs||void 0!==e.blobVersionedHashes||void 0!==e.maxFeePerBlobGas||void 0!==e.sidecars)return"eip4844";if(void 0!==e.maxFeePerGas||void 0!==e.maxPriorityFeePerGas)return"eip1559";if(void 0!==e.gasPrice)return void 0!==e.accessList?"eip2930":"legacy";throw new lb.Vg({transaction:e})}(h)}catch{let t=lG.get(e.uid);if(void 0===t){let r=await m();t="bigint"==typeof r?.baseFeePerGas,lG.set(e.uid,t)}h.type=t?"eip1559":"legacy"}if(d.includes("fees"))if("legacy"!==h.type&&"eip2930"!==h.type){if(void 0===h.maxFeePerGas||void 0===h.maxPriorityFeePerGas){let r=await m(),{maxFeePerGas:n,maxPriorityFeePerGas:a}=await lM(e,{block:r,chain:i,request:h});if(void 0===t.maxPriorityFeePerGas&&t.maxFeePerGas&&t.maxFeePerGas<a)throw new lT({maxPriorityFeePerGas:a});h.maxPriorityFeePerGas=a,h.maxFeePerGas=n}}else{if(void 0!==t.maxFeePerGas||void 0!==t.maxPriorityFeePerGas)throw new lI;if(void 0===t.gasPrice){let t=await m(),{gasPrice:r}=await lM(e,{block:t,chain:i,request:h,type:"legacy"});h.gasPrice=r}}if(d.includes("gas")&&void 0===o&&(h.gas=await os(e,lW,"estimateGas")({...h,account:f?{address:f.address,type:"json-rpc"}:f})),d.includes("nonce")&&void 0===u&&f)if(c){let t=await y();h.nonce=await c.consume({address:f.address,chainId:t,client:e})}else h.nonce=await os(e,lR,"getTransactionCount")({address:f.address,blockTag:"pending"});return(0,o6.c)(h),delete h.parameters,h}async function lK(e,{address:t,blockNumber:r,blockTag:n="latest"}){let a=r?(0,i6.cK)(r):void 0;return BigInt(await e.request({method:"eth_getBalance",params:[t,a||n]}))}async function lW(e,t){let{account:r=e.account}=t,n=r?(0,oQ.J)(r):void 0;try{let{accessList:r,authorizationList:s,blobs:i,blobVersionedHashes:o,blockNumber:l,blockTag:u,data:c,gas:d,gasPrice:p,maxFeePerBlobGas:f,maxFeePerGas:h,maxPriorityFeePerGas:m,nonce:y,value:g,stateOverride:b,...v}=await lH(e,{...t,parameters:n?.type==="local"?void 0:["blobVersionedHashes"]}),w=(l?(0,i6.cK)(l):void 0)||u,x=(0,l_.yH)(b),_=await (async()=>v.to?v.to:s&&s.length>0?await lm({authorization:s[0]}).catch(()=>{throw new i8.C("`to` is required. Could not infer from `authorizationList`")}):void 0)();(0,o6.c)(t);let E=e.chain?.formatters?.transactionRequest?.format,I=(E||o2.Bv)({...(0,o1.o)(v,{format:E}),from:n?.address,accessList:r,authorizationList:s,blobs:i,blobVersionedHashes:o,data:c,gas:d,gasPrice:p,maxFeePerBlobGas:f,maxFeePerGas:h,maxPriorityFeePerGas:m,nonce:y,to:_,value:g});function a(t){let{block:r,request:n,rpcStateOverride:a}=t;return e.request({method:"eth_estimateGas",params:a?[n,r??"latest",a]:r?[n,r]:[n]})}let T=BigInt(await a({block:w,request:I,rpcStateOverride:x}));if(s){let t=await lK(e,{address:I.from}),r=await Promise.all(s.map(async e=>{let{contractAddress:r}=e,s=await a({block:w,request:{authorizationList:void 0,data:c,from:n?.address,to:r,value:(0,i6.cK)(t)},rpcStateOverride:x}).catch(()=>100000n);return 2n*BigInt(s)}));T+=r.reduce((e,t)=>e+t,0n)}return T}catch(r){throw function(e,{docsPath:t,...r}){return new lv((()=>{let t=(0,lx.l)(e,r);return t instanceof lw.RM?e:t})(),{docsPath:t,...r})}(r,{...t,account:n,chain:e.chain})}}async function lJ(e,t){let{abi:r,address:n,args:a,functionName:s,dataSuffix:i,...o}=t,l=(0,i0.p)({abi:r,args:a,functionName:s});try{return await os(e,lW,"estimateGas")({data:`${l}${i?i.replace("0x",""):""}`,to:n,...o})}catch(t){let e=o.account?(0,oQ.J)(o.account):void 0;throw oA(t,{abi:r,address:n,args:a,docsPath:"/docs/contract/estimateContractGas",functionName:s,sender:e?.address})}}async function lY(e){return BigInt(await e.request({method:"eth_blobBaseFee"}))}let lX=new Map,lQ=new Map;async function l0(e,{cacheKey:t,cacheTime:r=Number.POSITIVE_INFINITY}){let n=function(e){let t=(e,t)=>({clear:()=>t.delete(e),get:()=>t.get(e),set:r=>t.set(e,r)}),r=t(e,lX),n=t(e,lQ);return{clear:()=>{r.clear(),n.clear()},promise:r,response:n}}(t),a=n.response.get();if(a&&r>0&&new Date().getTime()-a.created.getTime()<r)return a.data;let s=n.promise.get();s||(s=e(),n.promise.set(s));try{let e=await s;return n.response.set({created:new Date,data:e}),e}finally{n.promise.clear()}}let l1=e=>`blockNumber.${e}`;async function l2(e,{cacheTime:t=e.cacheTime}={}){return BigInt(await l0(()=>e.request({method:"eth_blockNumber"}),{cacheKey:l1(e.uid),cacheTime:t}))}async function l6(e,{blockHash:t,blockNumber:r,blockTag:n="latest"}={}){let a,s=void 0!==r?(0,i6.cK)(r):void 0;return a=t?await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):await e.request({method:"eth_getBlockTransactionCountByNumber",params:[s||n]},{dedupe:!!s}),(0,lu.ME)(a)}async function l5(e,{address:t,blockNumber:r,blockTag:n="latest"}){let a=void 0!==r?(0,i6.cK)(r):void 0,s=await e.request({method:"eth_getCode",params:[t,a||n]},{dedupe:!!a});if("0x"!==s)return s}var l8=r(81709),l3=r(8486),l4=r(16285);let l9="/docs/contract/decodeEventLog";function l7(e){let{abi:t,data:r,strict:n,topics:a}=e,s=n??!0,[i,...o]=a;if(!i)throw new oi._z({docsPath:l9});let l=1===t.length?t[0]:t.find(e=>"event"===e.type&&i===(0,o9.h)((0,le.B)(e)));if(!(l&&"name"in l)||"event"!==l.type)throw new oi.kE(i,{docsPath:l9});let{name:u,inputs:c}=l,d=c?.some(e=>!("name"in e&&e.name)),p=d?[]:{},f=c.filter(e=>"indexed"in e&&e.indexed);for(let e=0;e<f.length;e++){let t=f[e],r=o[e];if(!r)throw new oi.l3({abiItem:l,param:t});p[d?e:t.name||e]=function({param:e,value:t}){return"string"===e.type||"bytes"===e.type||"tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/)?t:((0,l4.n)([e],t)||[])[0]}({param:t,value:r})}let h=c.filter(e=>!("indexed"in e&&e.indexed));if(h.length>0){if(r&&"0x"!==r)try{let e=(0,l4.n)(h,r);if(e)if(d)p=[...p,...e];else for(let t=0;t<h.length;t++)p[h[t].name]=e[t]}catch(e){if(s){if(e instanceof oi.Iy||e instanceof l3.SK)throw new oi.fo({abiItem:l,data:r,params:h,size:(0,lL.E)(r)});throw e}}else if(s)throw new oi.fo({abiItem:l,data:"0x",params:h,size:0})}return{eventName:u,args:Object.values(p).length>0?p:void 0}}function ue(e){let{abi:t,args:r,logs:n,strict:a=!0}=e,s=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return n.map(e=>{try{let n=t.find(t=>"event"===t.type&&e.topics[0]===(0,o9.h)(t));if(!n)return null;let i=l7({...e,abi:[n],strict:a});if(s&&!s.includes(i.eventName)||!function(e){let{args:t,inputs:r,matchArgs:n}=e;if(!n)return!0;if(!t)return!1;function a(e,t,r){try{if("address"===e.type)return(0,l8.h)(t,r);if("string"===e.type||"bytes"===e.type)return(0,oe.S)((0,i7.ZJ)(t))===r;return t===r}catch{return!1}}return Array.isArray(t)&&Array.isArray(n)?n.every((e,n)=>{if(null==e)return!0;let s=r[n];return!!s&&(Array.isArray(e)?e:[e]).some(e=>a(s,e,t[n]))}):!("object"!=typeof t||Array.isArray(t)||"object"!=typeof n||Array.isArray(n))&&Object.entries(n).every(([e,n])=>{if(null==n)return!0;let s=r.find(t=>t.name===e);return!!s&&(Array.isArray(n)?n:[n]).some(r=>a(s,r,t[e]))})}({args:i.args,inputs:n.inputs,matchArgs:r}))return null;return{...i,...e}}catch(n){let t,r;if(n instanceof oi.kE)return null;if(n instanceof oi.fo||n instanceof oi.l3){if(a)return null;t=n.abiItem.name,r=n.abiItem.inputs?.some(e=>!("name"in e&&e.name))}return{...e,args:r?[]:{},eventName:t}}}).filter(Boolean)}function ut(e,{args:t,eventName:r}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...r?{args:t,eventName:r}:{}}}async function ur(e,{address:t,blockHash:r,fromBlock:n,toBlock:a,event:s,events:i,args:o,strict:l}={}){let u,c=i??(s?[s]:void 0),d=[];c&&(d=[c.flatMap(e=>ln({abi:[e],eventName:e.name,args:i?void 0:o}))],s&&(d=d[0]));let p=(r?await e.request({method:"eth_getLogs",params:[{address:t,topics:d,blockHash:r}]}):await e.request({method:"eth_getLogs",params:[{address:t,topics:d,fromBlock:"bigint"==typeof n?(0,i6.cK)(n):n,toBlock:"bigint"==typeof a?(0,i6.cK)(a):a}]})).map(e=>ut(e));return c?ue({abi:c,args:o,logs:p,strict:l??!1}):p}async function un(e,t){let{abi:r,address:n,args:a,blockHash:s,eventName:i,fromBlock:o,toBlock:l,strict:u}=t,c=i?(0,lt.iY)({abi:r,name:i}):void 0,d=c?void 0:r.filter(e=>"event"===e.type);return os(e,ur,"getLogs")({address:n,args:a,blockHash:s,event:c,events:d,fromBlock:o,toBlock:l,strict:u})}class ua extends i8.C{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function us(e,t){let{address:r,factory:n,factoryData:a}=t;try{let[t,s,i,o,l,u,c]=await os(e,oO,"readContract")({abi:ui,address:r,functionName:"eip712Domain",factory:n,factoryData:a});return{domain:{name:s,version:i,chainId:Number(o),verifyingContract:l,salt:u},extensions:c,fields:t}}catch(e){if("ContractFunctionExecutionError"===e.name&&"ContractFunctionZeroDataError"===e.cause.name)throw new ua({address:r});throw e}}let ui=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];async function uo(e,{blockCount:t,blockNumber:r,blockTag:n="latest",rewardPercentiles:a}){var s;let i=r?(0,i6.cK)(r):void 0;return{baseFeePerGas:(s=await e.request({method:"eth_feeHistory",params:[(0,i6.cK)(t),i||n,a]},{dedupe:!!i})).baseFeePerGas.map(e=>BigInt(e)),gasUsedRatio:s.gasUsedRatio,oldestBlock:BigInt(s.oldestBlock),reward:s.reward?.map(e=>e.map(e=>BigInt(e)))}}async function ul(e,{filter:t}){let r="strict"in t&&t.strict,n=await t.request({method:"eth_getFilterChanges",params:[t.id]});if("string"==typeof n[0])return n;let a=n.map(e=>ut(e));return"abi"in t&&t.abi?ue({abi:t.abi,logs:a,strict:r}):a}async function uu(e,{filter:t}){let r=t.strict??!1,n=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(e=>ut(e));return t.abi?ue({abi:t.abi,logs:n,strict:r}):n}async function uc(e,{address:t,blockNumber:r,blockTag:n,storageKeys:a}){let s=void 0!==r?(0,i6.cK)(r):void 0;var i=await e.request({method:"eth_getProof",params:[t,a,s||(n??"latest")]});return{...i,balance:i.balance?BigInt(i.balance):void 0,nonce:i.nonce?(0,lu.ME)(i.nonce):void 0,storageProof:i.storageProof?i.storageProof.map(e=>({...e,value:BigInt(e.value)})):void 0}}async function ud(e,{address:t,blockNumber:r,blockTag:n="latest",slot:a}){let s=void 0!==r?(0,i6.cK)(r):void 0;return await e.request({method:"eth_getStorageAt",params:[t,a,s||n]})}async function up(e,{blockHash:t,blockNumber:r,blockTag:n,hash:a,index:s}){let i=n||"latest",o=void 0!==r?(0,i6.cK)(r):void 0,l=null;if(a?l=await e.request({method:"eth_getTransactionByHash",params:[a]},{dedupe:!0}):t?l=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,(0,i6.cK)(s)]},{dedupe:!0}):(o||i)&&(l=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[o||i,(0,i6.cK)(s)]},{dedupe:!!o})),!l)throw new lb.Kz({blockHash:t,blockNumber:r,blockTag:i,hash:a,index:s});return(e.chain?.formatters?.transaction?.format||lA)(l)}async function uf(e,{hash:t,transactionReceipt:r}){let[n,a]=await Promise.all([os(e,l2,"getBlockNumber")({}),t?os(e,up,"getTransaction")({hash:t}):void 0]),s=r?.blockNumber||a?.blockNumber;return s?n-s+1n:0n}let uh={"0x0":"reverted","0x1":"success"};async function um(e,{hash:t}){let r=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!r)throw new lb.Kc({hash:t});return(e.chain?.formatters?.transactionReceipt?.format||function(e){let t={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(e=>ut(e)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?(0,lu.ME)(e.transactionIndex):null,status:e.status?uh[e.status]:null,type:e.type?lP[e.type]||e.type:null};return e.blobGasPrice&&(t.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(t.blobGasUsed=BigInt(e.blobGasUsed)),t})(r)}async function uy(e,t){let{allowFailure:r=!0,batchSize:n,blockNumber:a,blockTag:s,multicallAddress:i,stateOverride:o}=t,l=t.contracts,u=n??("object"==typeof e.batch?.multicall&&e.batch.multicall.batchSize||1024),c=i;if(!c){if(!e.chain)throw Error("client chain not configured. multicallAddress is required.");c=(0,i1.M)({blockNumber:a,chain:e.chain,contract:"multicall3"})}let d=[[]],p=0,f=0;for(let e=0;e<l.length;e++){let{abi:t,address:n,args:a,functionName:s}=l[e];try{let e=(0,i0.p)({abi:t,args:a,functionName:s});f+=(e.length-2)/2,u>0&&f>u&&d[p].length>0&&(p++,f=(e.length-2)/2,d[p]=[]),d[p]=[...d[p],{allowFailure:!0,callData:e,target:n}]}catch(i){let e=oA(i,{abi:t,address:n,args:a,docsPath:"/docs/contract/multicall",functionName:s});if(!r)throw e;d[p]=[...d[p],{allowFailure:!0,callData:"0x",target:n}]}}let h=await Promise.allSettled(d.map(t=>os(e,oO,"readContract")({abi:iX.v2,address:c,args:[t],blockNumber:a,blockTag:s,functionName:"aggregate3",stateOverride:o}))),m=[];for(let e=0;e<h.length;e++){let t=h[e];if("rejected"===t.status){if(!r)throw t.reason;for(let r=0;r<d[e].length;r++)m.push({status:"failure",error:t.reason,result:void 0});continue}let n=t.value;for(let t=0;t<n.length;t++){let{returnData:a,success:s}=n[t],{callData:i}=d[e][t],{abi:o,address:u,functionName:c,args:p}=l[m.length];try{if("0x"===i)throw new oi.O;if(!s)throw new i3.$S({data:a});let e=(0,iQ.e)({abi:o,args:p,data:a,functionName:c});m.push(r?{result:e,status:"success"}:e)}catch(t){let e=oA(t,{abi:o,address:u,args:p,docsPath:"/docs/contract/multicall",functionName:c});if(!r)throw e;m.push({error:e,result:void 0,status:"failure"})}}}if(m.length!==l.length)throw new i8.C("multicall results mismatch");return m}class ug extends Error{constructor(e,t={}){let r=(()=>{if(t.cause instanceof ug){if(t.cause.details)return t.cause.details;if(t.cause.shortMessage)return t.cause.shortMessage}return t.cause?.message?t.cause.message:t.details})(),n=t.cause instanceof ug&&t.cause.docsPath||t.docsPath,a=`https://oxlib.sh${n??""}`;super([e||"An error occurred.",...t.metaMessages?["",...t.metaMessages]:[],...r||n?["",r?`Details: ${r}`:void 0,n?`See: ${a}`:void 0]:[]].filter(e=>"string"==typeof e).join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"ox@0.1.1"}),this.cause=t.cause,this.details=r,this.docs=a,this.docsPath=n,this.shortMessage=e}walk(e){return function e(t,r){return r?.(t)?t:t&&"object"==typeof t&&"cause"in t&&t.cause?e(t.cause,r):r?null:t}(this,e)}}function ub(e,t,r){return JSON.stringify(e,(e,r)=>"function"==typeof t?t(e,r):"bigint"==typeof r?r.toString()+"#__bigint":r,r)}function uv(e,t){if(u$(e)>t)throw new uM({givenSize:u$(e),maxSize:t})}function uw(e,t={}){let{dir:r,size:n=32}=t;if(0===n)return e;let a=e.replace("0x","");if(a.length>2*n)throw new uB({size:Math.ceil(a.length/2),targetSize:n,type:"Hex"});return`0x${a["right"===r?"padEnd":"padStart"](2*n,"0")}`}let ux=new TextEncoder,u_=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function uE(...e){return`0x${e.reduce((e,t)=>e+t.replace("0x",""),"")}`}function uI(e,t={}){let r=`0x${Number(e)}`;return"number"==typeof t.size?(uv(r,t.size),uA(r,t.size)):r}function uT(e,t={}){let r="";for(let t=0;t<e.length;t++)r+=u_[e[t]];let n=`0x${r}`;return"number"==typeof t.size?(uv(n,t.size),uS(n,t.size)):n}function uk(e,t={}){let r,{signed:n,size:a}=t,s=BigInt(e);a?r=n?(1n<<8n*BigInt(a)-1n)-1n:2n**(8n*BigInt(a))-1n:"number"==typeof e&&(r=BigInt(Number.MAX_SAFE_INTEGER));let i="bigint"==typeof r&&n?-r-1n:0;if(r&&s>r||s<i){let t="bigint"==typeof e?"n":"";throw new uC({max:r?`${r}${t}`:void 0,min:`${i}${t}`,signed:n,size:a,value:`${e}${t}`})}let o=(n&&s<0?(1n<<BigInt(8*a))+BigInt(s):s).toString(16),l=`0x${o}`;return a?uA(l,a):l}function uP(e,t={}){return uT(ux.encode(e),t)}function uA(e,t){return uw(e,{dir:"left",size:t})}function uS(e,t){return uw(e,{dir:"right",size:t})}function uO(e,t,r,n={}){let{strict:a}=n;if("number"==typeof t&&t>0&&t>u$(e)-1)throw new uR({offset:t,position:"start",size:u$(e)});let s=`0x${e.replace("0x","").slice((t??0)*2,(r??e.length)*2)}`;return a&&function(e,t,r){if("number"==typeof t&&"number"==typeof r&&u$(e)!==r-t)throw new uR({offset:r,position:"end",size:u$(e)})}(s,t,r),s}function u$(e){return Math.ceil((e.length-2)/2)}class uC extends ug{constructor({max:e,min:t,signed:r,size:n,value:a}){super(`Number \`${a}\` is not in safe${n?` ${8*n}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${t}\` to \`${e}\`)`:`(above \`${t}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class uj extends ug{constructor(e){super(`Value \`${"object"==typeof e?ub(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class uN extends ug{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class uM extends ug{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class uR extends ug{constructor({offset:e,position:t,size:r}){super(`Slice ${"start"===t?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class uB extends ug{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function uF(e){return{address:e.address,amount:uk(e.amount),index:uk(e.index),validatorIndex:uk(e.validatorIndex)}}async function uU(e,t){let{blockNumber:r,blockTag:n="latest",blocks:a,returnFullTransactions:s,traceTransfers:i,validation:o}=t;try{let t=[];for(let e of a){var l;let r=e.blockOverrides?(l=e.blockOverrides,{..."bigint"==typeof l.baseFeePerGas&&{baseFeePerGas:uk(l.baseFeePerGas)},..."bigint"==typeof l.blobBaseFee&&{blobBaseFee:uk(l.blobBaseFee)},..."string"==typeof l.feeRecipient&&{feeRecipient:l.feeRecipient},..."bigint"==typeof l.gasLimit&&{gasLimit:uk(l.gasLimit)},..."bigint"==typeof l.number&&{number:uk(l.number)},..."bigint"==typeof l.prevRandao&&{prevRandao:uk(l.prevRandao)},..."bigint"==typeof l.time&&{time:uk(l.time)},...l.withdrawals&&{withdrawals:l.withdrawals.map(uF)}}):void 0,n=e.calls.map(e=>{let t=e.account?(0,oQ.J)(e.account):void 0,r={...e,data:e.abi?(0,i0.p)(e):e.data,from:e.from??t?.address};return(0,o6.c)(r),(0,o2.Bv)(r)}),a=e.stateOverrides?(0,l_.yH)(e.stateOverrides):void 0;t.push({blockOverrides:r,calls:n,stateOverrides:a})}let u=r?(0,i6.cK)(r):void 0;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:t,returnFullTransactions:s,traceTransfers:i,validation:o},u||n]})).map((e,t)=>({...lS(e),calls:e.calls.map((e,r)=>{let{abi:n,args:s,functionName:i,to:o}=a[t].calls[r],l=e.error?.data??e.returnData,u=BigInt(e.gasUsed),c=e.logs?.map(e=>ut(e)),d="0x1"===e.status?"success":"failure",p=n&&"success"===d?(0,iQ.e)({abi:n,data:l,functionName:i}):null,f=(()=>{let t;if("success"!==d&&(e.error?.data==="0x"?t=new oi.O:e.error&&(t=new i3.$S(e.error)),t))return oA(t,{abi:n??[],address:o,args:s,functionName:i??"<unknown>"})})();return{data:l,gasUsed:u,logs:c,status:d,..."success"===d?{result:p}:{error:f}}})}))}catch(t){let e=(0,lx.l)(t,{});if(e instanceof lw.RM)throw t;throw e}}var uD=r(33069),uz=r(21314),uq=r(3657),uL=r(6528),uZ=r(45614);function uV(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function uG(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function uH(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}let uK=BigInt(0x100000000-1),uW=BigInt(32),uJ=(e,t,r)=>e<<r|t>>>32-r,uY=(e,t,r)=>t<<r|e>>>32-r,uX=(e,t,r)=>t<<r-32|e>>>64-r,uQ=(e,t,r)=>e<<r-32|t>>>64-r,u0=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0];function u1(e){for(let r=0;r<e.length;r++){var t;e[r]=(t=e[r])<<24&0xff000000|t<<8&0xff0000|t>>>8&65280|t>>>24&255}}"function"==typeof Uint8Array.from([]).toHex&&Uint8Array.fromHex,(e,t)=>t.toString(16).padStart(2,"0");let u2={_0:48,_9:57,A:65,F:70,a:97,f:102};function u6(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(e)),uG(e),e}class u5{clone(){return this._cloneInto()}}let u8=[],u3=[],u4=[],u9=BigInt(0),u7=BigInt(1),ce=BigInt(2),ct=BigInt(7),cr=BigInt(256),cn=BigInt(113);for(let e=0,t=u7,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],u8.push(2*(5*n+r)),u3.push((e+1)*(e+2)/2%64);let a=u9;for(let e=0;e<7;e++)(t=(t<<u7^(t>>ct)*cn)%cr)&ce&&(a^=u7<<(u7<<BigInt(e))-u7);u4.push(a)}let[ca,cs]=function(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let a=0;a<e.length;a++){let{h:s,l:i}=function(e,t=!1){return t?{h:Number(e&uK),l:Number(e>>uW&uK)}:{h:0|Number(e>>uW&uK),l:0|Number(e&uK)}}(e[a],t);[r[a],n[a]]=[s,i]}return[r,n]}(u4,!0),ci=(e,t,r)=>r>32?uX(e,t,r):uJ(e,t,r),co=(e,t,r)=>r>32?uQ(e,t,r):uY(e,t,r);class cl extends u5{constructor(e,t,r,n=!1,a=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=a,uV(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}(this.state)}keccak(){u0||u1(this.state32),function(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,a=(t+2)%10,s=r[a],i=r[a+1],o=ci(s,i,1)^r[n],l=co(s,i,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=o,e[t+r+1]^=l}let t=e[2],a=e[3];for(let r=0;r<24;r++){let n=u3[r],s=ci(t,a,n),i=co(t,a,n),o=u8[r];t=e[o],a=e[o+1],e[o]=s,e[o+1]=i}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=ca[n],e[1]^=cs[n]}r.fill(0)}(this.state32,this.rounds),u0||u1(this.state32),this.posOut=0,this.pos=0}update(e){uH(this);let{blockLen:t,state:r}=this,n=(e=u6(e)).length;for(let a=0;a<n;){let s=Math.min(t-this.pos,n-a);for(let t=0;t<s;t++)r[this.pos++]^=e[a++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,(128&t)!=0&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){uH(this,!1),uG(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,a=e.length;n<a;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,a-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return uV(e),this.xofInto(new Uint8Array(e))}digestInto(e){uG(e);let t=this.outputLen;if(e.length<t)throw Error("digestInto() expects output buffer of length at least "+t);if(this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:a,enableXOF:s}=this;return e||(e=new cl(t,r,n,s,a)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=a,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}let cu=function(e){let t=t=>e().update(u6(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}(()=>new cl(136,1,32)),cc={zero:48,nine:57,A:65,F:70,a:97,f:102};function cd(e){return e>=cc.zero&&e<=cc.nine?e-cc.zero:e>=cc.A&&e<=cc.F?e-(cc.A-10):e>=cc.a&&e<=cc.f?e-(cc.a-10):void 0}let cp=new TextEncoder;class cf extends ug{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class ch extends ug{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}function cm(e,t={}){var r;let{as:n="string"==typeof e?"Hex":"Bytes"}=t,a=cu(e instanceof Uint8Array?e:"string"==typeof e?function(e,t={}){let{size:r}=t,n=e;r&&(uv(e,r),n=uS(e,r));let a=n.slice(2);a.length%2&&(a=`0${a}`);let s=a.length/2,i=new Uint8Array(s);for(let e=0,t=0;e<s;e++){let r=cd(a.charCodeAt(t++)),n=cd(a.charCodeAt(t++));if(void 0===r||void 0===n)throw new ug(`Invalid byte sequence ("${a[t-2]}${a[t-1]}" in "${a}").`);i[e]=16*r+n}return i}(e):(r=e)instanceof Uint8Array?r:new Uint8Array(r));return"Bytes"===n?a:uT(a)}class cy extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let e=this.keys().next().value;e&&this.delete(e)}return this}}let cg={checksum:new cy(8192)}.checksum,cb=/^0x[a-fA-F0-9]{40}$/;function cv(e,t={}){let{strict:r=!0}=t;if(!cb.test(e))throw new cx({address:e,cause:new c_});if(r){if(e.toLowerCase()===e)return;if(function(e){if(cg.has(e))return cg.get(e);cv(e,{strict:!1});let t=e.substring(2).toLowerCase(),r=cm(function(e,t={}){let{size:r}=t,n=cp.encode(e);if("number"==typeof r){var a;if(n.length>r)throw new cf({givenSize:n.length,maxSize:r});return a=n,function(e,t={}){let{dir:r,size:n=32}=t;if(0===n)return e;if(e.length>n)throw new ch({size:e.length,targetSize:n,type:"Bytes"});let a=new Uint8Array(n);for(let t=0;t<n;t++){let s="right"===r;a[s?t:n-t-1]=e[s?t:e.length-t-1]}return a}(a,{dir:"right",size:r})}return n}(t),{as:"Bytes"}),n=t.split("");for(let e=0;e<40;e+=2)r[e>>1]>>4>=8&&n[e]&&(n[e]=n[e].toUpperCase()),(15&r[e>>1])>=8&&n[e+1]&&(n[e+1]=n[e+1].toUpperCase());let a=`0x${n.join("")}`;return cg.set(e,a),a}(e)!==e)throw new cx({address:e,cause:new cE})}}function cw(e,t={}){let{strict:r=!0}=t??{};try{return cv(e,{strict:r}),!0}catch{return!1}}class cx extends ug{constructor({address:e,cause:t}){super(`Address "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class c_ extends ug{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class cE extends ug{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function cI(e){let t=!0,r="",n=0,a="",s=!1;for(let i=0;i<e.length;i++){let o=e[i];if(["(",")",","].includes(o)&&(t=!0),"("===o&&n++,")"===o&&n--,t){if(0===n){if(" "===o&&["event","function","error",""].includes(a))a="";else if(a+=o,")"===o){s=!0;break}continue}if(" "===o){","!==e[i-1]&&","!==r&&",("!==r&&(r="",t=!1);continue}a+=o,r+=o}}if(!s)throw new ug("Unable to normalize signature.");return a}function cT(e,t={}){let{prepare:r=!0}=t,n=Array.isArray(e)||"string"==typeof e?function(e){let t;if("string"==typeof e)t=(0,uL.uT)(e);else{let r=(0,uq.e)(e),n=e.length;for(let a=0;a<n;a++){let n=e[a];if(!(0,uz.WL)(n)){t=(0,uL.uT)(n,r);break}}}if(!t)throw new uD.xo({signature:e});return t}(e):e;return{...n,...r?{hash:cP(n)}:{}}}function ck(e){return uO(cP(e),0,4)}function cP(e){return"string"!=typeof e&&"hash"in e&&e.hash?e.hash:cm(uP(cI("string"==typeof e?e:uZ.B(e))))}class cA extends ug{constructor(e,t){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${cI(uZ.B(e.abiItem))}\`, and`,`\`${t.type}\` in \`${cI(uZ.B(t.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class cS extends ug{constructor({name:e,data:t,type:r="item"}){super(`ABI ${r}${e?` with name "${e}"`:t?` with data "${t}"`:""} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}var cO=r(56228);let c$=/^(.*)\[([0-9]*)\]$/,cC=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,cj=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function cN(e){let t=0;for(let r=0;r<e.length;r++){let{dynamic:n,encoded:a}=e[r];n?t+=32:t+=u$(a)}let r=[],n=[],a=0;for(let s=0;s<e.length;s++){let{dynamic:i,encoded:o}=e[s];i?(r.push(uk(t+a,{size:32})),n.push(o),a+=u$(o)):r.push(o)}return uE(...r,...n)}function cM(e){let t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function cR(e){let{type:t}=e;if("string"===t||"bytes"===t||t.endsWith("[]"))return!0;if("tuple"===t)return e.components?.some(cR);let r=cM(e.type);return!!(r&&cR({...e,type:r[1]}))}function cB(e,t,r){let{checksumAddress:n=!1}=r??{};if(e.length!==t.length)throw new cz({expectedLength:e.length,givenLength:t.length});let a=cN(function({checksumAddress:e,parameters:t,values:r}){let n=[];for(let a=0;a<t.length;a++)n.push(function e({checksumAddress:t=!1,parameter:r,value:n}){let a=cM(r.type);if(a){let[s,i]=a;return function(t,r){let{checksumAddress:n,length:a,parameter:s}=r,i=null===a;if(!Array.isArray(t))throw new cq(t);if(!i&&t.length!==a)throw new cU({expectedLength:a,givenLength:t.length,type:`${s.type}[${a}]`});let o=!1,l=[];for(let r=0;r<t.length;r++){let a=e({checksumAddress:n,parameter:s,value:t[r]});a.dynamic&&(o=!0),l.push(a)}if(i||o){let e=cN(l);if(i){let t=uk(l.length,{size:32});return{dynamic:!0,encoded:l.length>0?uE(t,e):t}}if(o)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:uE(...l.map(({encoded:e})=>e))}}(n,{checksumAddress:t,length:s,parameter:{...r,type:i}})}if("tuple"===r.type)return function(t,r){let{checksumAddress:n,parameter:a}=r,s=!1,i=[];for(let r=0;r<a.components.length;r++){let o=a.components[r],l=Array.isArray(t)?r:o.name,u=e({checksumAddress:n,parameter:o,value:t[l]});i.push(u),u.dynamic&&(s=!0)}return{dynamic:s,encoded:s?cN(i):uE(...i.map(({encoded:e})=>e))}}(n,{checksumAddress:t,parameter:r});if("address"===r.type){var s=n,i={checksum:t};let{checksum:e=!1}=i;return cv(s,{strict:e}),{dynamic:!1,encoded:uA(s.toLowerCase())}}if("bool"===r.type){var o=n;if("boolean"!=typeof o)throw new ug(`Invalid boolean value: "${o}" (type: ${typeof o}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:uA(uI(o))}}if(r.type.startsWith("uint")||r.type.startsWith("int")){let e=r.type.startsWith("int"),[,,t="256"]=cj.exec(r.type)??[];return function(e,{signed:t,size:r}){if("number"==typeof r){let n=2n**(BigInt(r)-(t?1n:0n))-1n,a=t?-n-1n:0n;if(e>n||e<a)throw new uC({max:n.toString(),min:a.toString(),signed:t,size:r/8,value:e.toString()})}return{dynamic:!1,encoded:uk(e,{size:32,signed:t})}}(n,{signed:e,size:Number(t)})}if(r.type.startsWith("bytes"))return function(e,{type:t}){let[,r]=t.split("bytes"),n=u$(e);if(!r){let t=e;return n%32!=0&&(t=uS(t,32*Math.ceil((e.length-2)/2/32))),{dynamic:!0,encoded:uE(uA(uk(n,{size:32})),t)}}if(n!==Number.parseInt(r))throw new cD({expectedSize:Number.parseInt(r),value:e});return{dynamic:!1,encoded:uS(e)}}(n,{type:r.type});if("string"===r.type){var l=n;let e=uP(l),t=Math.ceil(u$(e)/32),r=[];for(let n=0;n<t;n++)r.push(uS(uO(e,32*n,(n+1)*32)));return{dynamic:!0,encoded:uE(uS(uk(u$(e),{size:32})),...r)}}throw new cL(r.type)}({checksumAddress:e,parameter:t[a],value:r[a]}));return n}({checksumAddress:n,parameters:e,values:t}));return 0===a.length?"0x":a}function cF(e,t){if(e.length!==t.length)throw new cz({expectedLength:e.length,givenLength:t.length});let r=[];for(let n=0;n<e.length;n++){let a=e[n],s=t[n];r.push(cF.encode(a,s))}return uE(...r)}(cF||(cF={})).encode=function e(t,r,n=!1){if("address"===t)return cv(r),uA(r.toLowerCase(),32*!!n);if("string"===t)return uP(r);if("bytes"===t)return r;if("bool"===t)return uA(uI(r),n?32:1);let a=t.match(cj);if(a){let[e,t,s="256"]=a,i=Number.parseInt(s)/8;return uk(r,{size:n?32:i,signed:"int"===t})}let s=t.match(cC);if(s){let[e,t]=s;if(Number.parseInt(t)!==(r.length-2)/2)throw new cD({expectedSize:Number.parseInt(t),value:r});return uS(r,32*!!n)}let i=t.match(c$);if(i&&Array.isArray(r)){let[t,n]=i,a=[];for(let t=0;t<r.length;t++)a.push(e(n,r[t],!0));return 0===a.length?"0x":uE(...a)}throw new cL(t)};class cU extends ug{constructor({expectedLength:e,givenLength:t,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${t}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class cD extends ug{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${u$(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class cz extends ug{constructor({expectedLength:e,givenLength:t}){super(`ABI encoding parameters/values length mismatch.
Expected length (parameters): ${e}
Given length (values): ${t}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class cq extends ug{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class cL extends ug{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function cZ(e,t={}){return cT(e,t)}let cV="0x0000000000000000000000000000000000000000";var cG=r(97185);async function cH(e,t){let{blockNumber:r,blockTag:n,calls:a,stateOverrides:s,traceAssetChanges:i,traceTransfers:o,validation:l}=t,u=t.account?(0,oQ.J)(t.account):void 0;if(i&&!u)throw new i8.C("`account` is required when `traceAssetChanges` is true");let c=u?function(e,t){let{bytecode:r,args:n}=t;return uE(r,e.inputs?.length&&n?.length?cB(e.inputs,n):"0x")}(cT("constructor(bytes, bytes)"),{bytecode:cG.LX,args:["0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033",function(e,...t){let{overloads:r}=e,n=r?function(e,t,r){let n=function(e,t,r){let n,{args:a=[],prepare:s=!0}=r??{},i=function(e,t={}){let{strict:r=!1}=t;try{return!function(e,t={}){let{strict:r=!1}=t;if(!e||"string"!=typeof e)throw new uj(e);if(r&&!/^0x[0-9a-fA-F]*$/.test(e)||!e.startsWith("0x"))throw new uN(e)}(e,{strict:r}),!0}catch{return!1}}(t,{strict:!1}),o=e.filter(e=>i?"function"===e.type||"error"===e.type?ck(e)===uO(t,0,4):"event"===e.type&&cP(e)===t:"name"in e&&e.name===t);if(0===o.length)throw new cS({name:t});if(1===o.length)return{...o[0],...s?{hash:cP(o[0])}:{}};for(let e of o){if("inputs"in e){if(!a||0===a.length){if(!e.inputs||0===e.inputs.length)return{...e,...s?{hash:cP(e)}:{}};continue}if(e.inputs&&0!==e.inputs.length&&e.inputs.length===a.length&&a.every((t,r)=>{let n="inputs"in e&&e.inputs[r];return!!n&&function e(t,r){let n=typeof t,a=r.type;switch(a){case"address":return cw(t,{strict:!1});case"bool":return"boolean"===n;case"function":case"string":return"string"===n;default:if("tuple"===a&&"components"in r)return Object.values(r.components).every((r,n)=>e(Object.values(t)[n],r));if(/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(a))return"number"===n||"bigint"===n;if(/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(a))return"string"===n||t instanceof Uint8Array;if(/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(a))return Array.isArray(t)&&t.every(t=>e(t,{...r,type:a.replace(/(\[[0-9]{0,}\])$/,"")}));return!1}}(t,n)})){if(n&&"inputs"in n&&n.inputs){let t=function e(t,r,n){for(let a in t){let s=t[a],i=r[a];if("tuple"===s.type&&"tuple"===i.type&&"components"in s&&"components"in i)return e(s.components,i.components,n[a]);let o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")||(o.includes("address")&&o.includes("string")||o.includes("address")&&o.includes("bytes"))&&cw(n[a],{strict:!1}))return o}}(e.inputs,n.inputs,a);if(t)throw new cA({abiItem:e,type:t[0]},{abiItem:n,type:t[1]})}n=e}}}let l=(()=>{if(n)return n;let[e,...t]=o;return{...e,overloads:t}})();if(!l)throw new cS({name:t});return{...l,...s?{hash:cP(l)}:{}}}(e,t,r);if("function"!==n.type)throw new cS({name:t,type:"function"});return n}([e,...r],e.name,{args:t[0]}):e,a=ck(n),s=t.length>0?cB(n.inputs,t[0]):void 0;return s?uE(a,s):a}(cZ("function getBalance(address)"),[u.address])]}):void 0,d=i?await Promise.all(t.calls.map(async t=>{if(!t.data&&!t.abi)return;let{accessList:r}=await o5(e,{account:u.address,...t,data:t.abi?(0,i0.p)(t):t.data});return r.map(({address:e,storageKeys:t})=>t.length>0?e:null)})).then(e=>e.flat().filter(Boolean)):[],p=s?.map(e=>e.address===u?.address?{...e,nonce:0}:e),f=await uU(e,{blockNumber:r,blockTag:n,blocks:[...i?[{calls:[{data:c}],stateOverrides:s},{calls:d.map((e,t)=>({abi:[cZ("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:e,from:cV,nonce:t})),stateOverrides:[{address:cV,nonce:0}]}]:[],{calls:[...a,{}].map((e,t)=>({...e,from:u?.address,nonce:t})),stateOverrides:p},...i?[{calls:[{data:c}]},{calls:d.map((e,t)=>({abi:[cZ("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:e,from:cV,nonce:t})),stateOverrides:[{address:cV,nonce:0}]},{calls:d.map((e,t)=>({to:e,abi:[cZ("function decimals() returns (uint256)")],functionName:"decimals",from:cV,nonce:t})),stateOverrides:[{address:cV,nonce:0}]},{calls:d.map((e,t)=>({to:e,abi:[cZ("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:cV,nonce:t})),stateOverrides:[{address:cV,nonce:0}]},{calls:d.map((e,t)=>({to:e,abi:[cZ("function symbol() returns (string)")],functionName:"symbol",from:cV,nonce:t})),stateOverrides:[{address:cV,nonce:0}]}]:[]],traceTransfers:o,validation:l}),h=i?f[2]:f[0],[m,y,,g,b,v,w,x]=i?f:[],{calls:_,...E}=h,I=_.slice(0,-1)??[],T=[...m?.calls??[],...y?.calls??[]].map(e=>"success"===e.status?(0,lu.uU)(e.data):null),k=[...g?.calls??[],...b?.calls??[]].map(e=>"success"===e.status?(0,lu.uU)(e.data):null),P=(v?.calls??[]).map(e=>"success"===e.status?e.result:null),A=(x?.calls??[]).map(e=>"success"===e.status?e.result:null),S=(w?.calls??[]).map(e=>"success"===e.status?e.result:null),O=[];for(let[e,t]of k.entries()){let r=T[e];if("bigint"!=typeof t||"bigint"!=typeof r)continue;let n=P[e-1],a=A[e-1],s=S[e-1],i=0===e?{address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",decimals:18,symbol:"ETH"}:{address:d[e-1],decimals:s||n?Number(n??1):void 0,symbol:a??void 0};O.some(e=>e.token.address===i.address)||O.push({token:i,value:{pre:r,post:t,diff:t-r}})}return{assetChanges:O,block:E,results:I}}async function cK(e,t){let{abi:r,address:n,args:a,dataSuffix:s,functionName:i,...o}=t,l=o.account?(0,oQ.J)(o.account):e.account,u=(0,i0.p)({abi:r,args:a,functionName:i});try{let{data:c}=await os(e,oS.T,"call")({batch:!1,data:`${u}${s?s.replace("0x",""):""}`,to:n,...o,account:l}),d=(0,iQ.e)({abi:r,args:a,functionName:i,data:c||"0x"}),p=r.filter(e=>"name"in e&&e.name===t.functionName);return{result:d,request:{abi:p,address:n,args:a,dataSuffix:s,functionName:i,...o,account:l}}}catch(e){throw oA(e,{abi:r,address:n,args:a,docsPath:"/docs/contract/simulateContract",functionName:i,sender:l?.address})}}async function cW(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function cJ(e,t){return(0,oe.S)(function(e){let t="string"==typeof e?(0,i6.i3)(e):"string"==typeof e.raw?e.raw:(0,i6.My)(e.raw),r=(0,i6.i3)(`\x19Ethereum Signed Message:
${(0,lL.E)(t)}`);return(0,i9.xW)([r,t])}(e),t)}var cY=r(24278);let cX="0x6492649264926492649264926492649264926492649264926492649264926492",cQ="0x0000000000000000000000000000000000000000000000000000000000000000";var c0=r(45393),c1=r(54602);async function c2(e,t){let{address:r,factory:n,factoryData:a,hash:s,signature:i,universalSignatureVerifierAddress:o=e.chain?.contracts?.universalSignatureVerifier?.address,...l}=t,u=(0,ot.q)(i)?i:"object"==typeof i&&"r"in i&&"s"in i?function({r:e,s:t,to:r="hex",v:n,yParity:a}){let s=(()=>{if(0===a||1===a)return a;if(n&&(27n===n||28n===n||n>=35n))return+(n%2n===0n);throw Error("Invalid `v` or `yParity` value")})(),i=`0x${new c1.secp256k1.Signature((0,lu.uU)(e),(0,lu.uU)(t)).toCompactHex()}${0===s?"1b":"1c"}`;return"hex"===r?i:(0,i7.aT)(i)}(i):(0,i6.My)(i),c=await (async()=>{if(!n&&!a||(0,c0.iN)(u,-32)===cX)return u;let{address:e,data:t,signature:r,to:s="hex"}={address:n,data:a,signature:u},i=(0,i9.aP)([(0,o7.h)([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,t,r]),cX]);return"hex"===s?i:(0,i7.aT)(i)})();try{let t=o?{to:o,data:(0,i0.p)({abi:iX._,functionName:"isValidSig",args:[r,s,c]}),...l}:{data:(0,cY.m)({abi:iX._,args:[r,s,c],bytecode:cG.nP}),...l},{data:n}=await os(e,oS.T,"call")(t);return(0,lu.Nx)(n??"0x0")}catch(e){try{if((0,l8.h)((0,ll.b)(r),await lp({hash:s,signature:i})))return!0}catch{}if(e instanceof i3.zX)return!1;throw e}}async function c6(e,{address:t,message:r,factory:n,factoryData:a,signature:s,...i}){return c2(e,{address:t,factory:n,factoryData:a,hash:cJ(r),signature:s,...i})}var c5=r(15782),c8=r(53347);class c3 extends i8.C{constructor({domain:e}){super(`Invalid domain "${(0,c8.A)(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class c4 extends i8.C{constructor({primaryType:e,types:t}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(t))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class c9 extends i8.C{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}var c7=r(83593),de=r(23637);function dt(e){let{domain:t,message:r,primaryType:n,types:a}=e,s=(e,t)=>{for(let r of e){let{name:e,type:n}=r,i=t[e],o=n.match(de.Ge);if(o&&("number"==typeof i||"bigint"==typeof i)){let[e,t,r]=o;(0,i6.cK)(i,{signed:"int"===t,size:Number.parseInt(r)/8})}if("address"===n&&"string"==typeof i&&!(0,c7.P)(i))throw new c5.M({address:i});let l=n.match(de.BD);if(l){let[e,t]=l;if(t&&(0,lL.E)(i)!==Number.parseInt(t))throw new oi.BI({expectedSize:Number.parseInt(t),givenSize:(0,lL.E)(i)})}let u=a[n];u&&(function(e){if("address"===e||"bool"===e||"string"===e||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new c9({type:e})}(n),s(u,i))}};if(a.EIP712Domain&&t){if("object"!=typeof t)throw new c3({domain:t});s(a.EIP712Domain,t)}if("EIP712Domain"!==n)if(a[n])s(a[n],r);else throw new c4({primaryType:n,types:a})}function dr({domain:e}){return["string"==typeof e?.name&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},("number"==typeof e?.chainId||"bigint"==typeof e?.chainId)&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function dn({data:e,primaryType:t,types:r}){let n=function e({data:t,primaryType:r,types:n}){let a=[{type:"bytes32"}],s=[function({primaryType:e,types:t}){let r=(0,i6.nj)(function({primaryType:e,types:t}){let r="",n=function e({primaryType:t,types:r},n=new Set){let a=t.match(/^\w*/u),s=a?.[0];if(n.has(s)||void 0===r[s])return n;for(let t of(n.add(s),r[s]))e({primaryType:t.type,types:r},n);return n}({primaryType:e,types:t});for(let a of(n.delete(e),[e,...Array.from(n).sort()]))r+=`${a}(${t[a].map(({name:e,type:t})=>`${t} ${e}`).join(",")})`;return r}({primaryType:e,types:t}));return(0,oe.S)(r)}({primaryType:r,types:n})];for(let i of n[r]){let[r,o]=function t({types:r,name:n,type:a,value:s}){if(void 0!==r[a])return[{type:"bytes32"},(0,oe.S)(e({data:s,primaryType:a,types:r}))];if("bytes"===a){let e=s.length%2?"0":"";return s=`0x${e+s.slice(2)}`,[{type:"bytes32"},(0,oe.S)(s)]}if("string"===a)return[{type:"bytes32"},(0,oe.S)((0,i6.nj)(s))];if(a.lastIndexOf("]")===a.length-1){let e=a.slice(0,a.lastIndexOf("[")),i=s.map(a=>t({name:n,type:e,types:r,value:a}));return[{type:"bytes32"},(0,oe.S)((0,o7.h)(i.map(([e])=>e),i.map(([,e])=>e)))]}return[{type:a},s]}({types:n,name:i.name,type:i.type,value:t[i.name]});a.push(r),s.push(o)}return(0,o7.h)(a,s)}({data:e,primaryType:t,types:r});return(0,oe.S)(n)}async function da(e,t){let{address:r,factory:n,factoryData:a,signature:s,message:i,primaryType:o,types:l,domain:u,...c}=t,d=function(e){let{domain:t={},message:r,primaryType:n}=e,a={EIP712Domain:dr({domain:t}),...e.types};dt({domain:t,message:r,primaryType:n,types:a});let s=["0x1901"];return t&&s.push(function({domain:e,types:t}){return dn({data:e,primaryType:"EIP712Domain",types:t})}({domain:t,types:a})),"EIP712Domain"!==n&&s.push(dn({data:r,primaryType:n,types:a})),(0,oe.S)((0,i9.xW)(s))}({message:i,primaryType:o,types:l,domain:u});return c2(e,{address:r,factory:n,factoryData:a,hash:d,signature:s,...c})}let ds=new Map,di=new Map,dl=0;function du(e,t,r){let n=++dl,a=()=>ds.get(e)||[],s=()=>{let t=a();ds.set(e,t.filter(e=>e.id!==n))},i=()=>{let t=a();if(!t.some(e=>e.id===n))return;let r=di.get(e);1===t.length&&r&&r(),s()},o=a();if(ds.set(e,[...o,{id:n,fns:t}]),o&&o.length>0)return i;let l={};for(let e in t)l[e]=(...t)=>{let r=a();if(0!==r.length)for(let n of r)n.fns[e]?.(...t)};let u=r(l);return"function"==typeof u&&di.set(e,u),i}var dc=r(72927);async function dd(e){return new Promise(t=>setTimeout(t,e))}function dp(e,{delay:t=100,retryCount:r=2,shouldRetry:n=()=>!0}={}){return new Promise((a,s)=>{let i=async({count:o=0}={})=>{let l=async({error:e})=>{let r="function"==typeof t?t({count:o,error:e}):t;r&&await dd(r),i({count:o+1})};try{let t=await e();a(t)}catch(e){if(o<r&&await n({count:o,error:e}))return l({error:e});s(e)}};i()})}function df(e,{emitOnBegin:t,initialWaitTime:r,interval:n}){let a=!0,s=()=>a=!1;return(async()=>{let i;t&&(i=await e({unpoll:s}));let o=await r?.(i)??n;await dd(o);let l=async()=>{a&&(await e({unpoll:s}),await dd(n),l())};l()})(),s}function dh(e,{emitOnBegin:t=!1,emitMissed:r=!1,onBlockNumber:n,onError:a,poll:s,pollingInterval:i=e.pollingInterval}){let o;return(void 0!==s?s:"webSocket"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type))?du((0,c8.A)(["watchBlockNumber",e.uid,t,r,i]),{onBlockNumber:n,onError:a},n=>df(async()=>{try{let t=await os(e,l2,"getBlockNumber")({cacheTime:0});if(o){if(t===o)return;if(t-o>1&&r)for(let e=o+1n;e<t;e++)n.onBlockNumber(e,o),o=e}(!o||t>o)&&(n.onBlockNumber(t,o),o=t)}catch(e){n.onError?.(e)}},{emitOnBegin:t,interval:i})):du((0,c8.A)(["watchBlockNumber",e.uid,t,r]),{onBlockNumber:n,onError:a},t=>{let r=!0,n=()=>r=!1;return(async()=>{try{let a=(()=>{if("fallback"===e.transport.type){let t=e.transport.transports.find(e=>"webSocket"===e.config.type);return t?t.value:e.transport}return e.transport})(),{unsubscribe:s}=await a.subscribe({params:["newHeads"],onData(e){if(!r)return;let n=(0,lu.uU)(e.result?.number);t.onBlockNumber(n,o),o=n},onError(e){t.onError?.(e)}});n=s,r||n()}catch(e){a?.(e)}})(),()=>n()})}async function dm(e,{confirmations:t=1,hash:r,onReplaced:n,pollingInterval:a=e.pollingInterval,retryCount:s=6,retryDelay:i=({count:e})=>200*~~(1<<e),timeout:o=18e4}){let l,u,c,d=(0,c8.A)(["waitForTransactionReceipt",e.uid,r]),p=!1,{promise:f,resolve:h,reject:m}=(0,dc.Y)(),y=o?setTimeout(()=>m(new lb.WA({hash:r})),o):void 0,g=du(d,{onReplaced:n,resolve:h,reject:m},n=>{let o=os(e,dh,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:a,async onBlockNumber(a){let d=e=>{clearTimeout(y),o(),e(),g()},f=a;if(!p)try{if(c){if(t>1&&(!c.blockNumber||f-c.blockNumber+1n<t))return;d(()=>n.resolve(c));return}if(l||(p=!0,await dp(async()=>{(l=await os(e,up,"getTransaction")({hash:r})).blockNumber&&(f=l.blockNumber)},{delay:i,retryCount:s}),p=!1),c=await os(e,um,"getTransactionReceipt")({hash:r}),t>1&&(!c.blockNumber||f-c.blockNumber+1n<t))return;d(()=>n.resolve(c))}catch(r){if(r instanceof lb.Kz||r instanceof lb.Kc){if(!l){p=!1;return}try{u=l,p=!0;let r=await dp(()=>os(e,lO,"getBlock")({blockNumber:f,includeTransactions:!0}),{delay:i,retryCount:s,shouldRetry:({error:e})=>e instanceof lk});p=!1;let a=r.transactions.find(({from:e,nonce:t})=>e===u.from&&t===u.nonce);if(!a||(c=await os(e,um,"getTransactionReceipt")({hash:a.hash}),t>1&&(!c.blockNumber||f-c.blockNumber+1n<t)))return;let o="replaced";a.to===u.to&&a.value===u.value&&a.input===u.input?o="repriced":a.from===a.to&&0n===a.value&&(o="cancelled"),d(()=>{n.onReplaced?.({reason:o,replacedTransaction:u,transaction:a,transactionReceipt:c}),n.resolve(c)})}catch(e){d(()=>n.reject(e))}}else d(()=>n.reject(r))}}})});return f}let dy=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,dg=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;async function db(e,t){let{address:r,domain:n,message:a,nonce:s,scheme:i,signature:o,time:l=new Date,...u}=t,c=function(e){let{scheme:t,statement:r,...n}=e.match(dy)?.groups??{},{chainId:a,expirationTime:s,issuedAt:i,notBefore:o,requestId:l,...u}=e.match(dg)?.groups??{},c=e.split("Resources:")[1]?.split("\n- ").slice(1);return{...n,...u,...a?{chainId:Number(a)}:{},...s?{expirationTime:new Date(s)}:{},...i?{issuedAt:new Date(i)}:{},...o?{notBefore:new Date(o)}:{},...l?{requestId:l}:{},...c?{resources:c}:{},...t?{scheme:t}:{},...r?{statement:r}:{}}}(a);if(!c.address||!function(e){let{address:t,domain:r,message:n,nonce:a,scheme:s,time:i=new Date}=e;if(r&&n.domain!==r||a&&n.nonce!==a||s&&n.scheme!==s||n.expirationTime&&i>=n.expirationTime||n.notBefore&&i<n.notBefore)return!1;try{if(!n.address||t&&!(0,l8.h)(n.address,t))return!1}catch{return!1}return!0}({address:r,domain:n,message:c,nonce:s,scheme:i,time:l}))return!1;let d=cJ(a);return c2(e,{address:c.address,hash:d,signature:o,...u})}async function dv(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}function dw(e){return{call:t=>(0,oS.T)(e,t),createAccessList:t=>o5(e,t),createBlockFilter:()=>o3(e),createContractEventFilter:t=>ls(e,t),createEventFilter:t=>li(e,t),createPendingTransactionFilter:()=>lo(e),estimateContractGas:t=>lJ(e,t),estimateGas:t=>lW(e,t),getBalance:t=>lK(e,t),getBlobBaseFee:()=>lY(e),getBlock:t=>lO(e,t),getBlockNumber:t=>l2(e,t),getBlockTransactionCount:t=>l6(e,t),getBytecode:t=>l5(e,t),getChainId:()=>lZ(e),getCode:t=>l5(e,t),getContractEvents:t=>un(e,t),getEip712Domain:t=>us(e,t),getEnsAddress:t=>o$(e,t),getEnsAvatar:t=>oJ(e,t),getEnsName:t=>oY(e,t),getEnsResolver:t=>oX(e,t),getEnsText:t=>oW(e,t),getFeeHistory:t=>uo(e,t),estimateFeesPerGas:t=>lN(e,t),getFilterChanges:t=>ul(e,t),getFilterLogs:t=>uu(e,t),getGasPrice:()=>l$(e),getLogs:t=>ur(e,t),getProof:t=>uc(e,t),estimateMaxPriorityFeePerGas:t=>lC(e,t),getStorageAt:t=>ud(e,t),getTransaction:t=>up(e,t),getTransactionConfirmations:t=>uf(e,t),getTransactionCount:t=>lR(e,t),getTransactionReceipt:t=>um(e,t),multicall:t=>uy(e,t),prepareTransactionRequest:t=>lH(e,t),readContract:t=>oO(e,t),sendRawTransaction:t=>dv(e,t),simulate:t=>uU(e,t),simulateBlocks:t=>uU(e,t),simulateCalls:t=>cH(e,t),simulateContract:t=>cK(e,t),verifyMessage:t=>c6(e,t),verifySiweMessage:t=>db(e,t),verifyTypedData:t=>da(e,t),uninstallFilter:t=>cW(e,t),waitForTransactionReceipt:t=>dm(e,t),watchBlocks:t=>(function(e,{blockTag:t="latest",emitMissed:r=!1,emitOnBegin:n=!1,onBlock:a,onError:s,includeTransactions:i,poll:o,pollingInterval:l=e.pollingInterval}){let u,c,d,p,f=void 0!==o?o:"webSocket"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type),h=i??!1;return f?du((0,c8.A)(["watchBlocks",e.uid,t,r,n,h,l]),{onBlock:a,onError:s},a=>df(async()=>{try{let n=await os(e,lO,"getBlock")({blockTag:t,includeTransactions:h});if(n.number&&u?.number){if(n.number===u.number)return;if(n.number-u.number>1&&r)for(let t=u?.number+1n;t<n.number;t++){let r=await os(e,lO,"getBlock")({blockNumber:t,includeTransactions:h});a.onBlock(r,u),u=r}}(!u?.number||"pending"===t&&!n?.number||n.number&&n.number>u.number)&&(a.onBlock(n,u),u=n)}catch(e){a.onError?.(e)}},{emitOnBegin:n,interval:l})):(c=!0,d=!0,p=()=>c=!1,(async()=>{try{n&&os(e,lO,"getBlock")({blockTag:t,includeTransactions:h}).then(e=>{c&&d&&(a(e,void 0),d=!1)});let r=(()=>{if("fallback"===e.transport.type){let t=e.transport.transports.find(e=>"webSocket"===e.config.type);return t?t.value:e.transport}return e.transport})(),{unsubscribe:i}=await r.subscribe({params:["newHeads"],async onData(t){if(!c)return;let r=await os(e,lO,"getBlock")({blockNumber:t.blockNumber,includeTransactions:h}).catch(()=>{});c&&(a(r,u),d=!1,u=r)},onError(e){s?.(e)}});p=i,c||p()}catch(e){s?.(e)}})(),()=>p())})(e,t),watchBlockNumber:t=>dh(e,t),watchContractEvent:t=>(function(e,t){let{abi:r,address:n,args:a,batch:s=!0,eventName:i,fromBlock:o,onError:l,onLogs:u,poll:c,pollingInterval:d=e.pollingInterval,strict:p}=t;return(void 0!==c?c:"bigint"==typeof o||"webSocket"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type))?(()=>{let t=p??!1;return du((0,c8.A)(["watchContractEvent",n,a,s,e.uid,i,d,t,o]),{onLogs:u,onError:l},l=>{let u,c;void 0!==o&&(u=o-1n);let p=!1,f=df(async()=>{if(!p){try{c=await os(e,ls,"createContractEventFilter")({abi:r,address:n,args:a,eventName:i,strict:t,fromBlock:o})}catch{}p=!0;return}try{let o;if(c)o=await os(e,ul,"getFilterChanges")({filter:c});else{let s=await os(e,l2,"getBlockNumber")({});o=u&&u<s?await os(e,un,"getContractEvents")({abi:r,address:n,args:a,eventName:i,fromBlock:u+1n,toBlock:s,strict:t}):[],u=s}if(0===o.length)return;if(s)l.onLogs(o);else for(let e of o)l.onLogs([e])}catch(e){c&&e instanceof om&&(p=!1),l.onError?.(e)}},{emitOnBegin:!0,interval:d});return async()=>{c&&await os(e,cW,"uninstallFilter")({filter:c}),f()}})})():(()=>{let t=(0,c8.A)(["watchContractEvent",n,a,s,e.uid,i,d,p??!1]),o=!0,c=()=>o=!1;return du(t,{onLogs:u,onError:l},t=>((async()=>{try{let s=(()=>{if("fallback"===e.transport.type){let t=e.transport.transports.find(e=>"webSocket"===e.config.type);return t?t.value:e.transport}return e.transport})(),l=i?ln({abi:r,eventName:i,args:a}):[],{unsubscribe:u}=await s.subscribe({params:["logs",{address:n,topics:l}],onData(e){if(!o)return;let n=e.result;try{let{eventName:e,args:a}=l7({abi:r,data:n.data,topics:n.topics,strict:p}),s=ut(n,{args:a,eventName:e});t.onLogs([s])}catch(s){let e,r;if(s instanceof oi.fo||s instanceof oi.l3){if(p)return;e=s.abiItem.name,r=s.abiItem.inputs?.some(e=>!("name"in e&&e.name))}let a=ut(n,{args:r?[]:{},eventName:e});t.onLogs([a])}},onError(e){t.onError?.(e)}});c=u,o||c()}catch(e){l?.(e)}})(),()=>c()))})()})(e,t),watchEvent:t=>(function(e,{address:t,args:r,batch:n=!0,event:a,events:s,fromBlock:i,onError:o,onLogs:l,poll:u,pollingInterval:c=e.pollingInterval,strict:d}){let p,f,h=void 0!==u?u:"bigint"==typeof i||"webSocket"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type),m=d??!1;return h?du((0,c8.A)(["watchEvent",t,r,n,e.uid,a,c,i]),{onLogs:l,onError:o},o=>{let l,u;void 0!==i&&(l=i-1n);let d=!1,p=df(async()=>{if(!d){try{u=await os(e,li,"createEventFilter")({address:t,args:r,event:a,events:s,strict:m,fromBlock:i})}catch{}d=!0;return}try{let i;if(u)i=await os(e,ul,"getFilterChanges")({filter:u});else{let n=await os(e,l2,"getBlockNumber")({});i=l&&l!==n?await os(e,ur,"getLogs")({address:t,args:r,event:a,events:s,fromBlock:l+1n,toBlock:n}):[],l=n}if(0===i.length)return;if(n)o.onLogs(i);else for(let e of i)o.onLogs([e])}catch(e){u&&e instanceof om&&(d=!1),o.onError?.(e)}},{emitOnBegin:!0,interval:c});return async()=>{u&&await os(e,cW,"uninstallFilter")({filter:u}),p()}}):(p=!0,f=()=>p=!1,(async()=>{try{let n=(()=>{if("fallback"===e.transport.type){let t=e.transport.transports.find(e=>"webSocket"===e.config.type);return t?t.value:e.transport}return e.transport})(),i=s??(a?[a]:void 0),u=[];i&&(u=[i.flatMap(e=>ln({abi:[e],eventName:e.name,args:r}))],a&&(u=u[0]));let{unsubscribe:c}=await n.subscribe({params:["logs",{address:t,topics:u}],onData(e){if(!p)return;let t=e.result;try{let{eventName:e,args:r}=l7({abi:i??[],data:t.data,topics:t.topics,strict:m}),n=ut(t,{args:r,eventName:e});l([n])}catch(a){let e,r;if(a instanceof oi.fo||a instanceof oi.l3){if(d)return;e=a.abiItem.name,r=a.abiItem.inputs?.some(e=>!("name"in e&&e.name))}let n=ut(t,{args:r?[]:{},eventName:e});l([n])}},onError(e){o?.(e)}});f=c,p||f()}catch(e){o?.(e)}})(),()=>f())})(e,t),watchPendingTransactions:t=>(function(e,{batch:t=!0,onError:r,onTransactions:n,poll:a,pollingInterval:s=e.pollingInterval}){let i,o;return(void 0!==a?a:"webSocket"!==e.transport.type)?du((0,c8.A)(["watchPendingTransactions",e.uid,t,s]),{onTransactions:n,onError:r},r=>{let n,a=df(async()=>{try{if(!n)try{n=await os(e,lo,"createPendingTransactionFilter")({});return}catch(e){throw a(),e}let s=await os(e,ul,"getFilterChanges")({filter:n});if(0===s.length)return;if(t)r.onTransactions(s);else for(let e of s)r.onTransactions([e])}catch(e){r.onError?.(e)}},{emitOnBegin:!0,interval:s});return async()=>{n&&await os(e,cW,"uninstallFilter")({filter:n}),a()}}):(i=!0,o=()=>i=!1,(async()=>{try{let{unsubscribe:t}=await e.transport.subscribe({params:["newPendingTransactions"],onData(e){if(!i)return;let t=e.result;n([t])},onError(e){r?.(e)}});o=t,i||o()}catch(e){r?.(e)}})(),()=>o())})(e,t)}}var dx=r(81443);let d_={formatters:void 0,fees:void 0,serializers:void 0,id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:0x125db65},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:0xdb04c1}}},dE=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"accountAddress",type:"address"},{indexed:!1,internalType:"enum IContractDeployer.AccountNonceOrdering",name:"nonceOrdering",type:"uint8"}],name:"AccountNonceOrderingUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"accountAddress",type:"address"},{indexed:!1,internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"aaVersion",type:"uint8"}],name:"AccountVersionUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"deployerAddress",type:"address"},{indexed:!0,internalType:"bytes32",name:"bytecodeHash",type:"bytes32"},{indexed:!0,internalType:"address",name:"contractAddress",type:"address"}],name:"ContractDeployed",type:"event"},{inputs:[{internalType:"bytes32",name:"_salt",type:"bytes32"},{internalType:"bytes32",name:"_bytecodeHash",type:"bytes32"},{internalType:"bytes",name:"_input",type:"bytes"}],name:"create",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"_salt",type:"bytes32"},{internalType:"bytes32",name:"_bytecodeHash",type:"bytes32"},{internalType:"bytes",name:"_input",type:"bytes"}],name:"create2",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"_salt",type:"bytes32"},{internalType:"bytes32",name:"_bytecodeHash",type:"bytes32"},{internalType:"bytes",name:"_input",type:"bytes"},{internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"_aaVersion",type:"uint8"}],name:"create2Account",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes32",name:"_bytecodeHash",type:"bytes32"},{internalType:"bytes",name:"_input",type:"bytes"},{internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"_aaVersion",type:"uint8"}],name:"createAccount",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"extendedAccountVersion",outputs:[{internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_keccak256BytecodeHash",type:"bytes32"}],name:"forceDeployKeccak256",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"bytecodeHash",type:"bytes32"},{internalType:"address",name:"newAddress",type:"address"},{internalType:"bool",name:"callConstructor",type:"bool"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"input",type:"bytes"}],internalType:"struct ContractDeployer.ForceDeployment",name:"_deployment",type:"tuple"},{internalType:"address",name:"_sender",type:"address"}],name:"forceDeployOnAddress",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"bytecodeHash",type:"bytes32"},{internalType:"address",name:"newAddress",type:"address"},{internalType:"bool",name:"callConstructor",type:"bool"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"input",type:"bytes"}],internalType:"struct ContractDeployer.ForceDeployment[]",name:"_deployments",type:"tuple[]"}],name:"forceDeployOnAddresses",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"getAccountInfo",outputs:[{components:[{internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"supportedAAVersion",type:"uint8"},{internalType:"enum IContractDeployer.AccountNonceOrdering",name:"nonceOrdering",type:"uint8"}],internalType:"struct IContractDeployer.AccountInfo",name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_sender",type:"address"},{internalType:"uint256",name:"_senderNonce",type:"uint256"}],name:"getNewAddressCreate",outputs:[{internalType:"address",name:"newAddress",type:"address"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"_sender",type:"address"},{internalType:"bytes32",name:"_bytecodeHash",type:"bytes32"},{internalType:"bytes32",name:"_salt",type:"bytes32"},{internalType:"bytes",name:"_input",type:"bytes"}],name:"getNewAddressCreate2",outputs:[{internalType:"address",name:"newAddress",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"_version",type:"uint8"}],name:"updateAccountVersion",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"enum IContractDeployer.AccountNonceOrdering",name:"_nonceOrdering",type:"uint8"}],name:"updateNonceOrdering",outputs:[],stateMutability:"nonpayable",type:"function"}],dI=[{inputs:[{internalType:"address",name:"_token",type:"address"},{internalType:"uint256",name:"_minAllowance",type:"uint256"},{internalType:"bytes",name:"_innerInput",type:"bytes"}],name:"approvalBased",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"input",type:"bytes"}],name:"general",outputs:[],stateMutability:"nonpayable",type:"function"}];class dT extends i8.C{constructor({docsPath:e}={}){super("Could not find an Account to execute with this Action.\nPlease provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client.",{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class dk extends i8.C{constructor({docsPath:e,metaMessages:t,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:t,name:"AccountTypeNotSupportedError"})}}var dP=r(20883);function dA({chain:e,currentChainId:t}){if(!e)throw new dP.jF;if(t!==e.id)throw new dP.EH({chain:e,currentChainId:t})}function dS(e,{docsPath:t,...r}){let n=(()=>{let t=(0,lx.l)(e,r);return t instanceof lw.RM?e:t})();return new lb.$s(n,{docsPath:t,...r})}let dO=new(r(35491)).A(128);async function d$(e,t){let{account:r=e.account,chain:n=e.chain,accessList:a,authorizationList:s,blobs:i,data:o,gas:l,gasPrice:u,maxFeePerBlobGas:c,maxFeePerGas:d,maxPriorityFeePerGas:p,nonce:f,value:h,...m}=t;if(void 0===r)throw new dT({docsPath:"/docs/actions/wallet/sendTransaction"});let y=r?(0,oQ.J)(r):null;try{(0,o6.c)(t);let r=await (async()=>t.to?t.to:s&&s.length>0?await lm({authorization:s[0]}).catch(()=>{throw new i8.C("`to` is required. Could not infer from `authorizationList`.")}):void 0)();if(y?.type==="json-rpc"||null===y){let t;null!==n&&(t=await os(e,lZ,"getChainId")({}),dA({currentChainId:t,chain:n}));let g=e.chain?.formatters?.transactionRequest?.format,b=(g||o2.Bv)({...(0,o1.o)(m,{format:g}),accessList:a,authorizationList:s,blobs:i,chainId:t,data:o,from:y?.address,gas:l,gasPrice:u,maxFeePerBlobGas:c,maxFeePerGas:d,maxPriorityFeePerGas:p,nonce:f,to:r,value:h}),v=dO.get(e.uid);try{return await e.request({method:v?"wallet_sendTransaction":"eth_sendTransaction",params:[b]},{retryCount:0})}catch(t){if(!1===v)throw t;if("InvalidInputRpcError"===t.name||"InvalidParamsRpcError"===t.name||"MethodNotFoundRpcError"===t.name||"MethodNotSupportedRpcError"===t.name)return await e.request({method:"wallet_sendTransaction",params:[b]},{retryCount:0}).then(t=>(dO.set(e.uid,!0),t)).catch(r=>{if("MethodNotFoundRpcError"===r.name||"MethodNotSupportedRpcError"===r.name)throw dO.set(e.uid,!1),t;throw r});throw t}}if(y?.type==="local"){let t=await os(e,lH,"prepareTransactionRequest")({account:y,accessList:a,authorizationList:s,blobs:i,chain:n,data:o,gas:l,gasPrice:u,maxFeePerBlobGas:c,maxFeePerGas:d,maxPriorityFeePerGas:p,nonce:f,nonceManager:y.nonceManager,parameters:[...lV,"sidecars"],value:h,...m,to:r}),g=n?.serializers?.transaction,b=await y.signTransaction(t,{serializer:g});return await os(e,dv,"sendRawTransaction")({serializedTransaction:b})}if(y?.type==="smart")throw new dk({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"});throw new dk({docsPath:"/docs/actions/wallet/sendTransaction",type:y?.type})}catch(e){if(e instanceof dk)throw e;throw dS(e,{...t,account:y,chain:t.chain||void 0})}}async function dC(e,t){let{abi:r,account:n=e.account,address:a,args:s,dataSuffix:i,functionName:o,...l}=t;if(void 0===n)throw new dT({docsPath:"/docs/contract/writeContract"});let u=n?(0,oQ.J)(n):null,c=(0,i0.p)({abi:r,args:s,functionName:o});try{return await os(e,d$,"sendTransaction")({data:`${c}${i?i.replace("0x",""):""}`,to:a,account:u,...l})}catch(e){throw oA(e,{abi:r,address:a,args:s,docsPath:"/docs/contract/writeContract",functionName:o,sender:u?.address})}}var dj=r(99134);let dN=32n*r(26361).Au;class dM extends i8.C{constructor({givenLength:e,maxBytecodeSize:t}){super(`Bytecode cannot be longer than ${t} bytes. Given length: ${e}`,{name:"BytecodeLengthExceedsMaxSizeError"})}}class dR extends i8.C{constructor({givenLengthInWords:e}){super(`Bytecode length in 32-byte words must be odd. Given length in words: ${e}`,{name:"BytecodeLengthInWordsMustBeOddError"})}}class dB extends i8.C{constructor({givenLength:e}){super(`The bytecode length in bytes must be divisible by 32. Given length: ${e}`,{name:"BytecodeLengthMustBeDivisibleBy32Error"})}}function dF(e){let t=(0,i7.ZJ)(e);if(t.length%32!=0)throw new dB({givenLength:t.length});if(t.length>dN)throw new dM({givenLength:t.length,maxBytecodeSize:dN});let r=lD(t),n=(0,i7.ZJ)(r),a=t.length/32;if(a%2==0)throw new dR({givenLengthInWords:a});let s=(0,i7.ZJ)(a),i=(0,dj.eV)(s,{size:2}),o=new Uint8Array([1,0]);return n.set(o,0),n.set(i,2),n}let dU="/docs/contract/encodeDeployData";function dD(e,t,r,n){let a=[t,r,n];return({create:{functionName:"create",argsContractDeployer:a},create2:{functionName:"create2",argsContractDeployer:a},createAccount:{functionName:"createAccount",argsContractDeployer:[...a,1]},create2Account:{functionName:"create2Account",argsContractDeployer:[...a,1]}})[e||"create"]}class dz extends i8.C{constructor(){super('Transaction is not an EIP712 transaction.\n\nTransaction must:\n  - include `type: "eip712"`\n  - include one of the following: `customSignature`, `paymaster`, `paymasterInput`, `gasPerPubdata`, `factoryDeps`',{name:"InvalidEip712TransactionError"})}}function dq(e){return"eip712"===e.type||"customSignature"in e&&!!e.customSignature||"paymaster"in e&&!!e.paymaster||"paymasterInput"in e&&!!e.paymasterInput||"gasPerPubdata"in e&&"bigint"==typeof e.gasPerPubdata||"factoryDeps"in e&&!!e.factoryDeps||!1}function dL(e){if(!dq(e))throw new dz;(0,o6.c)(e)}async function dZ(e,t){let{account:r=e.account,chain:n=e.chain,...a}=t;if(!r)throw new dT({docsPath:"/docs/actions/wallet/signTransaction"});let s=(0,oQ.J)(r);(0,o6.c)({account:s,...t});let i=await os(e,lZ,"getChainId")({});null!==n&&dA({currentChainId:i,chain:n});let o=n?.formatters||e.chain?.formatters,l=o?.transactionRequest?.format||o2.Bv;return s.signTransaction?s.signTransaction({...a,chainId:i},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...l(a),chainId:(0,i6.cK)(i),from:s.address}]},{retryCount:0})}async function dV(e,t){let{account:r=e.account,domain:n,message:a,primaryType:s}=t;if(!r)throw new dT({docsPath:"/docs/actions/wallet/signTypedData"});let i=(0,oQ.J)(r),o={EIP712Domain:dr({domain:n}),...t.types};if(dt({domain:n,message:a,primaryType:s,types:o}),i.signTypedData)return i.signTypedData({domain:n,message:a,primaryType:s,types:o});let l=function(e){let{domain:t,message:r,primaryType:n,types:a}=e,s=(e,t)=>{let r={...t};for(let t of e){let{name:e,type:n}=t;"address"===n&&(r[e]=r[e].toLowerCase())}return r},i=a.EIP712Domain&&t?s(a.EIP712Domain,t):{},o=(()=>{if("EIP712Domain"!==n)return s(a[n],r)})();return(0,c8.A)({domain:i,message:o,primaryType:n,types:a})}({domain:n,message:a,primaryType:s,types:o});return e.request({method:"eth_signTypedData_v4",params:[i.address,l]},{retryCount:0})}async function dG(e,t){let{account:r=e.account,chain:n=e.chain,...a}=t,s=r?(0,oQ.J)(r):e.account;if(!s)throw new dT({docsPath:"/docs/actions/wallet/signTransaction"});if(dL({account:s,chain:n,...t}),!n?.custom?.getEip712Domain)throw new i8.C("`getEip712Domain` not found on chain.");if(!n?.serializers?.transaction)throw new i8.C("transaction serializer not found on chain.");let i=await os(e,lZ,"getChainId")({});null!==n&&dA({currentChainId:i,chain:n});let o=n?.custom.getEip712Domain({...a,chainId:i,from:s.address,type:"eip712"}),l=await dV(e,{...o,account:s});return n?.serializers?.transaction({chainId:i,...a,customSignature:l,type:"eip712"},{r:"0x0",s:"0x0",v:0n})}async function dH(e,t){return dq(t)?dG(e,t):await dZ(e,t)}async function dK(e,t){let{account:r=e.account,chain:n=e.chain}=t,a=r?(0,oQ.J)(r):e.account;if(!a)throw new dT({docsPath:"/docs/actions/wallet/sendTransaction"});try{let r;dL(t);let s=await lH(e,{...t,nonceManager:a.nonceManager,parameters:["gas","nonce","fees"]});null!==n&&(r=await os(e,lZ,"getChainId")({}),dA({currentChainId:r,chain:n}));let i=await dH(e,{...s,chainId:r});return await os(e,dv,"sendRawTransaction")({serializedTransaction:i})}catch(e){throw dS(e,{...t,account:a,chain:n})}}async function dW(e,t){return dq(t)?dK(e,t):d$(e,t)}var dJ=Object.defineProperty,dY=(e,t)=>dJ(e,"name",{value:t,configurable:!0}),dX=class extends iY{static{dY(this,"ViemEVMWalletClient")}#e;#t;#r;get publicClient(){return this.#e.extend(dw)}constructor(e,t){super(),this.#e=e,this.#t=t?.paymaster?.defaultAddress??"",this.#r=t?.paymaster?.defaultInput??function(e){let{innerInput:t}=e,r="string"==typeof t?t:(0,i6.My)(t);return(0,i0.p)({abi:dI,functionName:"general",args:[r]})}({innerInput:"0x"})}getAddress(){return this.#e.account?.address??""}getChain(){return{type:"evm",id:this.#e.chain?.id??0}}async signMessage(e){if(!this.#e.account)throw Error("No account connected");return{signature:await this.#e.signMessage({message:e,account:this.#e.account})}}async signTypedData(e){if(!this.#e.account)throw Error("No account connected");return{signature:await this.#e.signTypedData({domain:{...e.domain,chainId:"bigint"==typeof e.domain.chainId?Number(e.domain.chainId):e.domain.chainId},types:e.types,primaryType:e.primaryType,message:e.message,account:this.#e.account})}}async sendTransaction(e){let{to:t,abi:r,functionName:n,args:a,value:s,options:i,data:o}=e;if(!this.#e.account)throw Error("No account connected");let l=i?.paymaster?.address??this.#t,u=i?.paymaster?.input??this.#r,c=!!l&&!!u,d=c?this.#e.extend(e=>({sendTransaction:t=>dW(e,t),signTransaction:t=>dH(e,t),deployContract:t=>(function(e,t){let{abi:r,args:n,bytecode:a,deploymentType:s,salt:i,...o}=t,l=function(e){let{abi:t,args:r,bytecode:n,deploymentType:a,salt:s}=e;if(!r||0===r.length){let{functionName:e,argsContractDeployer:t}=dD(a,s??cQ,(0,i6.nj)(dF(n)),"0x");return(0,i0.p)({abi:dE,functionName:e,args:t})}let i=t.find(e=>"type"in e&&"constructor"===e.type);if(!i)throw new oi.YW({docsPath:dU});if(!("inputs"in i)||!i.inputs||0===i.inputs.length)throw new oi.YF({docsPath:dU});let o=(0,o7.h)(i.inputs,r),{functionName:l,argsContractDeployer:u}=dD(a,s??cQ,(0,i6.nj)(dF(n)),o);return(0,i0.p)({abi:dE,functionName:l,args:u})}({abi:r,args:n,bytecode:a,deploymentType:s,salt:i});return o.factoryDeps=o.factoryDeps||[],o.factoryDeps.includes(a)||o.factoryDeps.push(a),dK(e,{...o,data:l,to:"create2"===s||"create2Account"===s?"0x0000000000000000000000000000000000010000":"0x0000000000000000000000000000000000008006"})})(e,t),writeContract:t=>dC(Object.assign(e,{sendTransaction:t=>dW(e,t)}),t)})):this.#e;if(!r){let e={account:this.#e.account,to:t,chain:this.#e.chain,value:s,data:o,...c?{paymaster:l,paymasterInput:u}:{}},r=await d.sendTransaction(e);return this.waitForReceipt(r)}if(!n)throw Error("Function name is required for contract calls");let{request:p}=await this.publicClient.simulateContract({account:this.#e.account,address:t,abi:r,functionName:n,args:a,chain:this.#e.chain,value:s});if(c){let e=(0,i0.p)({abi:r,functionName:n,args:a}),t={account:this.#e.account,chain:this.#e.chain,to:p.address,data:e,value:p.value,paymaster:l,paymasterInput:u},s=await d.sendTransaction(t);return this.waitForReceipt(s)}let f=await this.#e.writeContract(p);return this.waitForReceipt(f)}async read(e){let{address:t,abi:r,functionName:n,args:a}=e;if(!r)throw Error("Read request must include ABI for EVM");return{value:await this.publicClient.readContract({address:t,abi:r,functionName:n,args:a})}}async balanceOf(e){let t=await this.publicClient.getBalance({address:e}),r=this.#e.chain??d_;return{value:(0,dx.J)(BigInt(t),r.nativeCurrency.decimals),decimals:r.nativeCurrency.decimals,symbol:r.nativeCurrency.symbol,name:r.nativeCurrency.name,inBaseUnits:t.toString()}}async waitForReceipt(e){let t=await this.publicClient.waitForTransactionReceipt({hash:e});return{hash:t.transactionHash,status:t.status}}};function dQ(e,t){return new dX(e,t)}function d0(e){return"string"==typeof e?{address:e,type:"json-rpc"}:e}dY(dQ,"viem");let d1=256,d2=e=>e,d6=()=>"viem@1.21.3";class d5 extends Error{constructor(e,t={}){super(),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ViemError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:d6()});let r=t.cause instanceof d5?t.cause.details:t.cause?.message?t.cause.message:t.details,n=t.cause instanceof d5&&t.cause.docsPath||t.docsPath;this.message=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...n?[`Docs: https://viem.sh${n}.html${t.docsSlug?`#${t.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join("\n"),t.cause&&(this.cause=t.cause),this.details=r,this.docsPath=n,this.metaMessages=t.metaMessages,this.shortMessage=e}walk(e){return function e(t,r){return r?.(t)?t:t&&"object"==typeof t&&"cause"in t?e(t.cause,r):r?null:t}(this,e)}}class d8 extends d5{constructor({max:e,min:t,signed:r,size:n,value:a}){super(`Number "${a}" is not in safe ${n?`${8*n}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntegerOutOfRangeError"})}}class d3 extends d5{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeOverflowError"})}}function d4(e,{strict:t=!0}={}){return!!e&&"string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}function d9(e){return d4(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function d7(e,{size:t}){if(d9(e)>t)throw new d3({givenSize:d9(e),maxSize:t})}function pe(e,t={}){let{signed:r}=t;t.size&&d7(e,{size:t.size});let n=BigInt(e);if(!r)return n;let a=(e.length-2)/2;return n<=(1n<<8n*BigInt(a)-1n)-1n?n:n-BigInt(`0x${"f".padStart(2*a,"f")}`)-1n}function pt(e,t={}){return Number(pe(e,t))}async function pr(e){return pt(await e.request({method:"eth_chainId"}))}class pn extends d5{constructor({offset:e,position:t,size:r}){super(`Slice ${"start"===t?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SliceOffsetOutOfBoundsError"})}}class pa extends d5{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeExceedsPaddingSizeError"})}}function ps(e,{dir:t,size:r=32}={}){return"string"==typeof e?pi(e,{dir:t,size:r}):function(e,{dir:t,size:r=32}={}){if(null===r)return e;if(e.length>r)throw new pa({size:e.length,targetSize:r,type:"bytes"});let n=new Uint8Array(r);for(let a=0;a<r;a++){let s="right"===t;n[s?a:r-a-1]=e[s?a:e.length-a-1]}return n}(e,{dir:t,size:r})}function pi(e,{dir:t,size:r=32}={}){if(null===r)return e;let n=e.replace("0x","");if(n.length>2*r)throw new pa({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n["right"===t?"padEnd":"padStart"](2*r,"0")}`}let po=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function pl(e,t={}){return"number"==typeof e||"bigint"==typeof e?pd(e,t):"string"==typeof e?pf(e,t):"boolean"==typeof e?pu(e,t):pc(e,t)}function pu(e,t={}){let r=`0x${Number(e)}`;return"number"==typeof t.size?(d7(r,{size:t.size}),ps(r,{size:t.size})):r}function pc(e,t={}){let r="";for(let t=0;t<e.length;t++)r+=po[e[t]];let n=`0x${r}`;return"number"==typeof t.size?(d7(n,{size:t.size}),ps(n,{dir:"right",size:t.size})):n}function pd(e,t={}){let r,{signed:n,size:a}=t,s=BigInt(e);a?r=n?(1n<<8n*BigInt(a)-1n)-1n:2n**(8n*BigInt(a))-1n:"number"==typeof e&&(r=BigInt(Number.MAX_SAFE_INTEGER));let i="bigint"==typeof r&&n?-r-1n:0;if(r&&s>r||s<i){let t="bigint"==typeof e?"n":"";throw new d8({max:r?`${r}${t}`:void 0,min:`${i}${t}`,signed:n,size:a,value:`${e}${t}`})}let o=`0x${(n&&s<0?(1n<<BigInt(8*a))+BigInt(s):s).toString(16)}`;return a?ps(o,{size:a}):o}let pp=new TextEncoder;function pf(e,t={}){return pc(pp.encode(e),t)}async function ph(e,{chain:t}){let{id:r,name:n,nativeCurrency:a,rpcUrls:s,blockExplorers:i}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:pd(r),chainName:n,nativeCurrency:a,rpcUrls:s.default.http,blockExplorerUrls:i?Object.values(i).map(({url:e})=>e):void 0}]})}function pm(e,{includeName:t=!1}={}){if("function"!==e.type&&"event"!==e.type&&"error"!==e.type)throw new pk(e.type);return`${e.name}(${function e(t,{includeName:r=!1}={}){return t?t.map(t=>(function(t,{includeName:r}){return t.type.startsWith("tuple")?`(${e(t.components,{includeName:r})})${t.type.slice(5)}`:t.type+(r&&t.name?` ${t.name}`:"")})(t,{includeName:r})).join(r?", ":","):""}(e.inputs,{includeName:t})})`}class py extends d5{constructor({docsPath:e}){super("A constructor was not found on the ABI.\nMake sure you are using the correct ABI and that the constructor exists on it.",{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorNotFoundError"})}}class pg extends d5{constructor({docsPath:e}){super("Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.\nMake sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists.",{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorParamsNotFoundError"})}}class pb extends d5{constructor({expectedLength:e,givenLength:t,type:r}){super(`ABI encoding array length mismatch for type ${r}.
Expected length: ${e}
Given length: ${t}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingArrayLengthMismatchError"})}}class pv extends d5{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${d9(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingBytesSizeMismatchError"})}}class pw extends d5{constructor({expectedLength:e,givenLength:t}){super(`ABI encoding params/values length mismatch.
Expected length (params): ${e}
Given length (values): ${t}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingLengthMismatchError"})}}class px extends d5{constructor(e,{docsPath:t}={}){super(`Function ${e?`"${e}" `:""}not found on ABI.
Make sure you are using the correct ABI and that the function exists on it.`,{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionNotFoundError"})}}class p_ extends d5{constructor(e,t){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${pm(e.abiItem)}\`, and`,`\`${t.type}\` in \`${pm(t.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItemAmbiguityError"})}}class pE extends d5{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BytesSizeMismatchError"})}}class pI extends d5{constructor(e,{docsPath:t}){super(`Type "${e}" is not a valid encoding type.
Please provide a valid ABI type.`,{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiEncodingType"})}}class pT extends d5{constructor(e){super(`Value "${e}" is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidArrayError"})}}class pk extends d5{constructor(e){super(`"${e}" is not a valid definition type.
Valid types: "function", "event", "error"`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidDefinitionTypeError"})}}function pP(e){return"string"==typeof e[0]?pA(e):function(e){let t=0;for(let r of e)t+=r.length;let r=new Uint8Array(t),n=0;for(let t of e)r.set(t,n),n+=t.length;return r}(e)}function pA(e){return`0x${e.reduce((e,t)=>e+t.replace("0x",""),"")}`}class pS extends d5{constructor({address:e}){super(`Address "${e}" is invalid.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAddressError"})}}let pO=/^0x[a-fA-F0-9]{40}$/;function p$(e){return pO.test(e)}function pC(e,t,r,{strict:n}={}){return d4(e,{strict:!1})?function(e,t,r,{strict:n}={}){pj(e,t);let a=`0x${e.replace("0x","").slice((t??0)*2,(r??e.length)*2)}`;return n&&pN(a,t,r),a}(e,t,r,{strict:n}):function(e,t,r,{strict:n}={}){pj(e,t);let a=e.slice(t,r);return n&&pN(a,t,r),a}(e,t,r,{strict:n})}function pj(e,t){if("number"==typeof t&&t>0&&t>d9(e)-1)throw new pn({offset:t,position:"start",size:d9(e)})}function pN(e,t,r){if("number"==typeof t&&"number"==typeof r&&d9(e)!==r-t)throw new pn({offset:r,position:"end",size:d9(e)})}function pM(e,t){if(e.length!==t.length)throw new pw({expectedLength:e.length,givenLength:t.length});let r=pR(function({params:e,values:t}){let r=[];for(let n=0;n<e.length;n++)r.push(function e({param:t,value:r}){let n=function(e){let t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}(t.type);if(n){let[a,s]=n;return function(t,{length:r,param:n}){let a=null===r;if(!Array.isArray(t))throw new pT(t);if(!a&&t.length!==r)throw new pb({expectedLength:r,givenLength:t.length,type:`${n.type}[${r}]`});let s=!1,i=[];for(let r=0;r<t.length;r++){let a=e({param:n,value:t[r]});a.dynamic&&(s=!0),i.push(a)}if(a||s){let e=pR(i);if(a){let t=pd(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?pP([t,e]):t}}if(s)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:pP(i.map(({encoded:e})=>e))}}(r,{length:a,param:{...t,type:s}})}if("tuple"===t.type)return function(t,{param:r}){let n=!1,a=[];for(let s=0;s<r.components.length;s++){let i=r.components[s],o=Array.isArray(t)?s:i.name,l=e({param:i,value:t[o]});a.push(l),l.dynamic&&(n=!0)}return{dynamic:n,encoded:n?pR(a):pP(a.map(({encoded:e})=>e))}}(r,{param:t});if("address"===t.type){var a=r;if(!p$(a))throw new pS({address:a});return{dynamic:!1,encoded:pi(a.toLowerCase())}}if("bool"===t.type)return{dynamic:!1,encoded:pi(pu(r))};if(t.type.startsWith("uint")||t.type.startsWith("int"))return function(e,{signed:t}){return{dynamic:!1,encoded:pd(e,{size:32,signed:t})}}(r,{signed:t.type.startsWith("int")});if(t.type.startsWith("bytes"))return function(e,{param:t}){let[,r]=t.type.split("bytes"),n=d9(e);if(!r){let t=e;return n%32!=0&&(t=pi(t,{dir:"right",size:32*Math.ceil((e.length-2)/2/32)})),{dynamic:!0,encoded:pP([pi(pd(n,{size:32})),t])}}if(n!==parseInt(r))throw new pv({expectedSize:parseInt(r),value:e});return{dynamic:!1,encoded:pi(e,{dir:"right"})}}(r,{param:t});if("string"===t.type){var s=r;let e=pf(s),t=Math.ceil(d9(e)/32),n=[];for(let r=0;r<t;r++)n.push(pi(pC(e,32*r,(r+1)*32),{dir:"right"}));return{dynamic:!0,encoded:pP([pi(pd(d9(e),{size:32})),...n])}}throw new pI(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}({param:e[n],value:t[n]}));return r}({params:e,values:t}));return 0===r.length?"0x":r}function pR(e){let t=0;for(let r=0;r<e.length;r++){let{dynamic:n,encoded:a}=e[r];n?t+=32:t+=d9(a)}let r=[],n=[],a=0;for(let s=0;s<e.length;s++){let{dynamic:i,encoded:o}=e[s];i?(r.push(pd(t+a,{size:32})),n.push(o),a+=d9(o)):r.push(o)}return pP([...r,...n])}let pB="/docs/contract/encodeDeployData";class pF extends d5{constructor({docsPath:e}={}){super("Could not find an Account to execute with this Action.\nPlease provide an Account with the `account` argument on the Action, or by supplying an `account` to the WalletClient.",{docsPath:e,docsSlug:"account"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AccountNotFoundError"})}}class pU extends d5{constructor({chain:e,currentChainId:t}){super(`The current chain of the wallet (id: ${t}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e.id}  ${e.name}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainMismatchError"})}}class pD extends d5{constructor(){super("No chain was provided to the request.\nPlease provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotFoundError"})}}class pz extends d5{constructor({chainId:e}){super(`Chain ID "${e}" is invalid.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidChainIdError"})}}function pq({chain:e,currentChainId:t}){if(!e)throw new pD;if(t!==e.id)throw new pU({chain:e,currentChainId:t})}let pL={gwei:9,wei:18},pZ={ether:-9,wei:9};function pV(e,t){let r=e.toString(),n=r.startsWith("-");n&&(r=r.slice(1));let[a,s]=[(r=r.padStart(t,"0")).slice(0,r.length-t),r.slice(r.length-t)];return s=s.replace(/(0+)$/,""),`${n?"-":""}${a||"0"}${s?`.${s}`:""}`}function pG(e,t="wei"){return pV(e,pZ[t])}class pH extends d5{constructor({cause:e,message:t}={}){let r=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ExecutionRevertedError"})}}Object.defineProperty(pH,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(pH,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class pK extends d5{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${pG(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooHigh"})}}Object.defineProperty(pK,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class pW extends d5{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${pG(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooLow"})}}Object.defineProperty(pW,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class pJ extends d5{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooHighError"})}}Object.defineProperty(pJ,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class pY extends d5{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.
Try increasing the nonce or find the latest nonce with \`getTransactionCount\`.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooLowError"})}}Object.defineProperty(pY,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class pX extends d5{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceMaxValueError"})}}Object.defineProperty(pX,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class pQ extends d5{constructor({cause:e}={}){super("The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account.",{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InsufficientFundsError"})}}Object.defineProperty(pQ,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds/});class p0 extends d5{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooHighError"})}}Object.defineProperty(p0,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class p1 extends d5{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooLowError"})}}Object.defineProperty(p1,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class p2 extends d5{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionTypeNotSupportedError"})}}Object.defineProperty(p2,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class p6 extends d5{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:r}={}){super(`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${pG(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${pG(r)} gwei`:""}).`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TipAboveFeeCapError"})}}Object.defineProperty(p6,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class p5 extends d5{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownNodeError"})}}function p8(e,t="wei"){return pV(e,pL[t])}function p3(e){let t=Object.entries(e).map(([e,t])=>void 0===t||!1===t?null:[e,t]).filter(Boolean),r=t.reduce((e,[t])=>Math.max(e,t.length),0);return t.map(([e,t])=>`  ${`${e}:`.padEnd(r+1)}  ${t}`).join("\n")}class p4 extends d5{constructor(){super("Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.\nUse `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeConflictError"})}}class p9 extends d5{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidLegacyVError"})}}class p7 extends d5{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",p3(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- a Legacy Transaction with `gasPrice`"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSerializableTransactionError"})}}class fe extends d5{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStorageKeySizeError"})}}class ft extends d5{constructor(e,{account:t,docsPath:r,chain:n,data:a,gas:s,gasPrice:i,maxFeePerGas:o,maxPriorityFeePerGas:l,nonce:u,to:c,value:d}){super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",p3({chain:n&&`${n?.name} (id: ${n?.id})`,from:t?.address,to:c,value:void 0!==d&&`${p8(d)} ${n?.nativeCurrency?.symbol||"ETH"}`,data:a,gas:s,gasPrice:void 0!==i&&`${pG(i)} gwei`,maxFeePerGas:void 0!==o&&`${pG(o)} gwei`,maxPriorityFeePerGas:void 0!==l&&`${pG(l)} gwei`,nonce:u})].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionExecutionError"}),this.cause=e}}function fr(e,t){let r=(e.details||"").toLowerCase(),n=e.walk(e=>e.code===pH.code);return n instanceof d5?new pH({cause:e,message:n.details}):pH.nodeMessage.test(r)?new pH({cause:e,message:e.details}):pK.nodeMessage.test(r)?new pK({cause:e,maxFeePerGas:t?.maxFeePerGas}):pW.nodeMessage.test(r)?new pW({cause:e,maxFeePerGas:t?.maxFeePerGas}):pJ.nodeMessage.test(r)?new pJ({cause:e,nonce:t?.nonce}):pY.nodeMessage.test(r)?new pY({cause:e,nonce:t?.nonce}):pX.nodeMessage.test(r)?new pX({cause:e,nonce:t?.nonce}):pQ.nodeMessage.test(r)?new pQ({cause:e}):p0.nodeMessage.test(r)?new p0({cause:e,gas:t?.gas}):p1.nodeMessage.test(r)?new p1({cause:e,gas:t?.gas}):p2.nodeMessage.test(r)?new p2({cause:e}):p6.nodeMessage.test(r)?new p6({cause:e,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas}):new p5({cause:e})}function fn(e,{format:t}){if(!t)return{};let r={};return!function t(n){for(let a of Object.keys(n))a in e&&(r[a]=e[a]),n[a]&&"object"==typeof n[a]&&!Array.isArray(n[a])&&t(n[a])}(t(e||{})),r}function fa(e,t){return({exclude:r,format:n})=>({exclude:r,format:e=>{let a=t(e);if(r)for(let e of r)delete a[e];return{...a,...n(e)}},type:e})}let fs={legacy:"0x0",eip2930:"0x1",eip1559:"0x2"};function fi(e){return{...e,gas:void 0!==e.gas?pd(e.gas):void 0,gasPrice:void 0!==e.gasPrice?pd(e.gasPrice):void 0,maxFeePerGas:void 0!==e.maxFeePerGas?pd(e.maxFeePerGas):void 0,maxPriorityFeePerGas:void 0!==e.maxPriorityFeePerGas?pd(e.maxPriorityFeePerGas):void 0,nonce:void 0!==e.nonce?pd(e.nonce):void 0,type:void 0!==e.type?fs[e.type]:void 0,value:void 0!==e.value?pd(e.value):void 0}}let fo=fa("transactionRequest",fi);function fl(e,t,r){return n=>e[t.name||r]?.(n)??t(e,n)}function fu(e){let{account:t,gasPrice:r,maxFeePerGas:n,maxPriorityFeePerGas:a,to:s}=e,i=t?d0(t):void 0;if(i&&!p$(i.address))throw new pS({address:i.address});if(s&&!p$(s))throw new pS({address:s});if(void 0!==r&&(void 0!==n||void 0!==a))throw new p4;if(n&&n>2n**256n-1n)throw new pK({maxFeePerGas:n});if(a&&n&&a>n)throw new p6({maxFeePerGas:n,maxPriorityFeePerGas:a})}class fc extends d5{constructor(){super("`baseFeeMultiplier` must be greater than 1."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseFeeScalarError"})}}class fd extends d5{constructor(){super("Chain does not support EIP-1559 fees."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Eip1559FeesNotSupportedError"})}}class fp extends d5{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${pG(e)} gwei).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MaxFeePerGasTooLowError"})}}class ff extends d5{constructor({blockHash:e,blockNumber:t}){let r="Block";e&&(r=`Block at hash "${e}"`),t&&(r=`Block at number "${t}"`),super(`${r} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BlockNotFoundError"})}}let fh={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559"};function fm(e){let t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?pt(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?pt(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?fh[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if("bigint"==typeof t.v){if(0n===t.v||27n===t.v)return 0;if(1n===t.v||28n===t.v)return 1;if(t.v>=35n)return+(t.v%2n===0n)}})(),"legacy"===t.type&&(delete t.accessList,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),"eip2930"===t.type&&(delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t}let fy=fa("transaction",fm);function fg(e){let t=e.transactions?.map(e=>"string"==typeof e?e:fm(e));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,difficulty:e.difficulty?BigInt(e.difficulty):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}let fb=fa("block",fg);async function fv(e,{blockHash:t,blockNumber:r,blockTag:n,includeTransactions:a}={}){let s=a??!1,i=void 0!==r?pd(r):void 0,o=null;if(!(o=t?await e.request({method:"eth_getBlockByHash",params:[t,s]}):await e.request({method:"eth_getBlockByNumber",params:[i||(n??"latest"),s]})))throw new ff({blockHash:t,blockNumber:r});return(e.chain?.formatters?.block?.format||fg)(o)}async function fw(e){return BigInt(await e.request({method:"eth_gasPrice"}))}async function fx(e,t){let{block:r,chain:n=e.chain,request:a}=t||{};if("function"==typeof n?.fees?.defaultPriorityFee){let t=r||await fl(e,fv,"getBlock")({});return n.fees.defaultPriorityFee({block:t,client:e,request:a})}if(void 0!==n?.fees?.defaultPriorityFee)return n?.fees?.defaultPriorityFee;try{let t=await e.request({method:"eth_maxPriorityFeePerGas"});return pe(t)}catch{let[t,n]=await Promise.all([r?Promise.resolve(r):fl(e,fv,"getBlock")({}),fl(e,fw,"getGasPrice")({})]);if("bigint"!=typeof t.baseFeePerGas)throw new fd;let a=n-t.baseFeePerGas;if(a<0n)return 0n;return a}}async function f_(e,t){let{block:r,chain:n=e.chain,request:a,type:s="eip1559"}=t||{},i=await (async()=>"function"==typeof n?.fees?.baseFeeMultiplier?n.fees.baseFeeMultiplier({block:r,client:e,request:a}):n?.fees?.baseFeeMultiplier??1.2)();if(i<1)throw new fc;let o=i.toString().split(".")[1]?.length??0,l=10**o,u=e=>e*BigInt(Math.ceil(i*l))/BigInt(l),c=r||await fl(e,fv,"getBlock")({});if("function"==typeof n?.fees?.estimateFeesPerGas)return n.fees.estimateFeesPerGas({block:r,client:e,multiply:u,request:a,type:s});if("eip1559"===s){if("bigint"!=typeof c.baseFeePerGas)throw new fd;let t=a?.maxPriorityFeePerGas?a.maxPriorityFeePerGas:await fx(e,{block:c,chain:n,request:a}),r=u(c.baseFeePerGas);return{maxFeePerGas:a?.maxFeePerGas??r+t,maxPriorityFeePerGas:t}}return{gasPrice:a?.gasPrice??u(await fl(e,fw,"getGasPrice")({}))}}class fE extends d5{constructor(e,{account:t,docsPath:r,chain:n,data:a,gas:s,gasPrice:i,maxFeePerGas:o,maxPriorityFeePerGas:l,nonce:u,to:c,value:d}){super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",p3({from:t?.address,to:c,value:void 0!==d&&`${p8(d)} ${n?.nativeCurrency?.symbol||"ETH"}`,data:a,gas:s,gasPrice:void 0!==i&&`${pG(i)} gwei`,maxFeePerGas:void 0!==o&&`${pG(o)} gwei`,maxPriorityFeePerGas:void 0!==l&&`${pG(l)} gwei`,nonce:u})].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EstimateGasExecutionError"}),this.cause=e}}async function fI(e,t){let r=t.account??e.account;if(!r)throw new pF({docsPath:"/docs/actions/public/estimateGas"});let n=d0(r);try{let{accessList:r,blockNumber:a,blockTag:s,data:i,gas:o,gasPrice:l,maxFeePerGas:u,maxPriorityFeePerGas:c,nonce:d,to:p,value:f,...h}="local"===n.type?await fP(e,t):t,m=(a?pd(a):void 0)||s;fu(t);let y=e.chain?.formatters?.transactionRequest?.format,g=(y||fi)({...fn(h,{format:y}),from:n.address,accessList:r,data:i,gas:o,gasPrice:l,maxFeePerGas:u,maxPriorityFeePerGas:c,nonce:d,to:p,value:f}),b=await e.request({method:"eth_estimateGas",params:m?[g,m]:[g]});return BigInt(b)}catch(r){throw function(e,{docsPath:t,...r}){return new fE((()=>{let t=fr(e,r);return t instanceof p5?e:t})(),{docsPath:t,...r})}(r,{...t,account:n,chain:e.chain})}}async function fT(e,{address:t,blockTag:r="latest",blockNumber:n}){return pt(await e.request({method:"eth_getTransactionCount",params:[t,n?pd(n):r]}))}function fk(e){if(e.type)return e.type;if(void 0!==e.maxFeePerGas||void 0!==e.maxPriorityFeePerGas)return"eip1559";if(void 0!==e.gasPrice)return void 0!==e.accessList?"eip2930":"legacy";throw new p7({transaction:e})}async function fP(e,t){let{account:r=e.account,chain:n,gas:a,nonce:s,type:i}=t;if(!r)throw new pF;let o=d0(r),l=await fl(e,fv,"getBlock")({blockTag:"latest"}),u={...t,from:o.address};if(void 0===s&&(u.nonce=await fl(e,fT,"getTransactionCount")({address:o.address,blockTag:"pending"})),void 0===i)try{u.type=fk(u)}catch{u.type="bigint"==typeof l.baseFeePerGas?"eip1559":"legacy"}if("eip1559"===u.type){let{maxFeePerGas:r,maxPriorityFeePerGas:a}=await f_(e,{block:l,chain:n,request:u});if(void 0===t.maxPriorityFeePerGas&&t.maxFeePerGas&&t.maxFeePerGas<a)throw new fp({maxPriorityFeePerGas:a});u.maxPriorityFeePerGas=a,u.maxFeePerGas=r}else{if(void 0!==t.maxFeePerGas||void 0!==t.maxPriorityFeePerGas)throw new fd;let{gasPrice:r}=await f_(e,{block:l,chain:n,request:u,type:"legacy"});u.gasPrice=r}return void 0===a&&(u.gas=await fl(e,fI,"estimateGas")({...u,account:{address:o.address,type:"json-rpc"}})),fu(u),u}async function fA(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]})}async function fS(e,t){let{account:r=e.account,chain:n=e.chain,accessList:a,data:s,gas:i,gasPrice:o,maxFeePerGas:l,maxPriorityFeePerGas:u,nonce:c,to:d,value:p,...f}=t;if(!r)throw new pF({docsPath:"/docs/actions/wallet/sendTransaction"});let h=d0(r);try{let r;if(fu(t),null!==n&&(r=await fl(e,pr,"getChainId")({}),pq({currentChainId:r,chain:n})),"local"===h.type){let t=await fl(e,fP,"prepareTransactionRequest")({account:h,accessList:a,chain:n,data:s,gas:i,gasPrice:o,maxFeePerGas:l,maxPriorityFeePerGas:u,nonce:c,to:d,value:p,...f});r||(r=await fl(e,pr,"getChainId")({}));let m=n?.serializers?.transaction,y=await h.signTransaction({...t,chainId:r},{serializer:m});return await fl(e,fA,"sendRawTransaction")({serializedTransaction:y})}let m=e.chain?.formatters?.transactionRequest?.format,y=(m||fi)({...fn(f,{format:m}),accessList:a,data:s,from:h.address,gas:i,gasPrice:o,maxFeePerGas:l,maxPriorityFeePerGas:u,nonce:c,to:d,value:p});return await e.request({method:"eth_sendTransaction",params:[y]})}catch(e){throw function(e,{docsPath:t,...r}){return new ft((()=>{let t=fr(e,r);return t instanceof p5?e:t})(),{docsPath:t,...r})}(e,{...t,account:h,chain:t.chain||void 0})}}let fO=new TextEncoder;function f$(e,t={}){return"number"==typeof e||"bigint"==typeof e?fN(pd(e,t)):"boolean"==typeof e?function(e,t={}){let r=new Uint8Array(1);return(r[0]=Number(e),"number"==typeof t.size)?(d7(r,{size:t.size}),ps(r,{size:t.size})):r}(e,t):d4(e)?fN(e,t):fM(e,t)}let fC={zero:48,nine:57,A:65,F:70,a:97,f:102};function fj(e){return e>=fC.zero&&e<=fC.nine?e-fC.zero:e>=fC.A&&e<=fC.F?e-(fC.A-10):e>=fC.a&&e<=fC.f?e-(fC.a-10):void 0}function fN(e,t={}){let r=e;t.size&&(d7(r,{size:t.size}),r=ps(r,{dir:"right",size:t.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);let a=n.length/2,s=new Uint8Array(a);for(let e=0,t=0;e<a;e++){let r=fj(n.charCodeAt(t++)),a=fj(n.charCodeAt(t++));if(void 0===r||void 0===a)throw new d5(`Invalid byte sequence ("${n[t-2]}${n[t-1]}" in "${n}").`);s[e]=16*r+a}return s}function fM(e,t={}){let r=fO.encode(e);return"number"==typeof t.size?(d7(r,{size:t.size}),ps(r,{dir:"right",size:t.size})):r}function fR(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`Wrong positive integer: ${e}`)}function fB(e,...t){if(!(e instanceof Uint8Array))throw Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function fF(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function fU(e,t){fB(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}let fD=BigInt(0x100000000-1),fz=BigInt(32),fq=(e,t,r)=>e<<r|t>>>32-r,fL=(e,t,r)=>t<<r|e>>>32-r,fZ=(e,t,r)=>t<<r-32|e>>>64-r,fV=(e,t,r)=>e<<r-32|t>>>64-r;var fG=r(77598),fH=r.t(fG,2);let fK=fH&&"object"==typeof fH&&"webcrypto"in fH?fG.webcrypto:void 0,fW=e=>e instanceof Uint8Array,fJ=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),fY=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),fX=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([0x11223344]).buffer)[0])throw Error("Non little-endian hardware is not supported");function fQ(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}(e)),!fW(e))throw Error(`expected Uint8Array, got ${typeof e}`);return e}(e,t)=>t.toString(16).padStart(2,"0");class f0{clone(){return this._cloneInto()}}function f1(e){let t=t=>e().update(fQ(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function f2(e=32){if(fK&&"function"==typeof fK.getRandomValues)return fK.getRandomValues(new Uint8Array(e));throw Error("crypto.getRandomValues must be defined")}let[f6,f5,f8]=[[],[],[]],f3=BigInt(0),f4=BigInt(1),f9=BigInt(2),f7=BigInt(7),he=BigInt(256),ht=BigInt(113);for(let e=0,t=f4,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],f6.push(2*(5*n+r)),f5.push((e+1)*(e+2)/2%64);let a=f3;for(let e=0;e<7;e++)(t=(t<<f4^(t>>f7)*ht)%he)&f9&&(a^=f4<<(f4<<BigInt(e))-f4);f8.push(a)}let[hr,hn]=function(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let a=0;a<e.length;a++){let{h:s,l:i}=function(e,t=!1){return t?{h:Number(e&fD),l:Number(e>>fz&fD)}:{h:0|Number(e>>fz&fD),l:0|Number(e&fD)}}(e[a],t);[r[a],n[a]]=[s,i]}return[r,n]}(f8,!0),ha=(e,t,r)=>r>32?fZ(e,t,r):fq(e,t,r),hs=(e,t,r)=>r>32?fV(e,t,r):fL(e,t,r);class hi extends f0{constructor(e,t,r,n=!1,a=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,fR(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=fJ(this.state)}keccak(){!function(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,a=(t+2)%10,s=r[a],i=r[a+1],o=ha(s,i,1)^r[n],l=hs(s,i,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=o,e[t+r+1]^=l}let t=e[2],a=e[3];for(let r=0;r<24;r++){let n=f5[r],s=ha(t,a,n),i=hs(t,a,n),o=f6[r];t=e[o],a=e[o+1],e[o]=s,e[o+1]=i}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=hr[n],e[1]^=hn[n]}r.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){fF(this);let{blockLen:t,state:r}=this,n=(e=fQ(e)).length;for(let a=0;a<n;){let s=Math.min(t-this.pos,n-a);for(let t=0;t<s;t++)r[this.pos++]^=e[a++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,(128&t)!=0&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){fF(this,!1),fB(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,a=e.length;n<a;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,a-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return fR(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(fU(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:a,enableXOF:s}=this;return e||(e=new hi(t,r,n,s,a)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=a,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}let ho=f1(()=>new hi(136,1,32));function hl(e,t){let r=ho(d4(e,{strict:!1})?f$(e):e);return"bytes"===(t||"hex")?r:pl(r)}function hu(e,t){let r=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),n=hl(fM(r),"bytes"),a=(t?r.substring(`${t}0x`.length):r).split("");for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&a[e]&&(a[e]=a[e].toUpperCase()),(15&n[e>>1])>=8&&a[e+1]&&(a[e+1]=a[e+1].toUpperCase());return`0x${a.join("")}`}async function hc(e){return e.account?.type==="local"?[e.account.address]:(await e.request({method:"eth_accounts"})).map(e=>hu(e))}async function hd(e){return await e.request({method:"wallet_getPermissions"})}async function hp(e){return(await e.request({method:"eth_requestAccounts"})).map(e=>(function(e,t){if(!p$(e))throw new pS({address:e});return hu(e,void 0)})(e))}async function hf(e,t){return e.request({method:"wallet_requestPermissions",params:[t]})}async function hh(e,{account:t=e.account,message:r}){if(!t)throw new pF({docsPath:"/docs/actions/wallet/signMessage"});let n=d0(t);if("local"===n.type)return n.signMessage({message:r});let a="string"==typeof r?pf(r):r.raw instanceof Uint8Array?pl(r.raw):r.raw;return e.request({method:"personal_sign",params:[a,n.address]})}async function hm(e,t){let{account:r=e.account,chain:n=e.chain,...a}=t;if(!r)throw new pF({docsPath:"/docs/actions/wallet/signTransaction"});let s=d0(r);fu({account:s,...t});let i=await fl(e,pr,"getChainId")({});null!==n&&pq({currentChainId:i,chain:n});let o=n?.formatters||e.chain?.formatters,l=o?.transactionRequest?.format||fi;return"local"===s.type?s.signTransaction({...a,chainId:i},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...l(a),chainId:pd(i),from:s.address}]})}let hy=(e,t,r)=>JSON.stringify(e,(e,r)=>{let n="bigint"==typeof r?r.toString():r;return"function"==typeof t?t(e,n):n},r),hg=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,hb=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function hv({domain:e,message:t,primaryType:r,types:n}){let a=(e,t)=>{for(let r of e){let{name:e,type:s}=r,i=t[e],o=s.match(hb);if(o&&("number"==typeof i||"bigint"==typeof i)){let[e,t,r]=o;pd(i,{signed:"int"===t,size:parseInt(r)/8})}if("address"===s&&"string"==typeof i&&!p$(i))throw new pS({address:i});let l=s.match(hg);if(l){let[e,t]=l;if(t&&d9(i)!==parseInt(t))throw new pE({expectedSize:parseInt(t),givenSize:d9(i)})}let u=n[s];u&&a(u,i)}};n.EIP712Domain&&e&&a(n.EIP712Domain,e),"EIP712Domain"!==r&&a(n[r],t)}function hw({domain:e}){return["string"==typeof e?.name&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},"number"==typeof e?.chainId&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}async function hx(e,{account:t=e.account,domain:r,message:n,primaryType:a,types:s}){if(!t)throw new pF({docsPath:"/docs/actions/wallet/signTypedData"});let i=d0(t),o={EIP712Domain:hw({domain:r}),...s};if(hv({domain:r,message:n,primaryType:a,types:o}),"local"===i.type)return i.signTypedData({domain:r,primaryType:a,types:o,message:n});let l=hy({domain:r??{},primaryType:a,types:o,message:n},(e,t)=>d4(t)?t.toLowerCase():t);return e.request({method:"eth_signTypedData_v4",params:[i.address,l]})}async function h_(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:pd(t)}]})}async function hE(e,t){return await e.request({method:"wallet_watchAsset",params:t})}let hI=/^tuple(?<array>(\[(\d*)\])*)$/;function hT(e){let t="",r=e.length;for(let n=0;n<r;n++)t+=function e(t){let r=t.type;if(hI.test(t.type)&&"components"in t){r="(";let n=t.components.length;for(let a=0;a<n;a++)r+=e(t.components[a]),a<n-1&&(r+=", ");let a=function(e,t){let r=e.exec(t);return r?.groups}(hI,t.type);return r+=`)${a?.array??""}`,e({...t,type:r})}return("indexed"in t&&t.indexed&&(r=`${r} indexed`),t.name)?`${r} ${t.name}`:r}(e[n]),n!==r-1&&(t+=", ");return t}let hk=e=>(function(e){let t=!0,r="",n=0,a="",s=!1;for(let i=0;i<e.length;i++){let o=e[i];if(["(",")",","].includes(o)&&(t=!0),"("===o&&n++,")"===o&&n--,t){if(0===n){if(" "===o&&["event","function",""].includes(a))a="";else if(a+=o,")"===o){s=!0;break}continue}if(" "===o){","!==e[i-1]&&","!==r&&",("!==r&&(r="",t=!1);continue}a+=o,r+=o}}if(!s)throw new d5("Unable to normalize signature.");return a})("string"==typeof e?e:function(e){if("function"===e.type)return`function ${e.name}(${hT(e.inputs)})${e.stateMutability&&"nonpayable"!==e.stateMutability?` ${e.stateMutability}`:""}${e.outputs.length?` returns (${hT(e.outputs)})`:""}`;if("event"===e.type)return`event ${e.name}(${hT(e.inputs)})`;if("error"===e.type)return`error ${e.name}(${hT(e.inputs)})`;if("constructor"===e.type)return`constructor(${hT(e.inputs)})${"payable"===e.stateMutability?" payable":""}`;if("fallback"===e.type)return"fallback()";return"receive() external payable"}(e)),hP=e=>hl(f$(e)),hA=e=>pC(hP(hk(e)),0,4),hS=e=>hk(e),hO=e=>hl(f$(e)),h$=e=>hO(hS(e));async function hC(e,{abi:t,address:r,args:n,dataSuffix:a,functionName:s,...i}){let o=function({abi:e,args:t,functionName:r}){let n=e[0];if(r&&!(n=function({abi:e,args:t=[],name:r}){let n,a=d4(r,{strict:!1}),s=e.filter(e=>a?"function"===e.type?hA(e)===r:"event"===e.type&&h$(e)===r:"name"in e&&e.name===r);if(0!==s.length){if(1===s.length)return s[0];for(let e of s){if("inputs"in e){if(!t||0===t.length){if(!e.inputs||0===e.inputs.length)return e;continue}if(e.inputs&&0!==e.inputs.length&&e.inputs.length===t.length&&t.every((t,r)=>{let n="inputs"in e&&e.inputs[r];return!!n&&function e(t,r){let n=typeof t,a=r.type;switch(a){case"address":return p$(t);case"bool":return"boolean"===n;case"function":case"string":return"string"===n;default:if("tuple"===a&&"components"in r)return Object.values(r.components).every((r,n)=>e(Object.values(t)[n],r));if(/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(a))return"number"===n||"bigint"===n;if(/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(a))return"string"===n||t instanceof Uint8Array;if(/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(a))return Array.isArray(t)&&t.every(t=>e(t,{...r,type:a.replace(/(\[[0-9]{0,}\])$/,"")}));return!1}}(t,n)})){if(n&&"inputs"in n&&n.inputs){let r=function e(t,r,n){for(let a in t){let s=t[a],i=r[a];if("tuple"===s.type&&"tuple"===i.type&&"components"in s&&"components"in i)return e(s.components,i.components,n[a]);let o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")||(o.includes("address")&&o.includes("string")||o.includes("address")&&o.includes("bytes"))&&p$(n[a]))return o}}(e.inputs,n.inputs,t);if(r)throw new p_({abiItem:e,type:r[0]},{abiItem:n,type:r[1]})}n=e}}}return n||s[0]}}({abi:e,args:t,name:r})))throw new px(r,{docsPath:"/docs/contract/encodeFunctionData"});if("function"!==n.type)throw new px(void 0,{docsPath:"/docs/contract/encodeFunctionData"});return pA([hA(pm(n)),("inputs"in n&&n.inputs?pM(n.inputs,t??[]):void 0)??"0x"])}({abi:t,args:n,functionName:s});return await fl(e,fS,"sendTransaction")({data:`${o}${a?a.replace("0x",""):""}`,to:r,...i})}function hj(e){return{addChain:t=>ph(e,t),deployContract:t=>(function(e,{abi:t,args:r,bytecode:n,...a}){let s=function({abi:e,args:t,bytecode:r}){if(!t||0===t.length)return r;let n=e.find(e=>"type"in e&&"constructor"===e.type);if(!n)throw new py({docsPath:pB});if(!("inputs"in n)||!n.inputs||0===n.inputs.length)throw new pg({docsPath:pB});return pA([r,pM(n.inputs,t)])}({abi:t,args:r,bytecode:n});return fS(e,{...a,data:s})})(e,t),getAddresses:()=>hc(e),getChainId:()=>pr(e),getPermissions:()=>hd(e),prepareTransactionRequest:t=>fP(e,t),requestAddresses:()=>hp(e),requestPermissions:t=>hf(e,t),sendRawTransaction:t=>fA(e,t),sendTransaction:t=>fS(e,t),signMessage:t=>hh(e,t),signTransaction:t=>hm(e,t),signTypedData:t=>hx(e,t),switchChain:t=>h_(e,t),watchAsset:t=>hE(e,t),writeContract:t=>hC(e,t)}}class hN extends d5{constructor({body:e,details:t,headers:r,status:n,url:a}){super("HTTP request failed.",{details:t,metaMessages:[n&&`Status: ${n}`,`URL: ${d2(a)}`,e&&`Request body: ${hy(e)}`].filter(Boolean)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=r,this.status=n,this.url=a}}class hM extends d5{constructor({body:e,details:t,url:r}){super("WebSocket request failed.",{details:t,metaMessages:[`URL: ${d2(r)}`,`Request body: ${hy(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebSocketRequestError"})}}class hR extends d5{constructor({body:e,error:t,url:r}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${d2(r)}`,`Request body: ${hy(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code}}class hB extends d5{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${d2(t)}`,`Request body: ${hy(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TimeoutError"})}}class hF extends d5{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro"})}}let hU=new Map;function hD(e,{errorInstance:t=Error("timed out"),timeout:r,signal:n}){return new Promise((a,s)=>{(async()=>{let i;try{let o=new AbortController;r>0&&(i=setTimeout(()=>{n?o.abort():s(t)},r)),a(await e({signal:o?.signal}))}catch(e){"AbortError"===e.name&&s(t),s(e)}finally{clearTimeout(i)}})()})}let hz=0;async function hq(e,{body:t,fetchOptions:r={},timeout:n=1e4}){let{headers:a,method:s,signal:i}=r;try{let o,l=await hD(async({signal:o})=>await fetch(e,{...r,body:Array.isArray(t)?hy(t.map(e=>({jsonrpc:"2.0",id:e.id??hz++,...e}))):hy({jsonrpc:"2.0",id:t.id??hz++,...t}),headers:{...a,"Content-Type":"application/json"},method:s||"POST",signal:i||(n>0?o:void 0)}),{errorInstance:new hB({body:t,url:e}),timeout:n,signal:!0});if(o=l.headers.get("Content-Type")?.startsWith("application/json")?await l.json():await l.text(),!l.ok)throw new hN({body:t,details:hy(o.error)||l.statusText,headers:l.headers,status:l.status,url:e});return o}catch(r){if(r instanceof hN||r instanceof hB)throw r;throw new hN({body:t,details:r.message,url:e})}}let hL={http:hq,webSocket:function(e,{body:t,onResponse:r}){if(e.readyState===e.CLOSED||e.readyState===e.CLOSING)throw new hM({body:t,url:e.url,details:"Socket is closed."});let n=hz++,a=({data:s})=>{let i=JSON.parse(s);("number"!=typeof i.id||n===i.id)&&(r?.(i),"eth_subscribe"===t.method&&"string"==typeof i.result&&e.subscriptions.set(i.result,a),"eth_unsubscribe"===t.method&&e.subscriptions.delete(t.params?.[0]))};return e.requests.set(n,a),e.send(JSON.stringify({jsonrpc:"2.0",...t,id:n})),e}};class hZ extends d5{constructor(e,{code:t,docsPath:r,metaMessages:n,shortMessage:a}){super(a,{cause:e,docsPath:r,metaMessages:n||e?.metaMessages}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.code=e instanceof hR?e.code:t??-1}}class hV extends hZ{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderRpcError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class hG extends hZ{constructor(e){super(e,{code:hG.code,shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ParseRpcError"})}}Object.defineProperty(hG,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class hH extends hZ{constructor(e){super(e,{code:hH.code,shortMessage:"JSON is not a valid request object."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidRequestRpcError"})}}Object.defineProperty(hH,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class hK extends hZ{constructor(e){super(e,{code:hK.code,shortMessage:"The method does not exist / is not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotFoundRpcError"})}}Object.defineProperty(hK,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class hW extends hZ{constructor(e){super(e,{code:hW.code,shortMessage:"Invalid parameters were provided to the RPC method.\nDouble check you have provided the correct parameters."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParamsRpcError"})}}Object.defineProperty(hW,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class hJ extends hZ{constructor(e){super(e,{code:hJ.code,shortMessage:"An internal error was received."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InternalRpcError"})}}Object.defineProperty(hJ,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class hY extends hZ{constructor(e){super(e,{code:hY.code,shortMessage:"Missing or invalid parameters.\nDouble check you have provided the correct parameters."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidInputRpcError"})}}Object.defineProperty(hY,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class hX extends hZ{constructor(e){super(e,{code:hX.code,shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(hX,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class hQ extends hZ{constructor(e){super(e,{code:hQ.code,shortMessage:"Requested resource not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceUnavailableRpcError"})}}Object.defineProperty(hQ,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class h0 extends hZ{constructor(e){super(e,{code:h0.code,shortMessage:"Transaction creation failed."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionRejectedRpcError"})}}Object.defineProperty(h0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class h1 extends hZ{constructor(e){super(e,{code:h1.code,shortMessage:"Method is not implemented."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotSupportedRpcError"})}}Object.defineProperty(h1,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class h2 extends hZ{constructor(e){super(e,{code:h2.code,shortMessage:"Request exceeds defined limit."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"LimitExceededRpcError"})}}Object.defineProperty(h2,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class h6 extends hZ{constructor(e){super(e,{code:h6.code,shortMessage:"Version of JSON-RPC protocol is not supported."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"JsonRpcVersionUnsupportedError"})}}Object.defineProperty(h6,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class h5 extends hV{constructor(e){super(e,{code:h5.code,shortMessage:"User rejected the request."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UserRejectedRequestError"})}}Object.defineProperty(h5,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class h8 extends hV{constructor(e){super(e,{code:h8.code,shortMessage:"The requested method and/or account has not been authorized by the user."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnauthorizedProviderError"})}}Object.defineProperty(h8,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class h3 extends hV{constructor(e){super(e,{code:h3.code,shortMessage:"The Provider does not support the requested method."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnsupportedProviderMethodError"})}}Object.defineProperty(h3,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class h4 extends hV{constructor(e){super(e,{code:h4.code,shortMessage:"The Provider is disconnected from all chains."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderDisconnectedError"})}}Object.defineProperty(h4,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class h9 extends hV{constructor(e){super(e,{code:h9.code,shortMessage:"The Provider is not connected to the requested chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDisconnectedError"})}}Object.defineProperty(h9,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class h7 extends hV{constructor(e){super(e,{code:h7.code,shortMessage:"An error occurred when attempting to switch chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainError"})}}Object.defineProperty(h7,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class me extends hZ{constructor(e){super(e,{shortMessage:"An unknown RPC error occurred."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownRpcError"})}}async function mt(e){return new Promise(t=>setTimeout(t,e))}let mr=e=>"code"in e?-1!==e.code&&-32004!==e.code&&-32005!==e.code&&-32042!==e.code&&-32603!==e.code:e instanceof hN&&!!e.status&&403!==e.status&&408!==e.status&&413!==e.status&&429!==e.status&&500!==e.status&&502!==e.status&&503!==e.status&&504!==e.status;class mn extends f0{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=fY(this.buffer)}update(e){fF(this);let{view:t,buffer:r,blockLen:n}=this,a=(e=fQ(e)).length;for(let s=0;s<a;){let i=Math.min(n-this.pos,a-s);if(i===n){let t=fY(e);for(;n<=a-s;s+=n)this.process(t,s);continue}r.set(e.subarray(s,s+i),this.pos),this.pos+=i,s+=i,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){fF(this),fU(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:a}=this,{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(r,0),s=0);for(let e=s;e<n;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let a=BigInt(32),s=BigInt(0xffffffff),i=Number(r>>a&s),o=Number(r&s),l=4*!!n,u=4*!n;e.setUint32(t+l,i,n),e.setUint32(t+u,o,n)}(r,n-8,BigInt(8*this.length),a),this.process(r,0);let i=fY(e),o=this.outputLen;if(o%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=o/4,u=this.get();if(l>u.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)i.setUint32(4*e,u[e],a)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:a,destroyed:s,pos:i}=this;return e.length=n,e.pos=i,e.finished=a,e.destroyed=s,n%t&&e.buffer.set(r),e}}let ma=(e,t,r)=>e&t^~e&r,ms=(e,t,r)=>e&t^e&r^t&r,mi=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),mo=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),ml=new Uint32Array(64);class mu extends mn{constructor(){super(64,32,8,!1),this.A=0|mo[0],this.B=0|mo[1],this.C=0|mo[2],this.D=0|mo[3],this.E=0|mo[4],this.F=0|mo[5],this.G=0|mo[6],this.H=0|mo[7]}get(){let{A:e,B:t,C:r,D:n,E:a,F:s,G:i,H:o}=this;return[e,t,r,n,a,s,i,o]}set(e,t,r,n,a,s,i,o){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|a,this.F=0|s,this.G=0|i,this.H=0|o}process(e,t){for(let r=0;r<16;r++,t+=4)ml[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=ml[e-15],r=ml[e-2],n=fX(t,7)^fX(t,18)^t>>>3,a=fX(r,17)^fX(r,19)^r>>>10;ml[e]=a+ml[e-7]+n+ml[e-16]|0}let{A:r,B:n,C:a,D:s,E:i,F:o,G:l,H:u}=this;for(let e=0;e<64;e++){let t=u+(fX(i,6)^fX(i,11)^fX(i,25))+ma(i,o,l)+mi[e]+ml[e]|0,c=(fX(r,2)^fX(r,13)^fX(r,22))+ms(r,n,a)|0;u=l,l=o,o=i,i=s+t|0,s=a,a=n,n=r,r=t+c|0}r=r+this.A|0,n=n+this.B|0,a=a+this.C|0,s=s+this.D|0,i=i+this.E|0,o=o+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,n,a,s,i,o,l,u)}roundClean(){ml.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let mc=f1(()=>new mu),md=(BigInt(0),BigInt(1)),mp=BigInt(2),mf=e=>e instanceof Uint8Array,mh=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function mm(e){if(!mf(e))throw Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=mh[e[r]];return t}function my(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function mg(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){let n=2*t,a=Number.parseInt(e.slice(n,n+2),16);if(Number.isNaN(a)||a<0)throw Error("Invalid byte sequence");r[t]=a}return r}function mb(e){return my(mm(e))}function mv(e){if(!mf(e))throw Error("Uint8Array expected");return my(mm(Uint8Array.from(e).reverse()))}function mw(e,t){return mg(e.toString(16).padStart(2*t,"0"))}function mx(e,t){return mw(e,t).reverse()}function m_(e,t,r){let n;if("string"==typeof t)try{n=mg(t)}catch(r){throw Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else if(mf(t))n=Uint8Array.from(t);else throw Error(`${e} must be hex string or Uint8Array`);let a=n.length;if("number"==typeof r&&a!==r)throw Error(`${e} expected ${r} bytes, got ${a}`);return n}function mE(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!mf(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}let mI=e=>(mp<<BigInt(e-1))-md,mT=e=>new Uint8Array(e),mk=e=>Uint8Array.from(e);function mP(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=mT(e),a=mT(e),s=0,i=()=>{n.fill(1),a.fill(0),s=0},o=(...e)=>r(a,n,...e),l=(e=mT())=>{a=o(mk([0]),e),n=o(),0!==e.length&&(a=o(mk([1]),e),n=o())},u=()=>{if(s++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=o()).slice();r.push(t),e+=n.length}return mE(...r)};return(e,t)=>{let r;for(i(),l(e);!(r=t(u()));)l();return i(),r}}let mA={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function mS(e,t,r={}){let n=(t,r,n)=>{let a=mA[r];if("function"!=typeof a)throw Error(`Invalid validator "${r}", expected function`);let s=e[t];if((!n||void 0!==s)&&!a(s,e))throw Error(`Invalid param ${String(t)}=${s} (${typeof s}), expected ${r}`)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}let mO=BigInt(0),m$=BigInt(1),mC=BigInt(2),mj=BigInt(3),mN=BigInt(4),mM=BigInt(5),mR=BigInt(8);function mB(e,t){let r=e%t;return r>=mO?r:t+r}function mF(e,t,r){let n=e;for(;t-- >mO;)n*=n,n%=r;return n}function mU(e,t){if(e===mO||t<=mO)throw Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=mB(e,t),n=t,a=mO,s=m$,i=m$,o=mO;for(;r!==mO;){let e=n/r,t=n%r,l=a-i*e,u=s-o*e;n=r,r=t,a=i,s=o,i=l,o=u}if(n!==m$)throw Error("invert: does not exist");return mB(a,t)}BigInt(9),BigInt(16);let mD=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function mz(e,t){let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function mq(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function mL(e){let t=mq(e);return t+Math.ceil(t/2)}class mZ extends f0{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");fR(e.outputLen),fR(e.blockLen)}(e);let r=fQ(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,a=new Uint8Array(n);a.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<a.length;e++)a[e]^=54;this.iHash.update(a),this.oHash=e.create();for(let e=0;e<a.length;e++)a[e]^=106;this.oHash.update(a),a.fill(0)}update(e){return fF(this),this.iHash.update(e),this}digestInto(e){fF(this),fB(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:a,blockLen:s,outputLen:i}=this;return e.finished=n,e.destroyed=a,e.blockLen=s,e.outputLen=i,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let mV=(e,t,r)=>new mZ(e,t).update(r).digest();mV.create=(e,t)=>new mZ(e,t);let mG=BigInt(0),mH=BigInt(1);function mK(e){return mS(e.Fp,mD.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),mS(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...mz(e.n,e.nBitLength),...e,...{p:e.Fp.ORDER}})}let{Ph:mW,aT:mJ}=ee,mY={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){let{Err:t}=mY;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(128&n[0])throw new t("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:mW(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=mY,r="string"==typeof e?mJ(e):e;if(!(r instanceof Uint8Array))throw Error("ui8a expected");let n=r.length;if(n<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:a,l:s}=mY._parseInt(r.subarray(2)),{d:i,l:o}=mY._parseInt(s);if(o.length)throw new t("Invalid signature: left bytes after parsing");return{r:a,s:i}},hexFromSig(e){let t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{let t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(r(e.s)),a=t(r(e.r)),s=n.length/2,i=a.length/2,o=r(s),l=r(i);return`30${r(i+s+4)}02${l}${a}02${o}${n}`}},mX=BigInt(0),mQ=BigInt(1),m0=(BigInt(2),BigInt(3)),m1=(BigInt(4),BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f")),m2=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),m6=BigInt(1),m5=BigInt(2),m8=(e,t)=>(e+t/m5)/t,m3=function(e,t,r=!1,n={}){if(e<=mO)throw Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:a,nByteLength:s}=mz(e,t);if(s>2048)throw Error("Field lengths over 2048 bytes are not supported");let i=function(e){if(e%mN===mj){let t=(e+m$)/mN;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%mR===mM){let t=(e-mM)/mR;return function(e,r){let n=e.mul(r,mC),a=e.pow(n,t),s=e.mul(r,a),i=e.mul(e.mul(s,mC),a),o=e.mul(s,e.sub(i,e.ONE));if(!e.eql(e.sqr(o),r))throw Error("Cannot find square root");return o}}return function(e){let t,r,n,a=(e-m$)/mC;for(t=e-m$,r=0;t%mC===mO;t/=mC,r++);for(n=mC;n<e&&function(e,t,r){if(r<=mO||t<mO)throw Error("Expected power/modulo > 0");if(r===m$)return mO;let n=m$;for(;t>mO;)t&m$&&(n=n*e%r),e=e*e%r,t>>=m$;return n}(n,a,e)!==e-m$;n++);if(1===r){let t=(e+m$)/mN;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let s=(t+m$)/mC;return function(e,i){if(e.pow(i,a)===e.neg(e.ONE))throw Error("Cannot find square root");let o=r,l=e.pow(e.mul(e.ONE,n),t),u=e.pow(i,s),c=e.pow(i,t);for(;!e.eql(c,e.ONE);){if(e.eql(c,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(c);t<o&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,m$<<BigInt(o-t-1));l=e.sqr(r),u=e.mul(u,r),c=e.mul(c,l),o=t}return u}}(e)}(e),o=Object.freeze({ORDER:e,BITS:a,BYTES:s,MASK:mI(a),ZERO:mO,ONE:m$,create:t=>mB(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error(`Invalid field element: expected bigint, got ${typeof t}`);return mO<=t&&t<e},is0:e=>e===mO,isOdd:e=>(e&m$)===m$,neg:t=>mB(-t,e),eql:(e,t)=>e===t,sqr:t=>mB(t*t,e),add:(t,r)=>mB(t+r,e),sub:(t,r)=>mB(t-r,e),mul:(t,r)=>mB(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<mO)throw Error("Expected power > 0");if(r===mO)return e.ONE;if(r===m$)return t;let n=e.ONE,a=t;for(;r>mO;)r&m$&&(n=e.mul(n,a)),a=e.sqr(a),r>>=m$;return n})(o,e,t),div:(t,r)=>mB(t*mU(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>mU(t,e),sqrt:n.sqrt||(e=>i(o,e)),invertBatch:e=>(function(e,t){let r=Array(t.length),n=t.reduce((t,n,a)=>e.is0(n)?t:(r[a]=t,e.mul(t,n)),e.ONE),a=e.inv(n);return t.reduceRight((t,n,a)=>e.is0(n)?t:(r[a]=e.mul(t,r[a]),e.mul(t,n)),a),r})(o,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?mx(e,s):mw(e,s),fromBytes:e=>{if(e.length!==s)throw Error(`Fp.fromBytes: expected ${s}, got ${e.length}`);return r?mv(e):mb(e)}});return Object.freeze(o)}(m1,void 0,void 0,{sqrt:function(e){let t=BigInt(3),r=BigInt(6),n=BigInt(11),a=BigInt(22),s=BigInt(23),i=BigInt(44),o=BigInt(88),l=e*e*e%m1,u=l*l*e%m1,c=mF(u,t,m1)*u%m1,d=mF(c,t,m1)*u%m1,p=mF(d,m5,m1)*l%m1,f=mF(p,n,m1)*p%m1,h=mF(f,a,m1)*f%m1,m=mF(h,i,m1)*h%m1,y=mF(m,o,m1)*m%m1,g=mF(y,i,m1)*h%m1,b=mF(g,t,m1)*u%m1,v=mF(b,s,m1)*f%m1,w=mF(v,r,m1)*l%m1,x=mF(w,m5,m1);if(!m3.eql(m3.sqr(x),e))throw Error("Cannot find square root");return x}}),m4=function(e,t){let r=t=>(function(e){let t=function(e){let t=mK(e);return mS(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:n}=t,a=r.BYTES+1,s=2*r.BYTES+1;function i(e){return mB(e,n)}let{ProjectivePoint:o,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:c}=function(e){let t=function(e){let t=mK(e);mS(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a}=t;if(r){if(!n.eql(a,n.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=t.toBytes||((e,t,n)=>{let a=t.toAffine();return mE(Uint8Array.from([4]),r.toBytes(a.x),r.toBytes(a.y))}),a=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function s(e){let{a:n,b:a}=t,s=r.sqr(e),i=r.mul(s,e);return r.add(r.add(i,r.mul(e,n)),a)}if(!r.eql(r.sqr(t.Gy),s(t.Gx)))throw Error("bad generator point: equation left != right");function i(e){return"bigint"==typeof e&&mX<e&&e<t.n}function o(e){if(!i(e))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){let r,{allowedPrivateKeyLengths:n,nByteLength:a,wrapPrivateKey:s,n:i}=t;if(n&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=mm(e)),"string"!=typeof e||!n.includes(e.length))throw Error("Invalid key");e=e.padStart(2*a,"0")}try{r="bigint"==typeof e?e:mb(m_("private key",e,a))}catch(t){throw Error(`private key must be ${a} bytes, hex or bigint, not ${typeof e}`)}return s&&(r=mB(r,i)),o(r),r}let u=new Map;function c(e){if(!(e instanceof d))throw Error("ProjectivePoint expected")}class d{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required")}static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof d)throw Error("projective point not allowed");let a=e=>r.eql(e,r.ZERO);return a(t)&&a(n)?d.ZERO:new d(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(d.fromAffine)}static fromHex(e){let t=d.fromAffine(a(m_("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return d.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw Error("bad point: ZERO")}let{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw Error("bad point: x or y not FE");let a=r.sqr(n),i=s(e);if(!r.eql(a,i))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){c(e);let{px:t,py:n,pz:a}=this,{px:s,py:i,pz:o}=e,l=r.eql(r.mul(t,o),r.mul(s,a)),u=r.eql(r.mul(n,o),r.mul(i,a));return l&&u}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:n}=t,a=r.mul(n,m0),{px:s,py:i,pz:o}=this,l=r.ZERO,u=r.ZERO,c=r.ZERO,p=r.mul(s,s),f=r.mul(i,i),h=r.mul(o,o),m=r.mul(s,i);return m=r.add(m,m),c=r.mul(s,o),c=r.add(c,c),l=r.mul(e,c),u=r.mul(a,h),u=r.add(l,u),l=r.sub(f,u),u=r.add(f,u),u=r.mul(l,u),l=r.mul(m,l),c=r.mul(a,c),h=r.mul(e,h),m=r.sub(p,h),m=r.mul(e,m),m=r.add(m,c),c=r.add(p,p),p=r.add(c,p),p=r.add(p,h),p=r.mul(p,m),u=r.add(u,p),h=r.mul(i,o),h=r.add(h,h),p=r.mul(h,m),l=r.sub(l,p),c=r.mul(h,f),c=r.add(c,c),new d(l,u,c=r.add(c,c))}add(e){c(e);let{px:n,py:a,pz:s}=this,{px:i,py:o,pz:l}=e,u=r.ZERO,p=r.ZERO,f=r.ZERO,h=t.a,m=r.mul(t.b,m0),y=r.mul(n,i),g=r.mul(a,o),b=r.mul(s,l),v=r.add(n,a),w=r.add(i,o);v=r.mul(v,w),w=r.add(y,g),v=r.sub(v,w),w=r.add(n,s);let x=r.add(i,l);return w=r.mul(w,x),x=r.add(y,b),w=r.sub(w,x),x=r.add(a,s),u=r.add(o,l),x=r.mul(x,u),u=r.add(g,b),x=r.sub(x,u),f=r.mul(h,w),u=r.mul(m,b),f=r.add(u,f),u=r.sub(g,f),f=r.add(g,f),p=r.mul(u,f),g=r.add(y,y),g=r.add(g,y),b=r.mul(h,b),w=r.mul(m,w),g=r.add(g,b),b=r.sub(y,b),b=r.mul(h,b),w=r.add(w,b),y=r.mul(g,w),p=r.add(p,y),y=r.mul(x,w),u=r.mul(v,u),u=r.sub(u,y),y=r.mul(v,g),f=r.mul(x,f),new d(u,p,f=r.add(f,y))}subtract(e){return this.add(e.negate())}is0(){return this.equals(d.ZERO)}wNAF(e){return f.wNAFCached(this,u,e,e=>{let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(d.fromAffine)})}multiplyUnsafe(e){let n=d.ZERO;if(e===mX)return n;if(o(e),e===mQ)return this;let{endo:a}=t;if(!a)return f.unsafeLadder(this,e);let{k1neg:s,k1:i,k2neg:l,k2:u}=a.splitScalar(e),c=n,p=n,h=this;for(;i>mX||u>mX;)i&mQ&&(c=c.add(h)),u&mQ&&(p=p.add(h)),h=h.double(),i>>=mQ,u>>=mQ;return s&&(c=c.negate()),l&&(p=p.negate()),p=new d(r.mul(p.px,a.beta),p.py,p.pz),c.add(p)}multiply(e){let n,a;o(e);let{endo:s}=t;if(s){let{k1neg:t,k1:i,k2neg:o,k2:l}=s.splitScalar(e),{p:u,f:c}=this.wNAF(i),{p:p,f:h}=this.wNAF(l);u=f.constTimeNegate(t,u),p=f.constTimeNegate(o,p),p=new d(r.mul(p.px,s.beta),p.py,p.pz),n=u.add(p),a=c.add(h)}else{let{p:t,f:r}=this.wNAF(e);n=t,a=r}return d.normalizeZ([n,a])[0]}multiplyAndAddUnsafe(e,t,r){let n=d.BASE,a=(e,t)=>t!==mX&&t!==mQ&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),s=a(this,t).add(a(e,r));return s.is0()?void 0:s}toAffine(e){let{px:t,py:n,pz:a}=this,s=this.is0();null==e&&(e=s?r.ONE:r.inv(a));let i=r.mul(t,e),o=r.mul(n,e),l=r.mul(a,e);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw Error("invZ was invalid");return{x:i,y:o}}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===mQ)return!0;if(r)return r(d,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===mQ?this:r?r(d,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),n(d,this,e)}toHex(e=!0){return mm(this.toRawBytes(e))}}d.BASE=new d(t.Gx,t.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);let p=t.nBitLength,f=function(e,t){let r=(e,t)=>{let r=t.negate();return e?r:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,a=t;for(;r>mG;)r&mH&&(n=n.add(a)),a=a.double(),r>>=mH;return n},precomputeWindow(e,t){let{windows:r,windowSize:a}=n(t),s=[],i=e,o=i;for(let e=0;e<r;e++){o=i,s.push(o);for(let e=1;e<a;e++)o=o.add(i),s.push(o);i=o.double()}return s},wNAF(t,a,s){let{windows:i,windowSize:o}=n(t),l=e.ZERO,u=e.BASE,c=BigInt(2**t-1),d=2**t,p=BigInt(t);for(let e=0;e<i;e++){let t=e*o,n=Number(s&c);s>>=p,n>o&&(n-=d,s+=mH);let i=t+Math.abs(n)-1,f=e%2!=0,h=n<0;0===n?u=u.add(r(f,a[t])):l=l.add(r(h,a[i]))}return{p:l,f:u}},wNAFCached(e,t,r,n){let a=e._WINDOW_SIZE||1,s=t.get(e);return s||(s=this.precomputeWindow(e,a),1!==a&&t.set(e,n(s))),this.wNAF(a,s,r)}}}(d,t.endo?Math.ceil(p/2):p);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:i}}({...t,toBytes(e,t,n){let a=t.toAffine(),s=r.toBytes(a.x),i=mE;return n?i(Uint8Array.from([t.hasEvenY()?2:3]),s):i(Uint8Array.from([4]),s,r.toBytes(a.y))},fromBytes(e){let t=e.length,n=e[0],i=e.subarray(1);if(t===a&&(2===n||3===n)){let e=mb(i);if(!(mX<e&&e<r.ORDER))throw Error("Point is not on curve");let t=u(e),a=r.sqrt(t);return(1&n)==1!=((a&mQ)===mQ)&&(a=r.neg(a)),{x:e,y:a}}if(t===s&&4===n)return{x:r.fromBytes(i.subarray(0,r.BYTES)),y:r.fromBytes(i.subarray(r.BYTES,2*r.BYTES))};throw Error(`Point of length ${t} was invalid. Expected ${a} compressed bytes or ${s} uncompressed bytes`)}}),d=e=>mm(mw(e,t.nByteLength)),p=(e,t,r)=>mb(e.slice(t,r));class f{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new f(p(e=m_("compactSignature",e,2*r),0,r),p(e,r,2*r))}static fromDER(e){let{r:t,s:r}=mY.toSig(m_("DER",e));return new f(t,r)}assertValidity(){if(!c(this.r))throw Error("r must be 0 < r < CURVE.n");if(!c(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new f(this.r,this.s,e)}recoverPublicKey(e){let{r:a,s,recovery:l}=this,u=y(m_("msgHash",e));if(null==l||![0,1,2,3].includes(l))throw Error("recovery id invalid");let c=2===l||3===l?a+t.n:a;if(c>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let p=(1&l)==0?"02":"03",f=o.fromHex(p+d(c)),h=mU(c,n),m=i(-u*h),g=i(s*h),b=o.BASE.multiplyAndAddUnsafe(f,m,g);if(!b)throw Error("point at infinify");return b.assertValidity(),b}hasHighS(){return this.s>n>>mQ}normalizeS(){return this.hasHighS()?new f(this.r,i(-this.s),this.recovery):this}toDERRawBytes(){return mg(this.toDERHex())}toDERHex(){return mY.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return mg(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}function h(e){let t=e instanceof Uint8Array,r="string"==typeof e,n=(t||r)&&e.length;return t?n===a||n===s:r?n===2*a||n===2*s:e instanceof o}let m=t.bits2int||function(e){let r=mb(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},y=t.bits2int_modN||function(e){return i(m(e))},g=mI(t.nBitLength);function b(e){if("bigint"!=typeof e)throw Error("bigint expected");if(!(mX<=e&&e<g))throw Error(`bigint expected < 2^${t.nBitLength}`);return mw(e,t.nByteLength)}let v={lowS:t.lowS,prehash:!1},w={lowS:t.lowS,prehash:!1};return o.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return o.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(h(e))throw Error("first arg must be private key");if(!h(t))throw Error("second arg must be public key");return o.fromHex(t).multiply(l(e)).toRawBytes(r)},sign:function(e,a,s=v){let{seed:u,k2sig:d}=function(e,a,s=v){if(["recovered","canonical"].some(e=>e in s))throw Error("sign() legacy options not supported");let{hash:u,randomBytes:d}=t,{lowS:p,prehash:h,extraEntropy:g}=s;null==p&&(p=!0),e=m_("msgHash",e),h&&(e=m_("prehashed msgHash",u(e)));let w=y(e),x=l(a),_=[b(x),b(w)];if(null!=g){let e=!0===g?d(r.BYTES):g;_.push(m_("extraEntropy",e))}return{seed:mE(..._),k2sig:function(e){var t;let r=m(e);if(!c(r))return;let a=mU(r,n),s=o.BASE.multiply(r).toAffine(),l=i(s.x);if(l===mX)return;let u=i(a*i(w+l*x));if(u===mX)return;let d=2*(s.x!==l)|Number(s.y&mQ),h=u;return p&&u>n>>mQ&&(h=(t=u)>n>>mQ?i(-t):t,d^=1),new f(l,h,d)}}}(e,a,s);return mP(t.hash.outputLen,t.nByteLength,t.hmac)(u,d)},verify:function(e,r,a,s=w){let l,u;if(r=m_("msgHash",r),a=m_("publicKey",a),"strict"in s)throw Error("options.strict was renamed to lowS");let{lowS:c,prehash:d}=s;try{if("string"==typeof e||e instanceof Uint8Array)try{u=f.fromDER(e)}catch(t){if(!(t instanceof mY.Err))throw t;u=f.fromCompact(e)}else if("object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s){let{r:t,s:r}=e;u=new f(t,r)}else throw Error("PARSE");l=o.fromHex(a)}catch(e){if("PARSE"===e.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&u.hasHighS())return!1;d&&(r=t.hash(r));let{r:p,s:h}=u,m=y(r),g=mU(h,n),b=i(m*g),v=i(p*g),x=o.BASE.multiplyAndAddUnsafe(l,b,v)?.toAffine();return!!x&&i(x.x)===p},ProjectivePoint:o,Signature:f,utils:{isValidPrivateKey(e){try{return l(e),!0}catch(e){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let e=mL(t.n);return function(e,t,r=!1){let n=e.length,a=mq(t),s=mL(t);if(n<16||n<s||n>1024)throw Error(`expected ${s}-1024 bytes of input, got ${n}`);let i=mB(r?mb(e):mv(e),t-m$)+m$;return r?mx(i,a):mw(i,a)}(t.randomBytes(e),t.n)},precompute:(e=8,t=o.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}})({...e,hash:t,hmac:(e,...r)=>mV(t,e,function(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!fW(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}(...r)),randomBytes:f2});return Object.freeze({...r(t),create:r})}({a:BigInt(0),b:BigInt(7),Fp:m3,n:m2,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-m6*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=BigInt("0x100000000000000000000000000000000"),s=m8(t*e,m2),i=m8(-r*e,m2),o=mB(e-s*t-i*n,m2),l=mB(-s*r-i*t,m2),u=o>a,c=l>a;if(u&&(o=m2-o),c&&(l=m2-l),o>a||l>a)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:u,k1:o,k2neg:c,k2:l}}}},mc),m9=BigInt(0),m7={},ye=e=>e.toRawBytes(!0).slice(1),yt=e=>mod(e,m2),yr=m4.ProjectivePoint;function yn({r:e,s:t,v:r}){return`0x${new m4.Signature(pe(e),pe(t)).toCompactHex()}${pl(r).slice(2)}`}async function ya({hash:e,privateKey:t}){let{r,s:n,recovery:a}=m4.sign(e.slice(2),t.slice(2));return{r:pl(r),s:pl(n),v:a?28n:27n}}async function ys({message:e,privateKey:t}){return yn(await ya({hash:function(e,t){let r="string"==typeof e?fM(e):e.raw instanceof Uint8Array?e.raw:f$(e.raw);return hl(pP([fM(`\x19Ethereum Signed Message:
${r.length}`),r]),void 0)}(e),privateKey:t}))}function yi(e,{dir:t="left"}={}){let r="string"==typeof e?e.replace("0x",""):e,n=0;for(let e=0;e<r.length-1;e++)if("0"===r["left"===t?e:r.length-e-1].toString())n++;else break;return(r="left"===t?r.slice(n):r.slice(0,r.length-n),"string"==typeof e)?(1===r.length&&"right"===t&&(r=`${r}0`),`0x${r.length%2==1?`0${r}`:r}`):r}class yo extends d5{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NegativeOffsetError"})}}class yl extends d5{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PositionOutOfBoundsError"})}}let yu={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,assertPosition(e){if(e<0||e>this.bytes.length-1)throw new yl({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new yo({offset:e});let t=this.position-e;this.assertPosition(t),this.position=t},incrementPosition(e){if(e<0)throw new yo({offset:e});let t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){let r=t??this.position;return this.assertPosition(r+e-1),this.bytes.subarray(r,r+e)},inspectUint8(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){let t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){let t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){let t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,255&e),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){let e=this.inspectByte();return this.position++,e},readBytes(e){let t=this.inspectBytes(e);return this.position+=e,t},readUint8(){let e=this.inspectUint8();return this.position+=1,e},readUint16(){let e=this.inspectUint16();return this.position+=2,e},readUint24(){let e=this.inspectUint24();return this.position+=3,e},readUint32(){let e=this.inspectUint32();return this.position+=4,e},setPosition(e){this.assertPosition(e),this.position=e}};function yc(e,t="hex"){let r=function e(t){return Array.isArray(t)?function(e){let t=e.reduce((e,t)=>e+t.length,0),r=yd(t);return{length:t<=55?1+t:1+r+t,encode(n){for(let{encode:a}of(t<=55?n.pushByte(192+t):(n.pushByte(247+r),1===r?n.pushUint8(t):2===r?n.pushUint16(t):3===r?n.pushUint24(t):n.pushUint32(t)),e))a(n)}}}(t.map(t=>e(t))):function(e){let t="string"==typeof e?fN(e):e,r=yd(t.length);return{length:1===t.length&&t[0]<128?1:t.length<=55?1+t.length:1+r+t.length,encode(e){1===t.length&&t[0]<128||(t.length<=55?e.pushByte(128+t.length):(e.pushByte(183+r),1===r?e.pushUint8(t.length):2===r?e.pushUint16(t.length):3===r?e.pushUint24(t.length):e.pushUint32(t.length))),e.pushBytes(t)}}}(t)}(e),n=function(e){let t=Object.create(yu);return t.bytes=e,t.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),t}(new Uint8Array(r.length));return(r.encode(n),"hex"===t)?pc(n.bytes):n.bytes}function yd(e){if(e<256)return 1;if(e<65536)return 2;if(e<0x1000000)return 3;if(e<0x100000000)return 4;throw new d5("Length is too large.")}function yp(e){if(!e||0===e.length)return[];let t=[];for(let r=0;r<e.length;r++){let{address:n,storageKeys:a}=e[r];for(let e=0;e<a.length;e++)if(a[e].length-2!=64)throw new fe({storageKey:a[e]});if(!p$(n))throw new pS({address:n});t.push([n,a])}return t}function yf(e,t){let r=fk(e);return"eip1559"===r?function(e,t){let{chainId:r,gas:n,nonce:a,to:s,value:i,maxFeePerGas:o,maxPriorityFeePerGas:l,accessList:u,data:c}=e,{chainId:d,maxPriorityFeePerGas:p,gasPrice:f,maxFeePerGas:h,to:m}=e;if(d<=0)throw new pz({chainId:d});if(m&&!p$(m))throw new pS({address:m});if(f)throw new d5("`gasPrice` is not a valid EIP-1559 Transaction attribute.");if(h&&h>2n**256n-1n)throw new pK({maxFeePerGas:h});if(p&&h&&p>h)throw new p6({maxFeePerGas:h,maxPriorityFeePerGas:p});let y=yp(u),g=[pl(r),a?pl(a):"0x",l?pl(l):"0x",o?pl(o):"0x",n?pl(n):"0x",s??"0x",i?pl(i):"0x",c??"0x",y];if(t){let e=0n===t.v?"0x":1n===t.v?pl(1):27n===t.v?"0x":pl(1);g.push(e,yi(t.r),yi(t.s))}return pA(["0x02",yc(g)])}(e,t):"eip2930"===r?function(e,t){let{chainId:r,gas:n,data:a,nonce:s,to:i,value:o,accessList:l,gasPrice:u}=e,{chainId:c,maxPriorityFeePerGas:d,gasPrice:p,maxFeePerGas:f,to:h}=e;if(c<=0)throw new pz({chainId:c});if(h&&!p$(h))throw new pS({address:h});if(d||f)throw new d5("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(p&&p>2n**256n-1n)throw new pK({maxFeePerGas:p});let m=yp(l),y=[pl(r),s?pl(s):"0x",u?pl(u):"0x",n?pl(n):"0x",i??"0x",o?pl(o):"0x",a??"0x",m];if(t){let e=0n===t.v?"0x":1n===t.v?pl(1):27n===t.v?"0x":pl(1);y.push(e,yi(t.r),yi(t.s))}return pA(["0x01",yc(y)])}(e,t):function(e,t){let{chainId:r=0,gas:n,data:a,nonce:s,to:i,value:o,gasPrice:l}=e,{chainId:u,maxPriorityFeePerGas:c,gasPrice:d,maxFeePerGas:p,to:f,accessList:h}=e;if(f&&!p$(f))throw new pS({address:f});if(void 0!==u&&u<=0)throw new pz({chainId:u});if(c||p)throw new d5("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(d&&d>2n**256n-1n)throw new pK({maxFeePerGas:d});if(h)throw new d5("`accessList` is not a valid Legacy Transaction attribute.");let m=[s?pl(s):"0x",l?pl(l):"0x",n?pl(n):"0x",i??"0x",o?pl(o):"0x",a??"0x"];return t?m=[...m,pl((()=>{if(r>0)return BigInt(2*r)+BigInt(35n+t.v-27n);if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(35n===t.v?0n:1n);let e=27n+(27n===t.v?0n:1n);if(t.v!==e)throw new p9({v:t.v});return e})()),t.r,t.s]:r>0&&(m=[...m,pl(r),"0x","0x"]),yc(m)}(e,t)}async function yh({privateKey:e,transaction:t,serializer:r=yf}){let n=await ya({hash:hl(r(t)),privateKey:e});return r(t,n)}function ym({data:e,primaryType:t,types:r}){return hl(function e({data:t,primaryType:r,types:n}){let a=[{type:"bytes32"}],s=[function({primaryType:e,types:t}){return hl(pl(function({primaryType:e,types:t}){let r="",n=function e({primaryType:t,types:r},n=new Set){let a=t.match(/^\w*/u),s=a?.[0];if(n.has(s)||void 0===r[s])return n;for(let t of(n.add(s),r[s]))e({primaryType:t.type,types:r},n);return n}({primaryType:e,types:t});for(let a of(n.delete(e),[e,...Array.from(n).sort()]))r+=`${a}(${t[a].map(({name:e,type:t})=>`${t} ${e}`).join(",")})`;return r}({primaryType:e,types:t})))}({primaryType:r,types:n})];for(let i of n[r]){let[r,o]=function t({types:r,name:n,type:a,value:s}){if(void 0!==r[a])return[{type:"bytes32"},hl(e({data:s,primaryType:a,types:r}))];if("bytes"===a){let e=s.length%2?"0":"";return[{type:"bytes32"},hl(s=`0x${e+s.slice(2)}`)]}if("string"===a)return[{type:"bytes32"},hl(pl(s))];if(a.lastIndexOf("]")===a.length-1){let e=a.slice(0,a.lastIndexOf("[")),i=s.map(a=>t({name:n,type:e,types:r,value:a}));return[{type:"bytes32"},hl(pM(i.map(([e])=>e),i.map(([,e])=>e)))]}return[{type:a},s]}({types:n,name:i.name,type:i.type,value:t[i.name]});a.push(r),s.push(o)}return pM(a,s)}({data:e,primaryType:t,types:r}))}async function yy({privateKey:e,...t}){return yn(await ya({hash:function({domain:e,message:t,primaryType:r,types:n}){let a=void 0===e?{}:e,s={EIP712Domain:hw({domain:a}),...n};hv({domain:a,message:t,primaryType:r,types:s});let i=["0x1901"];return a&&i.push(function({domain:e,types:t}){return ym({data:e,primaryType:"EIP712Domain",types:t})}({domain:a,types:s})),"EIP712Domain"!==r&&i.push(ym({data:t,primaryType:r,types:s})),hl(pP(i))}(t),privateKey:e}))}function yg(e){return 0===e||0n===e||null==e||"0"===e||""===e||"string"==typeof e&&("0x"===yi(e).toLowerCase()||"0x00"===yi(e).toLowerCase())}function yb(e){return!yg(e)}function yv(e){return yb(e.maxFeePerGas)&&yb(e.maxPriorityFeePerGas)}function yw(e){return"cip42"===e.type||yv(e)&&(yb(e.feeCurrency)||yb(e.gatewayFeeRecipient)||yb(e.gatewayFee))}function yx(e){return"cip64"===e.type||yv(e)&&yb(e.feeCurrency)&&yg(e.gatewayFee)&&yg(e.gatewayFeeRecipient)}let y_={block:fb({exclude:["difficulty","gasLimit","mixHash","nonce","uncles"],format(e){let t=e.transactions?.map(e=>"string"==typeof e?e:{...fm(e),feeCurrency:e.feeCurrency,..."0x7b"!==e.type?{gatewayFee:e.gatewayFee?pe(e.gatewayFee):null,gatewayFeeRecipient:e.gatewayFeeRecipient||null}:{}});return{randomness:e.randomness,transactions:t}}}),transaction:fy({format(e){let t={feeCurrency:e.feeCurrency};return"0x7b"===e.type?t.type="cip64":("0x7c"===e.type&&(t.type="cip42"),t.gatewayFee=e.gatewayFee?pe(e.gatewayFee):null,t.gatewayFeeRecipient=e.gatewayFeeRecipient),t}}),transactionRequest:fo({format(e){let t={feeCurrency:e.feeCurrency};return yx(e)?t.type="0x7b":(yw(e)&&(t.type="0x7c"),t.gatewayFee=void 0!==e.gatewayFee?pd(e.gatewayFee):void 0,t.gatewayFeeRecipient=e.gatewayFeeRecipient),t}})},yE=2n**256n-1n,yI=function(e,t={}){let{fees:r=e.fees,formatters:n=e.formatters,serializers:a=e.serializers}=t;return{...e,fees:r,formatters:n,serializers:a}}({id:42220,name:"Celo",network:"celo",nativeCurrency:{decimals:18,name:"CELO",symbol:"CELO"},rpcUrls:{default:{http:["https://forno.celo.org"]},infura:{http:["https://celo-mainnet.infura.io/v3"]},public:{http:["https://forno.celo.org"]}},blockExplorers:{default:{name:"Celo Explorer",url:"https://explorer.celo.org/mainnet"},etherscan:{name:"CeloScan",url:"https://celoscan.io"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:0xc81517}},testnet:!1},{formatters:y_,serializers:{transaction:(e,t)=>yx(e)?function(e,t){var r=e;let{chainId:n,maxPriorityFeePerGas:a,gasPrice:s,maxFeePerGas:i,to:o,feeCurrency:l}=r;if(n<=0)throw new pz({chainId:n});if(o&&!p$(o))throw new pS({address:o});if(s)throw new d5("`gasPrice` is not a valid CIP-64 Transaction attribute.");if(yb(i)&&i>yE)throw new pK({maxFeePerGas:i});if(yb(a)&&yb(i)&&a>i)throw new p6({maxFeePerGas:i,maxPriorityFeePerGas:a});if(yb(l)&&!p$(l))throw new d5("`feeCurrency` MUST be a token address for CIP-64 transactions.");if(yg(l))throw new d5("`feeCurrency` must be provided for CIP-64 transactions.");let{chainId:u,gas:c,nonce:d,to:p,value:f,maxFeePerGas:h,maxPriorityFeePerGas:m,accessList:y,feeCurrency:g,data:b}=e,v=[pl(u),d?pl(d):"0x",m?pl(m):"0x",h?pl(h):"0x",c?pl(c):"0x",p??"0x",f?pl(f):"0x",b??"0x",yp(y),g];return t&&v.push(27n===t.v?"0x":pl(1),yi(t.r),yi(t.s)),pA(["0x7b",yc(v)])}(e,t):yw(e)?function(e,t){var r=e;let{chainId:n,maxPriorityFeePerGas:a,gasPrice:s,maxFeePerGas:i,to:o,feeCurrency:l,gatewayFee:u,gatewayFeeRecipient:c}=r;if(n<=0)throw new pz({chainId:n});if(o&&!p$(o))throw new pS({address:o});if(s)throw new d5("`gasPrice` is not a valid CIP-42 Transaction attribute.");if(yb(i)&&i>yE)throw new pK({maxFeePerGas:i});if(yb(a)&&yb(i)&&a>i)throw new p6({maxFeePerGas:i,maxPriorityFeePerGas:a});if(yb(u)&&yg(c)||yb(c)&&yg(u))throw new d5("`gatewayFee` and `gatewayFeeRecipient` must be provided together.");if(yb(l)&&!p$(l))throw new d5("`feeCurrency` MUST be a token address for CIP-42 transactions.");if(yb(c)&&!p$(c))throw new pS(c);if(yg(l)&&yg(c))throw new d5("Either `feeCurrency` or `gatewayFeeRecipient` must be provided for CIP-42 transactions.");let{chainId:d,gas:p,nonce:f,to:h,value:m,maxFeePerGas:y,maxPriorityFeePerGas:g,accessList:b,feeCurrency:v,gatewayFeeRecipient:w,gatewayFee:x,data:_}=e,E=[pl(d),f?pl(f):"0x",g?pl(g):"0x",y?pl(y):"0x",p?pl(p):"0x",v??"0x",w??"0x",x?pl(x):"0x",h??"0x",m?pl(m):"0x",_??"0x",yp(b)];return t&&E.push(27n===t.v?"0x":pl(1),yi(t.r),yi(t.s)),pA(["0x7c",yc(E)])}(e,t):yf(e,t)}});var yT=r(76895),yk=r(89131),yP={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},yA={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},yS={code:"4",name:"assistant_message",parse:e=>{if(null==e||"object"!=typeof e||!("id"in e)||!("role"in e)||!("content"in e)||"string"!=typeof e.id||"string"!=typeof e.role||"assistant"!==e.role||!Array.isArray(e.content)||!e.content.every(e=>null!=e&&"object"==typeof e&&"type"in e&&"text"===e.type&&"text"in e&&null!=e.text&&"object"==typeof e.text&&"value"in e.text&&"string"==typeof e.text.value))throw Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},yO={code:"5",name:"assistant_control_data",parse:e=>{if(null==e||"object"!=typeof e||!("threadId"in e)||!("messageId"in e)||"string"!=typeof e.threadId||"string"!=typeof e.messageId)throw Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},y$={code:"6",name:"data_message",parse:e=>{if(null==e||"object"!=typeof e||!("role"in e)||!("data"in e)||"string"!=typeof e.role||"data"!==e.role)throw Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},yC=[yP,yA,yS,yO,y$],yj={[yP.code]:yP,[yA.code]:yA,[yS.code]:yS,[yO.code]:yO,[y$.code]:y$};yP.name,yP.code,yA.name,yA.code,yS.name,yS.code,yO.name,yO.code,y$.name,y$.code;var yN=yC.map(e=>e.code);function yM(e){if(void 0===e)return{value:void 0,state:"undefined-input"};let t=tn({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=tn({text:function(e){let t=["ROOT"],r=-1,n=null;function a(e,a,s){switch(e){case'"':r=a,t.pop(),t.push(s),t.push("INSIDE_STRING");break;case"f":case"t":case"n":r=a,n=a,t.pop(),t.push(s),t.push("INSIDE_LITERAL");break;case"-":t.pop(),t.push(s),t.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r=a,t.pop(),t.push(s),t.push("INSIDE_NUMBER");break;case"{":r=a,t.pop(),t.push(s),t.push("INSIDE_OBJECT_START");break;case"[":r=a,t.pop(),t.push(s),t.push("INSIDE_ARRAY_START")}}function s(e,n){switch(e){case",":t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":r=n,t.pop()}}function i(e,n){switch(e){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":r=n,t.pop()}}for(let o=0;o<e.length;o++){let l=e[o];switch(t[t.length-1]){case"ROOT":a(l,o,"FINISH");break;case"INSIDE_OBJECT_START":switch(l){case'"':t.pop(),t.push("INSIDE_OBJECT_KEY");break;case"}":r=o,t.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===l&&(t.pop(),t.push("INSIDE_OBJECT_KEY"));break;case"INSIDE_OBJECT_KEY":'"'===l&&(t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY"));break;case"INSIDE_OBJECT_AFTER_KEY":":"===l&&(t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":a(l,o,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":s(l,o);break;case"INSIDE_STRING":switch(l){case'"':t.pop(),r=o;break;case"\\":t.push("INSIDE_STRING_ESCAPE");break;default:r=o}break;case"INSIDE_ARRAY_START":"]"===l?(r=o,t.pop()):(r=o,a(l,o,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(l){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":r=o,t.pop();break;default:r=o}break;case"INSIDE_ARRAY_AFTER_COMMA":a(l,o,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":t.pop(),r=o;break;case"INSIDE_NUMBER":switch(l){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r=o;break;case"e":case"E":case"-":case".":break;case",":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,o),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&s(l,o);break;case"}":t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&s(l,o);break;case"]":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,o);break;default:t.pop()}break;case"INSIDE_LITERAL":{let a=e.substring(n,o+1);"false".startsWith(a)||"true".startsWith(a)||"null".startsWith(a)?r=o:(t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]?s(l,o):"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,o))}}}let o=e.slice(0,r+1);for(let r=t.length-1;r>=0;r--)switch(t[r]){case"INSIDE_STRING":o+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":o+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":o+="]";break;case"INSIDE_LITERAL":{let t=e.substring(n,e.length);"true".startsWith(t)?o+="true".slice(t.length):"false".startsWith(t)?o+="false".slice(t.length):"null".startsWith(t)&&(o+="null".slice(t.length))}}return o}(e)})).success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"}}var yR=[{code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},{code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw Error('"data" parts expect an array value.');return{type:"data",value:e}}},{code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},{code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},{code:"9",name:"tool_call",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName||!("args"in e)||"object"!=typeof e.args)throw Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},{code:"a",name:"tool_result",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("result"in e))throw Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},{code:"b",name:"tool_call_streaming_start",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName)throw Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},{code:"c",name:"tool_call_delta",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("argsTextDelta"in e)||"string"!=typeof e.argsTextDelta)throw Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},{code:"d",name:"finish_message",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_message" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},{code:"e",name:"finish_step",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_step" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&"boolean"==typeof e.isContinued&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},{code:"f",name:"start_step",parse:e=>{if(null==e||"object"!=typeof e||!("messageId"in e)||"string"!=typeof e.messageId)throw Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},{code:"g",name:"reasoning",parse:e=>{if("string"!=typeof e)throw Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},{code:"h",name:"source",parse:e=>{if(null==e||"object"!=typeof e)throw Error('"source" parts expect a Source object.');return{type:"source",value:e}}},{code:"i",name:"redacted_reasoning",parse:e=>{if(null==e||"object"!=typeof e||!("data"in e)||"string"!=typeof e.data)throw Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},{code:"j",name:"reasoning_signature",parse:e=>{if(null==e||"object"!=typeof e||!("signature"in e)||"string"!=typeof e.signature)throw Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},{code:"k",name:"file",parse:e=>{if(null==e||"object"!=typeof e||!("data"in e)||"string"!=typeof e.data||!("mimeType"in e)||"string"!=typeof e.mimeType)throw Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}}],yB=Object.fromEntries(yR.map(e=>[e.code,e]));Object.fromEntries(yR.map(e=>[e.name,e.code]));var yF=yR.map(e=>e.code),yU=e=>{let t=e.indexOf(":");if(-1===t)throw Error("Failed to parse stream string. No separator found.");let r=e.slice(0,t);if(!yF.includes(r))throw Error(`Failed to parse stream string. Invalid code ${r}.`);let n=JSON.parse(e.slice(t+1));return yB[r].parse(n)};function yD(e,t){let r=yR.find(t=>t.name===e);if(!r)throw Error(`Invalid stream part type: ${e}`);return`${r.code}:${JSON.stringify(t)}
`}async function yz({stream:e,onTextPart:t,onReasoningPart:r,onReasoningSignaturePart:n,onRedactedReasoningPart:a,onSourcePart:s,onFilePart:i,onDataPart:o,onErrorPart:l,onToolCallStreamingStartPart:u,onToolCallDeltaPart:c,onToolCallPart:d,onToolResultPart:p,onMessageAnnotationsPart:f,onFinishMessagePart:h,onFinishStepPart:m,onStartStepPart:y}){let g=e.getReader(),b=new TextDecoder,v=[],w=0;for(;;){let{value:e}=await g.read();if(e&&(v.push(e),w+=e.length,10!==e[e.length-1]))continue;if(0===v.length)break;let x=function(e,t){let r=new Uint8Array(t),n=0;for(let t of e)r.set(t,n),n+=t.length;return e.length=0,r}(v,w);for(let{type:e,value:g}of(w=0,b.decode(x,{stream:!0}).split("\n").filter(e=>""!==e).map(yU)))switch(e){case"text":await (null==t?void 0:t(g));break;case"reasoning":await (null==r?void 0:r(g));break;case"reasoning_signature":await (null==n?void 0:n(g));break;case"redacted_reasoning":await (null==a?void 0:a(g));break;case"file":await (null==i?void 0:i(g));break;case"source":await (null==s?void 0:s(g));break;case"data":await (null==o?void 0:o(g));break;case"error":await (null==l?void 0:l(g));break;case"message_annotations":await (null==f?void 0:f(g));break;case"tool_call_streaming_start":await (null==u?void 0:u(g));break;case"tool_call_delta":await (null==c?void 0:c(g));break;case"tool_call":await (null==d?void 0:d(g));break;case"tool_result":await (null==p?void 0:p(g));break;case"finish_message":await (null==h?void 0:h(g));break;case"finish_step":await (null==m?void 0:m(g));break;case"start_step":await (null==y?void 0:y(g));break;default:throw Error(`Unknown stream part type: ${e}`)}}}async function yq({stream:e,onTextPart:t}){let r=e.pipeThrough(new TextDecoderStream).getReader();for(;;){let{done:e,value:n}=await r.read();if(e)break;await t(n)}}var yL=Symbol.for("vercel.ai.schema");function yZ(e){return"object"==typeof e&&null!==e&&yL in e&&!0===e[yL]&&"jsonSchema"in e&&"validate"in e?e:function(e,{validate:t}={}){return{[yL]:!0,_type:void 0,[tt]:!0,jsonSchema:e,validate:t}}(aK(e,{$refStrategy:"none",target:"jsonSchema7"}),{validate:t=>{let r=e.safeParse(t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}})}var yV=Object.defineProperty,yG=(e,t)=>{for(var r in t)yV(e,r,{get:t[r],enumerable:!0})};function yH(e,{contentType:t,dataStreamVersion:r}){let n=new Headers(null!=e?e:{});return n.has("Content-Type")||n.set("Content-Type",t),void 0!==r&&n.set("X-Vercel-AI-Data-Stream",r),n}function yK(e,{contentType:t,dataStreamVersion:r}){let n={};if(null!=e)for(let[t,r]of Object.entries(e))n[t]=r;return null==n["Content-Type"]&&(n["Content-Type"]=t),void 0!==r&&(n["X-Vercel-AI-Data-Stream"]=r),n}function yW({response:e,status:t,statusText:r,headers:n,stream:a}){e.writeHead(null!=t?t:200,r,n);let s=a.getReader();(async()=>{try{for(;;){let{done:t,value:r}=await s.read();if(t)break;e.write(r)}}catch(e){throw e}finally{e.end()}})()}var yJ="AI_InvalidArgumentError",yY=`vercel.ai.error.${yJ}`,yX=Symbol.for(yY),yQ=class extends el{constructor({parameter:e,value:t,message:r}){super({name:yJ,message:`Invalid argument for parameter ${e}: ${r}`}),this[F]=!0,this.parameter=e,this.value=t}static isInstance(e){return el.hasMarker(e,yY)}};F=yX;var y0="AI_RetryError",y1=`vercel.ai.error.${y0}`,y2=Symbol.for(y1),y6=class extends el{constructor({message:e,reason:t,errors:r}){super({name:y0,message:e}),this[U]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return el.hasMarker(e,y1)}};U=y2;var y5=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:r=2}={})=>async n=>y8(n,{maxRetries:e,delayInMs:t,backoffFactor:r});async function y8(e,{maxRetries:t,delayInMs:r,backoffFactor:n},a=[]){try{return await e()}catch(l){if(te(l)||0===t)throw l;let s=null==l?"unknown error":"string"==typeof l?l:l instanceof Error?l.message:JSON.stringify(l),i=[...a,l],o=i.length;if(o>t)throw new y6({message:`Failed after ${o} attempts. Last error: ${s}`,reason:"maxRetriesExceeded",errors:i});if(l instanceof Error&&ep.isInstance(l)&&!0===l.isRetryable&&o<=t)return await e3(r),y8(e,{maxRetries:t,delayInMs:n*r,backoffFactor:n},i);if(1===o)throw l;throw new y6({message:`Failed after ${o} attempts with non-retryable error: '${s}'`,reason:"errorNotRetryable",errors:i})}}function y3({maxRetries:e}){if(null!=e){if(!Number.isInteger(e))throw new yQ({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new yQ({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}let t=null!=e?e:2;return{maxRetries:t,retry:y5({maxRetries:t})}}function y4({operationId:e,telemetry:t}){return{"operation.name":`${e}${(null==t?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":null==t?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":null==t?void 0:t.functionId}}function y9({model:e,settings:t,telemetry:r,headers:n}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((e,[t,r])=>(e[`ai.settings.${t}`]=r,e),{}),...Object.entries(null!=(a=null==r?void 0:r.metadata)?a:{}).reduce((e,[t,r])=>(e[`ai.telemetry.metadata.${t}`]=r,e),{}),...Object.entries(null!=n?n:{}).reduce((e,[t,r])=>(void 0!==r&&(e[`ai.request.headers.${t}`]=r),e),{})}}var y7={startSpan:()=>ge,startActiveSpan:(e,t,r,n)=>"function"==typeof t?t(ge):"function"==typeof r?r(ge):"function"==typeof n?n(ge):void 0},ge={spanContext:()=>gt,setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording:()=>!1,recordException(){return this}},gt={traceId:"",spanId:"",traceFlags:0};function gr({isEnabled:e=!1,tracer:t}={}){return e?t||yT.u.getTracer("ai"):y7}function gn({name:e,tracer:t,attributes:r,fn:n,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:r},async e=>{try{let t=await n(e);return a&&e.end(),t}catch(t){try{t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:yk.s.ERROR,message:t.message})):e.setStatus({code:yk.s.ERROR})}finally{e.end()}throw t}})}function ga({telemetry:e,attributes:t}){return(null==e?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((t,[r,n])=>{if(void 0===n)return t;if("object"==typeof n&&"input"in n&&"function"==typeof n.input){if((null==e?void 0:e.recordInputs)===!1)return t;let a=n.input();return void 0===a?t:{...t,[r]:a}}if("object"==typeof n&&"output"in n&&"function"==typeof n.output){if((null==e?void 0:e.recordOutputs)===!1)return t;let a=n.output();return void 0===a?t:{...t,[r]:a}}return{...t,[r]:n}},{})}var gs="AI_NoImageGeneratedError",gi=`vercel.ai.error.${gs}`;D=Symbol.for(gi);var go=class{constructor({data:e,mimeType:t}){let r=e instanceof Uint8Array;this.base64Data=r?void 0:e,this.uint8ArrayData=r?e:void 0,this.mimeType=t}get base64(){return null==this.base64Data&&(this.base64Data=ty(this.uint8ArrayData)),this.base64Data}get uint8Array(){return null==this.uint8ArrayData&&(this.uint8ArrayData=tm(this.base64Data)),this.uint8ArrayData}},gl=class extends go{constructor(e){super(e),this.type="file"}},gu=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}],gc=e=>{let t="string"==typeof e?tm(e):e,r=(127&t[6])<<21|(127&t[7])<<14|(127&t[8])<<7|127&t[9];return t.slice(r+10)},gd="AI_NoObjectGeneratedError",gp=`vercel.ai.error.${gd}`,gf=Symbol.for(gp),gh=class extends el{constructor({message:e="No object generated.",cause:t,text:r,response:n,usage:a,finishReason:s}){super({name:gd,message:e,cause:t}),this[z]=!0,this.text=r,this.response=n,this.usage=a,this.finishReason=s}static isInstance(e){return el.hasMarker(e,gp)}};z=gf;var gm="AI_DownloadError",gy=`vercel.ai.error.${gm}`,gg=Symbol.for(gy),gb=class extends el{constructor({url:e,statusCode:t,statusText:r,cause:n,message:a=null==n?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${n}`}){super({name:gm,message:a,cause:n}),this[q]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return el.hasMarker(e,gy)}};async function gv({url:e}){var t;let r=e.toString();try{let e=await fetch(r);if(!e.ok)throw new gb({url:r,statusCode:e.status,statusText:e.statusText});return{data:new Uint8Array(await e.arrayBuffer()),mimeType:null!=(t=e.headers.get("content-type"))?t:void 0}}catch(e){if(gb.isInstance(e))throw e;throw new gb({url:r,cause:e})}}q=gg;var gw="AI_InvalidDataContentError",gx=`vercel.ai.error.${gw}`,g_=Symbol.for(gx),gE=class extends el{constructor({content:e,cause:t,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:gw,message:r,cause:t}),this[L]=!0,this.content=e}static isInstance(e){return el.hasMarker(e,gx)}};L=g_;var gI=ni.union([ni.string(),ni.instanceof(Uint8Array),ni.instanceof(ArrayBuffer),ni.custom(e=>{var t,r;return null!=(r=null==(t=globalThis.Buffer)?void 0:t.isBuffer(e))&&r},{message:"Must be a Buffer"})]);function gT(e){return"string"==typeof e?e:e instanceof ArrayBuffer?ty(new Uint8Array(e)):ty(e)}function gk(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)try{return tm(e)}catch(t){throw new gE({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new gE({content:e})}var gP="AI_InvalidMessageRoleError",gA=`vercel.ai.error.${gP}`,gS=Symbol.for(gA),gO=class extends el{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:gP,message:t}),this[Z]=!0,this.role=e}static isInstance(e){return el.hasMarker(e,gA)}};async function g$({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:r=()=>!1,downloadImplementation:n=gv}){let a=await gC(e.messages,n,t,r);return[...null!=e.system?[{role:"system",content:e.system}]:[],...e.messages.map(e=>(function(e,t){var r,n,a,s,i,o;let l=e.role;switch(l){case"system":return{role:"system",content:e.content,providerMetadata:null!=(r=e.providerOptions)?r:e.experimental_providerMetadata};case"user":if("string"==typeof e.content)return{role:"user",content:[{type:"text",text:e.content}],providerMetadata:null!=(n=e.providerOptions)?n:e.experimental_providerMetadata};return{role:"user",content:e.content.map(e=>(function(e,t){var r,n,a,s;let i,o,l;if("text"===e.type)return{type:"text",text:e.text,providerMetadata:null!=(r=e.providerOptions)?r:e.experimental_providerMetadata};let u=e.mimeType,c=e.type;switch(c){case"image":i=e.image;break;case"file":i=e.data;break;default:throw Error(`Unsupported part type: ${c}`)}try{o="string"==typeof i?new URL(i):i}catch(e){o=i}if(o instanceof URL)if("data:"===o.protocol){let{mimeType:e,base64Content:t}=function(e){try{let[t,r]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:r}}catch(e){return{mimeType:void 0,base64Content:void 0}}}(o.toString());if(null==e||null==t)throw Error(`Invalid data URL format in part ${c}`);u=e,l=gk(t)}else{let e=t[o.toString()];e?(l=e.data,null!=u||(u=e.mimeType)):l=o}else l=gk(o);switch(c){case"image":return l instanceof Uint8Array&&(u=null!=(n=function({data:e,signatures:t}){let r="string"==typeof e&&e.startsWith("SUQz")||"string"!=typeof e&&e.length>10&&73===e[0]&&68===e[1]&&51===e[2]?gc(e):e;for(let e of t)if("string"==typeof r?r.startsWith(e.base64Prefix):r.length>=e.bytesPrefix.length&&e.bytesPrefix.every((e,t)=>r[t]===e))return e.mimeType}({data:l,signatures:gu}))?n:u),{type:"image",image:l,mimeType:u,providerMetadata:null!=(a=e.providerOptions)?a:e.experimental_providerMetadata};case"file":if(null==u)throw Error("Mime type is missing for file part");return{type:"file",data:l instanceof Uint8Array?gT(l):l,filename:e.filename,mimeType:u,providerMetadata:null!=(s=e.providerOptions)?s:e.experimental_providerMetadata}}})(e,t)).filter(e=>"text"!==e.type||""!==e.text),providerMetadata:null!=(a=e.providerOptions)?a:e.experimental_providerMetadata};case"assistant":if("string"==typeof e.content)return{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:null!=(s=e.providerOptions)?s:e.experimental_providerMetadata};return{role:"assistant",content:e.content.filter(e=>"text"!==e.type||""!==e.text).map(e=>{var t;let r=null!=(t=e.providerOptions)?t:e.experimental_providerMetadata;switch(e.type){case"file":return{type:"file",data:e.data instanceof URL?e.data:gT(e.data),filename:e.filename,mimeType:e.mimeType,providerMetadata:r};case"reasoning":return{type:"reasoning",text:e.text,signature:e.signature,providerMetadata:r};case"redacted-reasoning":return{type:"redacted-reasoning",data:e.data,providerMetadata:r};case"text":return{type:"text",text:e.text,providerMetadata:r};case"tool-call":return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,args:e.args,providerMetadata:r}}}),providerMetadata:null!=(i=e.providerOptions)?i:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(e=>{var t;return{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:e.result,content:e.experimental_content,isError:e.isError,providerMetadata:null!=(t=e.providerOptions)?t:e.experimental_providerMetadata}}),providerMetadata:null!=(o=e.providerOptions)?o:e.experimental_providerMetadata};default:throw new gO({role:l})}})(e,a))]}async function gC(e,t,r,n){let a=e.filter(e=>"user"===e.role).map(e=>e.content).filter(e=>Array.isArray(e)).flat().filter(e=>"image"===e.type||"file"===e.type).filter(e=>"image"!==e.type||!0!==r).map(e=>"image"===e.type?e.image:e.data).map(e=>"string"==typeof e&&(e.startsWith("http:")||e.startsWith("https:"))?new URL(e):e).filter(e=>e instanceof URL).filter(e=>!n(e));return Object.fromEntries((await Promise.all(a.map(async e=>({url:e,data:await t({url:e})})))).map(({url:e,data:t})=>[e.toString(),t]))}function gj({maxTokens:e,temperature:t,topP:r,topK:n,presencePenalty:a,frequencyPenalty:s,stopSequences:i,seed:o}){if(null!=e){if(!Number.isInteger(e))throw new yQ({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new yQ({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(null!=t&&"number"!=typeof t)throw new yQ({parameter:"temperature",value:t,message:"temperature must be a number"});if(null!=r&&"number"!=typeof r)throw new yQ({parameter:"topP",value:r,message:"topP must be a number"});if(null!=n&&"number"!=typeof n)throw new yQ({parameter:"topK",value:n,message:"topK must be a number"});if(null!=a&&"number"!=typeof a)throw new yQ({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(null!=s&&"number"!=typeof s)throw new yQ({parameter:"frequencyPenalty",value:s,message:"frequencyPenalty must be a number"});if(null!=o&&!Number.isInteger(o))throw new yQ({parameter:"seed",value:o,message:"seed must be an integer"});return{maxTokens:e,temperature:null!=t?t:0,topP:r,topK:n,presencePenalty:a,frequencyPenalty:s,stopSequences:null!=i&&i.length>0?i:void 0,seed:o}}function gN(e){var t,r,n;let a=[];for(let s of e){let e;try{e=new URL(s.url)}catch(e){throw Error(`Invalid URL: ${s.url}`)}switch(e.protocol){case"http:":case"https:":if(null==(t=s.contentType)?void 0:t.startsWith("image/"))a.push({type:"image",image:e});else{if(!s.contentType)throw Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:e,mimeType:s.contentType})}break;case"data:":{let e,t,i;try{[e,t]=s.url.split(","),i=e.split(";")[0].split(":")[1]}catch(e){throw Error(`Error processing data URL: ${s.url}`)}if(null==i||null==t)throw Error(`Invalid data URL format: ${s.url}`);if(null==(r=s.contentType)?void 0:r.startsWith("image/"))a.push({type:"image",image:gk(t)});else if(null==(n=s.contentType)?void 0:n.startsWith("text/"))a.push({type:"text",text:function(e){try{return new TextDecoder().decode(e)}catch(e){throw Error("Error decoding Uint8Array to text")}}(gk(t))});else{if(!s.contentType)throw Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:t,mimeType:s.contentType})}break}default:throw Error(`Unsupported URL protocol: ${e.protocol}`)}}return a}Z=gS;var gM="AI_MessageConversionError",gR=`vercel.ai.error.${gM}`,gB=Symbol.for(gR),gF=class extends el{constructor({originalMessage:e,message:t}){super({name:gM,message:t}),this[V]=!0,this.originalMessage=e}static isInstance(e){return el.hasMarker(e,gR)}};function gU(e){return"object"==typeof e&&null!==e&&("function"===e.role||"data"===e.role||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":"object"==typeof e&&null!==e&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":"object"==typeof e&&null!==e&&"role"in e&&"content"in e&&"string"==typeof e.content&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}V=gB;var gD=ni.lazy(()=>ni.union([ni.null(),ni.string(),ni.number(),ni.boolean(),ni.record(ni.string(),gD),ni.array(gD)])),gz=ni.record(ni.string(),ni.record(ni.string(),gD)),gq=ni.array(ni.union([ni.object({type:ni.literal("text"),text:ni.string()}),ni.object({type:ni.literal("image"),data:ni.string(),mimeType:ni.string().optional()})])),gL=ni.object({type:ni.literal("text"),text:ni.string(),providerOptions:gz.optional(),experimental_providerMetadata:gz.optional()}),gZ=ni.object({type:ni.literal("image"),image:ni.union([gI,ni.instanceof(URL)]),mimeType:ni.string().optional(),providerOptions:gz.optional(),experimental_providerMetadata:gz.optional()}),gV=ni.object({type:ni.literal("file"),data:ni.union([gI,ni.instanceof(URL)]),filename:ni.string().optional(),mimeType:ni.string(),providerOptions:gz.optional(),experimental_providerMetadata:gz.optional()}),gG=ni.object({type:ni.literal("reasoning"),text:ni.string(),providerOptions:gz.optional(),experimental_providerMetadata:gz.optional()}),gH=ni.object({type:ni.literal("redacted-reasoning"),data:ni.string(),providerOptions:gz.optional(),experimental_providerMetadata:gz.optional()}),gK=ni.object({type:ni.literal("tool-call"),toolCallId:ni.string(),toolName:ni.string(),args:ni.unknown(),providerOptions:gz.optional(),experimental_providerMetadata:gz.optional()}),gW=ni.object({type:ni.literal("tool-result"),toolCallId:ni.string(),toolName:ni.string(),result:ni.unknown(),content:gq.optional(),isError:ni.boolean().optional(),providerOptions:gz.optional(),experimental_providerMetadata:gz.optional()}),gJ=ni.object({role:ni.literal("system"),content:ni.string(),providerOptions:gz.optional(),experimental_providerMetadata:gz.optional()}),gY=ni.object({role:ni.literal("user"),content:ni.union([ni.string(),ni.array(ni.union([gL,gZ,gV]))]),providerOptions:gz.optional(),experimental_providerMetadata:gz.optional()}),gX=ni.object({role:ni.literal("assistant"),content:ni.union([ni.string(),ni.array(ni.union([gL,gV,gG,gH,gK]))]),providerOptions:gz.optional(),experimental_providerMetadata:gz.optional()}),gQ=ni.object({role:ni.literal("tool"),content:ni.array(gW),providerOptions:gz.optional(),experimental_providerMetadata:gz.optional()}),g0=ni.union([gJ,gY,gX,gQ]);function g1({prompt:e,tools:t}){if(null==e.prompt&&null==e.messages)throw new eT({prompt:e,message:"prompt or messages must be defined"});if(null!=e.prompt&&null!=e.messages)throw new eT({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(null!=e.system&&"string"!=typeof e.system)throw new eT({prompt:e,message:"system must be a string"});if(null!=e.prompt){if("string"!=typeof e.prompt)throw new eT({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(null!=e.messages){let r=function(e){if(!Array.isArray(e))return"other";if(0===e.length)return"messages";let t=e.map(gU);return t.some(e=>"has-ui-specific-parts"===e)?"ui-messages":t.every(e=>"has-core-specific-parts"===e||"message"===e)?"messages":"other"}(e.messages);if("other"===r)throw new eT({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});let n="ui-messages"===r?function(e,t){var r,n;let a=null!=(r=null==t?void 0:t.tools)?r:{},s=[];for(let t=0;t<e.length;t++){let r=e[t],i=t===e.length-1,{role:o,content:l,experimental_attachments:u}=r;switch(o){case"system":s.push({role:"system",content:l});break;case"user":if(null==r.parts)s.push({role:"user",content:u?[{type:"text",text:l},...gN(u)]:l});else{let e=r.parts.filter(e=>"text"===e.type).map(e=>({type:"text",text:e.text}));s.push({role:"user",content:u?[...e,...gN(u)]:e})}break;case"assistant":{if(null!=r.parts){let e=function(){let e=[];for(let t of o)switch(t.type){case"file":case"text":e.push(t);break;case"reasoning":for(let r of t.details)switch(r.type){case"text":e.push({type:"reasoning",text:r.text,signature:r.signature});break;case"redacted":e.push({type:"redacted-reasoning",data:r.data})}break;case"tool-invocation":e.push({type:"tool-call",toolCallId:t.toolInvocation.toolCallId,toolName:t.toolInvocation.toolName,args:t.toolInvocation.args});break;default:throw Error(`Unsupported part: ${t}`)}s.push({role:"assistant",content:e});let n=o.filter(e=>"tool-invocation"===e.type).map(e=>e.toolInvocation);n.length>0&&s.push({role:"tool",content:n.map(e=>{if(!("result"in e))throw new gF({originalMessage:r,message:"ToolInvocation must have a result: "+JSON.stringify(e)});let{toolCallId:t,toolName:n,result:s}=e,i=a[n];return(null==i?void 0:i.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:t,toolName:n,result:i.experimental_toToolResultContent(s),experimental_content:i.experimental_toToolResultContent(s)}:{type:"tool-result",toolCallId:t,toolName:n,result:s}})}),o=[],i=!1,t++},t=0,i=!1,o=[];for(let a of r.parts)switch(a.type){case"text":i&&e(),o.push(a);break;case"file":case"reasoning":o.push(a);break;case"tool-invocation":(null!=(n=a.toolInvocation.step)?n:0)!==t&&e(),o.push(a),i=!0}e();break}let e=r.toolInvocations;if(null==e||0===e.length){s.push({role:"assistant",content:l});break}let t=e.reduce((e,t)=>{var r;return Math.max(e,null!=(r=t.step)?r:0)},0);for(let n=0;n<=t;n++){let t=e.filter(e=>{var t;return(null!=(t=e.step)?t:0)===n});0!==t.length&&(s.push({role:"assistant",content:[...i&&l&&0===n?[{type:"text",text:l}]:[],...t.map(({toolCallId:e,toolName:t,args:r})=>({type:"tool-call",toolCallId:e,toolName:t,args:r}))]}),s.push({role:"tool",content:t.map(e=>{if(!("result"in e))throw new gF({originalMessage:r,message:"ToolInvocation must have a result: "+JSON.stringify(e)});let{toolCallId:t,toolName:n,result:s}=e,i=a[n];return(null==i?void 0:i.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:t,toolName:n,result:i.experimental_toToolResultContent(s),experimental_content:i.experimental_toToolResultContent(s)}:{type:"tool-result",toolCallId:t,toolName:n,result:s}})}))}l&&!i&&s.push({role:"assistant",content:l});break}case"data":break;default:throw new gF({originalMessage:r,message:`Unsupported role: ${o}`})}}return s}(e.messages,{tools:t}):e.messages;if(0===n.length)throw new eT({prompt:e,message:"messages must not be empty"});let a=tr({value:n,schema:ni.array(g0)});if(!a.success)throw new eT({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:n,system:e.system}}throw Error("unreachable")}function g2({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function g6({prompt:e,schema:t,schemaPrefix:r=null!=t?"JSON schema:":void 0,schemaSuffix:n=null!=t?"You MUST answer with a JSON object that matches the JSON schema above.":"You MUST answer with JSON."}){return[null!=e&&e.length>0?e:void 0,null!=e&&e.length>0?"":void 0,r,null!=t?JSON.stringify(t):void 0,n].filter(e=>null!=e).join("\n")}function g5(e){let t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{let e=t.getReader();return{async next(){let{done:t,value:r}=await e.read();return t?{done:!0,value:void 0}:{done:!1,value:r}}}},t}var g8={type:"no-schema",jsonSchema:void 0,validatePartialResult:({value:e,textDelta:t})=>({success:!0,value:{partial:e,textDelta:t}}),validateFinalResult:(e,t)=>void 0===e?{success:!1,error:new gh({message:"No object generated: response did not match schema.",text:t.text,response:t.response,usage:t.usage,finishReason:t.finishReason})}:{success:!0,value:e},createElementStream(){throw new e1({functionality:"element streams in no-schema mode"})}},g3=e=>({type:"object",jsonSchema:e.jsonSchema,validatePartialResult:({value:e,textDelta:t})=>({success:!0,value:{partial:e,textDelta:t}}),validateFinalResult:t=>safeValidateTypes2({value:t,schema:e}),createElementStream(){throw new UnsupportedFunctionalityError({functionality:"element streams in object mode"})}}),g4=e=>{let{$schema:t,...r}=e.jsonSchema;return{type:"enum",jsonSchema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:r}},required:["elements"],additionalProperties:!1},validatePartialResult({value:t,latestObject:r,isFirstDelta:n,isFinalDelta:a}){var s;if(!isJSONObject(t)||!isJSONArray(t.elements))return{success:!1,error:new TypeValidationError({value:t,cause:"value must be an object that contains an array of elements"})};let i=t.elements,o=[];for(let t=0;t<i.length;t++){let r=safeValidateTypes2({value:i[t],schema:e});if(t!==i.length-1||a){if(!r.success)return r;o.push(r.value)}}let l=null!=(s=null==r?void 0:r.length)?s:0,u="";return n&&(u+="["),l>0&&(u+=","),u+=o.slice(l).map(e=>JSON.stringify(e)).join(","),a&&(u+="]"),{success:!0,value:{partial:o,textDelta:u}}},validateFinalResult(t){if(!isJSONObject(t)||!isJSONArray(t.elements))return{success:!1,error:new TypeValidationError({value:t,cause:"value must be an object that contains an array of elements"})};let r=t.elements;for(let t of r){let r=safeValidateTypes2({value:t,schema:e});if(!r.success)return r}return{success:!0,value:r}},createElementStream(e){let t=0;return g5(e.pipeThrough(new TransformStream({transform(e,r){switch(e.type){case"object":{let n=e.object;for(;t<n.length;t++)r.enqueue(n[t]);break}case"text-delta":case"finish":case"error":break;default:throw Error(`Unsupported chunk type: ${e}`)}}})))}}},g9=e=>({type:"enum",jsonSchema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:e}},required:["result"],additionalProperties:!1},validateFinalResult(t){if(!isJSONObject(t)||"string"!=typeof t.result)return{success:!1,error:new TypeValidationError({value:t,cause:'value must be an object that contains a string in the "result" property.'})};let r=t.result;return e.includes(r)?{success:!0,value:r}:{success:!1,error:new TypeValidationError({value:t,cause:"value must be a string in the enum"})}},validatePartialResult(){throw new UnsupportedFunctionalityError({functionality:"partial results in enum mode"})},createElementStream(){throw new UnsupportedFunctionalityError({functionality:"element streams in enum mode"})}});e9({prefix:"aiobj",size:24});var g7=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise||(this.promise=new Promise((e,t)=>{"resolved"===this.status.type?e(this.status.value):"rejected"===this.status.type&&t(this.status.error),this._resolve=e,this._reject=t})),this.promise}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&(null==(t=this._resolve)||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&(null==(t=this._reject)||t.call(this,e))}};function be(){let e,t;return{promise:new Promise((r,n)=>{e=r,t=n}),resolve:e,reject:t}}function bt(){let e=[],t=null,r=!1,n=be(),a=async()=>{if(r&&0===e.length){null==t||t.close();return}if(0===e.length)return n=be(),await n.promise,a();try{let{value:n,done:s}=await e[0].read();s?(e.shift(),e.length>0?await a():r&&(null==t||t.close())):null==t||t.enqueue(n)}catch(n){null==t||t.error(n),e.shift(),r&&0===e.length&&(null==t||t.close())}};return{stream:new ReadableStream({start(e){t=e},pull:a,async cancel(){for(let t of e)await t.cancel();e=[],r=!0}}),addStream:t=>{if(r)throw Error("Cannot add inner stream: outer stream is closed");e.push(t.getReader()),n.resolve()},close:()=>{r=!0,n.resolve(),0===e.length&&(null==t||t.close())},terminate:()=>{r=!0,n.resolve(),e.forEach(e=>e.cancel()),e=[],null==t||t.close()}}}e9({prefix:"aiobj",size:24});var br="AI_NoOutputSpecifiedError",bn=`vercel.ai.error.${br}`,ba=Symbol.for(bn),bs=class extends el{constructor({message:e="No output specified."}={}){super({name:br,message:e}),this[G]=!0}static isInstance(e){return el.hasMarker(e,bn)}};G=ba;var bi="AI_ToolExecutionError",bo=`vercel.ai.error.${bi}`,bl=Symbol.for(bo),bu=class extends el{constructor({toolArgs:e,toolName:t,toolCallId:r,cause:n,message:a=`Error executing tool ${t}: ${eg(n)}`}){super({name:bi,message:a,cause:n}),this[H]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=r}static isInstance(e){return el.hasMarker(e,bo)}};H=bl;var bc=/^([\s\S]*?)(\s+)(\S*)$/,bd="AI_InvalidToolArgumentsError",bp=`vercel.ai.error.${bd}`,bf=Symbol.for(bp),bh=class extends el{constructor({toolArgs:e,toolName:t,cause:r,message:n=`Invalid arguments for tool ${t}: ${eg(r)}`}){super({name:bd,message:n,cause:r}),this[K]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return el.hasMarker(e,bp)}};K=bf;var bm="AI_NoSuchToolError",by=`vercel.ai.error.${bm}`,bg=Symbol.for(by),bb=class extends el{constructor({toolName:e,availableTools:t,message:r=`Model tried to call unavailable tool '${e}'. ${void 0===t?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:bm,message:r}),this[W]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return el.hasMarker(e,by)}};W=bg;var bv="AI_ToolCallRepairError",bw=`vercel.ai.error.${bv}`,bx=Symbol.for(bw),b_=class extends el{constructor({cause:e,originalError:t,message:r=`Error repairing tool call: ${eg(e)}`}){super({name:bv,message:r,cause:e}),this[J]=!0,this.originalError=t}static isInstance(e){return el.hasMarker(e,bw)}};async function bE({toolCall:e,tools:t,repairToolCall:r,system:n,messages:a}){if(null==t)throw new bb({toolName:e.toolName});try{return await bI({toolCall:e,tools:t})}catch(i){if(null==r||!(bb.isInstance(i)||bh.isInstance(i)))throw i;let s=null;try{s=await r({toolCall:e,tools:t,parameterSchema:({toolName:e})=>yZ(t[e].parameters).jsonSchema,system:n,messages:a,error:i})}catch(e){throw new b_({cause:e,originalError:i})}if(null==s)throw i;return await bI({toolCall:s,tools:t})}}async function bI({toolCall:e,tools:t}){let r=e.toolName,n=t[r];if(null==n)throw new bb({toolName:e.toolName,availableTools:Object.keys(t)});let a=yZ(n.parameters),s=""===e.args.trim()?tr({value:{},schema:a}):tn({text:e.args,schema:a});if(!1===s.success)throw new bh({toolName:r,toolArgs:e.args,cause:s.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:r,args:s.value}}function bT({text:e="",files:t,reasoning:r,tools:n,toolCalls:a,toolResults:s,messageId:i,generateMessageId:o}){let l=[],u=[];return r.length>0&&u.push(...r.map(e=>"text"===e.type?{...e,type:"reasoning"}:{...e,type:"redacted-reasoning"})),t.length>0&&u.push(...t.map(e=>({type:"file",data:e.base64,mimeType:e.mimeType}))),e.length>0&&u.push({type:"text",text:e}),a.length>0&&u.push(...a),u.length>0&&l.push({role:"assistant",content:u,id:i}),s.length>0&&l.push({role:"tool",id:o(),content:s.map(e=>{let t=n[e.toolName];return(null==t?void 0:t.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:t.experimental_toToolResultContent(e.result),experimental_content:t.experimental_toToolResultContent(e.result)}:{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:e.result}})}),l}J=bx,e9({prefix:"aitxt",size:24}),e9({prefix:"msg",size:24});yG({},{object:()=>bN,text:()=>bj});var bk="AI_InvalidStreamPartError",bP=`vercel.ai.error.${bk}`,bA=Symbol.for(bP),bS=class extends el{constructor({chunk:e,message:t}){super({name:bk,message:t}),this[Y]=!0,this.chunk=e}static isInstance(e){return el.hasMarker(e,bP)}};Y=bA;var bO="vercel.ai.error.AI_MCPClientError",b$=Symbol.for(bO),bC=class extends el{constructor({name:e="MCPClientError",message:t,cause:r}){super({name:e,message:t,cause:r}),this[X]=!0}static isInstance(e){return el.hasMarker(e,bO)}};X=b$;var bj=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt:({system:e})=>e,parsePartial:({text:e})=>({partial:e}),parseOutput:({text:e})=>e}),bN=({schema:e})=>{let t=yZ(e);return{type:"object",responseFormat:({model:e})=>({type:"json",schema:e.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt:({system:e,model:r})=>r.supportsStructuredOutputs?e:g6({prompt:e,schema:t.jsonSchema}),parsePartial({text:e}){let t=yM(e);switch(t.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:t.value};default:{let e=t.state;throw Error(`Unsupported parse state: ${e}`)}}},parseOutput({text:e},r){let n=tn({text:e});if(!n.success)throw new gh({message:"No object generated: could not parse the response.",cause:n.error,text:e,response:r.response,usage:r.usage,finishReason:r.finishReason});let a=tr({value:n.value,schema:t});if(!a.success)throw new gh({message:"No object generated: response did not match schema.",cause:a.error,text:e,response:r.response,usage:r.usage,finishReason:r.finishReason});return a.value}}};async function bM({stream:e,onError:t}){let r=e.getReader();try{for(;;){let{done:e}=await r.read();if(e)break}}catch(e){null==t||t(e)}finally{r.releaseLock()}}function bR(e,t){let r,n,a=e.getReader(),s=t.getReader(),i=!1,o=!1;async function l(e){try{null==r&&(r=a.read());let t=await r;r=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}async function u(e){try{null==n&&(n=s.read());let t=await n;n=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}return new ReadableStream({async pull(e){try{if(i)return void await u(e);if(o)return void await l(e);null==r&&(r=a.read()),null==n&&(n=s.read());let{result:t,reader:c}=await Promise.race([r.then(e=>({result:e,reader:a})),n.then(e=>({result:e,reader:s}))]);t.done||e.enqueue(t.value),c===a?(r=void 0,t.done&&(await u(e),i=!0)):(n=void 0,t.done&&(o=!0,await l(e)))}catch(t){e.error(t)}},cancel(){a.cancel(),s.cancel()}})}var bB=e9({prefix:"aitxt",size:24}),bF=e9({prefix:"msg",size:24}),bU=class{constructor({model:e,telemetry:t,headers:r,settings:n,maxRetries:a,abortSignal:s,system:i,prompt:o,messages:l,tools:u,toolChoice:c,toolCallStreaming:d,transforms:p,activeTools:f,repairToolCall:h,maxSteps:m,output:y,continueSteps:g,providerOptions:b,now:v,currentDate:w,generateId:x,generateMessageId:_,onChunk:E,onError:I,onFinish:T,onStepFinish:k}){var P;let A,S,O,$;if(this.warningsPromise=new g7,this.usagePromise=new g7,this.finishReasonPromise=new g7,this.providerMetadataPromise=new g7,this.textPromise=new g7,this.reasoningPromise=new g7,this.reasoningDetailsPromise=new g7,this.sourcesPromise=new g7,this.filesPromise=new g7,this.toolCallsPromise=new g7,this.toolResultsPromise=new g7,this.requestPromise=new g7,this.responsePromise=new g7,this.stepsPromise=new g7,m<1)throw new yQ({parameter:"maxSteps",value:m,message:"maxSteps must be at least 1"});this.output=y;let C="",j="",N="",M=[],R=[],B=[],F=[],U={id:x(),timestamp:w(),modelId:e.modelId,messages:[]},D=[],z=[],q="initial",L=[],Z=new TransformStream({async transform(e,t){t.enqueue(e);let{part:r}=e;if(("text-delta"===r.type||"reasoning"===r.type||"source"===r.type||"tool-call"===r.type||"tool-result"===r.type||"tool-call-streaming-start"===r.type||"tool-call-delta"===r.type)&&await (null==E?void 0:E({chunk:r})),"error"===r.type&&await (null==I?void 0:I({error:r.error})),"text-delta"===r.type&&(C+=r.textDelta,j+=r.textDelta,N+=r.textDelta),"reasoning"===r.type&&(null==S?(S={type:"text",text:r.textDelta},M.push(S)):S.text+=r.textDelta),"reasoning-signature"===r.type){if(null==S)throw new el({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});S.signature=r.signature,S=void 0}if("redacted-reasoning"===r.type&&M.push({type:"redacted",data:r.data}),"file"===r.type&&R.push(r),"source"===r.type&&(F.push(r.source),B.push(r.source)),"tool-call"===r.type&&D.push(r),"tool-result"===r.type&&z.push(r),"step-finish"===r.type){let e=bT({text:j,files:R,reasoning:M,tools:null!=u?u:{},toolCalls:D,toolResults:z,messageId:r.messageId,generateMessageId:_}),t=L.length,n="done";t+1<m&&(g&&"length"===r.finishReason&&0===D.length?n="continue":D.length>0&&z.length===D.length&&(n="tool-result"));let a={stepType:q,text:C,reasoning:function(e){let t=e.filter(e=>"text"===e.type).map(e=>e.text).join("");return t.length>0?t:void 0}(M),reasoningDetails:M,files:R,sources:B,toolCalls:D,toolResults:z,finishReason:r.finishReason,usage:r.usage,warnings:r.warnings,logprobs:r.logprobs,request:r.request,response:{...r.response,messages:[...U.messages,...e]},providerMetadata:r.experimental_providerMetadata,experimental_providerMetadata:r.experimental_providerMetadata,isContinued:r.isContinued};await (null==k?void 0:k(a)),L.push(a),D=[],z=[],C="",B=[],M=[],R=[],S=void 0,"done"!==n&&(q=n),"continue"!==n&&(U.messages.push(...e),j="")}"finish"===r.type&&(U.id=r.response.id,U.timestamp=r.response.timestamp,U.modelId=r.response.modelId,U.headers=r.response.headers,$=r.usage,O=r.finishReason)},async flush(e){var r;try{if(0===L.length)return;let e=L[L.length-1];X.warningsPromise.resolve(e.warnings),X.requestPromise.resolve(e.request),X.responsePromise.resolve(e.response),X.toolCallsPromise.resolve(e.toolCalls),X.toolResultsPromise.resolve(e.toolResults),X.providerMetadataPromise.resolve(e.experimental_providerMetadata),X.reasoningPromise.resolve(e.reasoning),X.reasoningDetailsPromise.resolve(e.reasoningDetails);let n=null!=O?O:"unknown",a=null!=$?$:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};X.finishReasonPromise.resolve(n),X.usagePromise.resolve(a),X.textPromise.resolve(N),X.sourcesPromise.resolve(F),X.filesPromise.resolve(e.files),X.stepsPromise.resolve(L),await (null==T?void 0:T({finishReason:n,logprobs:void 0,usage:a,text:N,reasoning:e.reasoning,reasoningDetails:e.reasoningDetails,files:e.files,sources:e.sources,toolCalls:e.toolCalls,toolResults:e.toolResults,request:null!=(r=e.request)?r:{},response:e.response,warnings:e.warnings,providerMetadata:e.providerMetadata,experimental_providerMetadata:e.experimental_providerMetadata,steps:L})),A.setAttributes(ga({telemetry:t,attributes:{"ai.response.finishReason":n,"ai.response.text":{output:()=>N},"ai.response.toolCalls":{output:()=>{var t;return(null==(t=e.toolCalls)?void 0:t.length)?JSON.stringify(e.toolCalls):void 0}},"ai.usage.promptTokens":a.promptTokens,"ai.usage.completionTokens":a.completionTokens}}))}catch(t){e.error(t)}finally{A.end()}}}),V=bt();this.addStream=V.addStream,this.closeStream=V.close;let G=V.stream;for(let e of p)G=G.pipeThrough(e({tools:u,stopStream(){V.terminate()}}));this.baseStream=G.pipeThrough(function(e){if(!e)return new TransformStream({transform(e,t){t.enqueue({part:e,partialOutput:void 0})}});let t="",r="",n="";function a({controller:e,partialOutput:t}){e.enqueue({part:{type:"text-delta",textDelta:r},partialOutput:t}),r=""}return new TransformStream({transform(s,i){if("step-finish"===s.type&&a({controller:i}),"text-delta"!==s.type)return void i.enqueue({part:s,partialOutput:void 0});t+=s.textDelta,r+=s.textDelta;let o=e.parsePartial({text:t});if(null!=o){let e=JSON.stringify(o.partial);e!==n&&(a({controller:i,partialOutput:o.partial}),n=e)}},flush(e){r.length>0&&a({controller:e})}})}(y)).pipeThrough(Z);let{maxRetries:H,retry:K}=y3({maxRetries:a}),W=gr(t),J=y9({model:e,telemetry:t,headers:r,settings:{...n,maxRetries:H}}),Y=g1({prompt:{system:null!=(P=null==y?void 0:y.injectIntoSystemPrompt({system:i,model:e}))?P:i,prompt:o,messages:l},tools:u}),X=this;gn({name:"ai.streamText",attributes:ga({telemetry:t,attributes:{...y4({operationId:"ai.streamText",telemetry:t}),...J,"ai.prompt":{input:()=>JSON.stringify({system:i,prompt:o,messages:l})},"ai.settings.maxSteps":m}}),tracer:W,endWhenDone:!1,fn:async a=>{async function o({currentStep:a,responseMessages:l,usage:p,stepType:E,previousStepText:I,hasLeadingWhitespace:T,messageId:k}){var P;let A,S,O,$=0===l.length?Y.type:"messages",C=[...Y.messages,...l],j=await g$({prompt:{type:$,system:Y.system,messages:C},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:null==(P=e.supportsUrl)?void 0:P.bind(e)}),N={type:"regular",...function({tools:e,toolChoice:t,activeTools:r}){return null!=e&&Object.keys(e).length>0?{tools:(null!=r?Object.entries(e).filter(([e])=>r.includes(e)):Object.entries(e)).map(([e,t])=>{let r=t.type;switch(r){case void 0:case"function":return{type:"function",name:e,description:t.description,parameters:yZ(t.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:e,id:t.id,args:t.args};default:throw Error(`Unsupported tool type: ${r}`)}}),toolChoice:null==t?{type:"auto"}:"string"==typeof t?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}({tools:u,toolChoice:c,activeTools:f})},{result:{stream:M,warnings:R,rawResponse:B,request:F},doStreamSpan:U,startTimestampMs:D}=await K(()=>gn({name:"ai.streamText.doStream",attributes:ga({telemetry:t,attributes:{...y4({operationId:"ai.streamText.doStream",telemetry:t}),...J,"ai.prompt.format":{input:()=>$},"ai.prompt.messages":{input:()=>JSON.stringify(j)},"ai.prompt.tools":{input:()=>{var e;return null==(e=N.tools)?void 0:e.map(e=>JSON.stringify(e))}},"ai.prompt.toolChoice":{input:()=>null!=N.toolChoice?JSON.stringify(N.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":n.frequencyPenalty,"gen_ai.request.max_tokens":n.maxTokens,"gen_ai.request.presence_penalty":n.presencePenalty,"gen_ai.request.stop_sequences":n.stopSequences,"gen_ai.request.temperature":n.temperature,"gen_ai.request.top_k":n.topK,"gen_ai.request.top_p":n.topP}}),tracer:W,endWhenDone:!1,fn:async t=>({startTimestampMs:v(),doStreamSpan:t,result:await e.doStream({mode:N,...gj(n),inputFormat:$,responseFormat:null==y?void 0:y.responseFormat({model:e}),prompt:j,providerMetadata:b,abortSignal:s,headers:r})})})),z=function({tools:e,generatorStream:t,toolCallStreaming:r,tracer:n,telemetry:a,system:s,messages:i,abortSignal:o,repairToolCall:l}){let u,c=null,d=new ReadableStream({start(e){c=e}}),p={},f=new Set,h=!1;function m(){h&&0===f.size&&(null!=u&&c.enqueue(u),c.close())}let y=new TransformStream({async transform(t,d){let h=t.type;switch(h){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":d.enqueue(t);break;case"file":d.enqueue(new gl({data:t.data,mimeType:t.mimeType}));break;case"tool-call-delta":r&&(p[t.toolCallId]||(d.enqueue({type:"tool-call-streaming-start",toolCallId:t.toolCallId,toolName:t.toolName}),p[t.toolCallId]=!0),d.enqueue({type:"tool-call-delta",toolCallId:t.toolCallId,toolName:t.toolName,argsTextDelta:t.argsTextDelta}));break;case"tool-call":try{let r=await bE({toolCall:t,tools:e,repairToolCall:l,system:s,messages:i});d.enqueue(r);let u=e[r.toolName];if(null!=u.execute){let e=e7();f.add(e),gn({name:"ai.toolCall",attributes:ga({telemetry:a,attributes:{...y4({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":r.toolName,"ai.toolCall.id":r.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(r.args)}}}),tracer:n,fn:async t=>u.execute(r.args,{toolCallId:r.toolCallId,messages:i,abortSignal:o}).then(n=>{c.enqueue({...r,type:"tool-result",result:n}),f.delete(e),m();try{t.setAttributes(ga({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(n)}}}))}catch(e){}},t=>{c.enqueue({type:"error",error:new bu({toolCallId:r.toolCallId,toolName:r.toolName,toolArgs:r.args,cause:t})}),f.delete(e),m()})})}}catch(e){c.enqueue({type:"error",error:e})}break;case"finish":u={type:"finish",finishReason:t.finishReason,logprobs:t.logprobs,usage:g2(t.usage),experimental_providerMetadata:t.providerMetadata};break;default:throw Error(`Unhandled chunk type: ${h}`)}},flush(){h=!0,m()}});return new ReadableStream({start:async e=>Promise.all([t.pipeThrough(y).pipeTo(new WritableStream({write(t){e.enqueue(t)},close(){}})),d.pipeTo(new WritableStream({write(t){e.enqueue(t)},close(){e.close()}}))])})}({tools:u,generatorStream:M,toolCallStreaming:d,tracer:W,telemetry:t,system:i,messages:C,repairToolCall:h,abortSignal:s}),q=null!=F?F:{},L=[],Z=[],V=[],G=[],H="unknown",Q={promptTokens:0,completionTokens:0,totalTokens:0},ee=!0,et="",er="continue"===E?I:"",en={id:x(),timestamp:w(),modelId:e.modelId},ea="",es=!1,ei=!0,eo=!1;async function el({controller:e,chunk:t}){e.enqueue(t),et+=t.textDelta,er+=t.textDelta,es=!0,eo=t.textDelta.trimEnd()!==t.textDelta}X.addStream(z.pipeThrough(new TransformStream({async transform(e,t){var r,n,a;if(ee){let e=v()-D;ee=!1,U.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":e}),U.setAttributes({"ai.response.msToFirstChunk":e}),t.enqueue({type:"step-start",messageId:k,request:q,warnings:null!=R?R:[]})}if("text-delta"===e.type&&0===e.textDelta.length)return;let s=e.type;switch(s){case"text-delta":if(g){let r=ei&&T?e.textDelta.trimStart():e.textDelta;if(0===r.length)break;ei=!1;let n=function(e){let t=e.match(bc);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}(ea+=r);null!=n&&(ea=n.suffix,await el({controller:t,chunk:{type:"text-delta",textDelta:n.prefix+n.whitespace}}))}else await el({controller:t,chunk:e});break;case"reasoning":t.enqueue(e),null==O?(O={type:"text",text:e.textDelta},V.push(O)):O.text+=e.textDelta;break;case"reasoning-signature":if(t.enqueue(e),null==O)throw new bS({chunk:e,message:"reasoning-signature without reasoning"});O.signature=e.signature,O=void 0;break;case"redacted-reasoning":t.enqueue(e),V.push({type:"redacted",data:e.data});break;case"tool-call":t.enqueue(e),L.push(e);break;case"tool-result":t.enqueue(e),Z.push(e);break;case"response-metadata":en={id:null!=(r=e.id)?r:en.id,timestamp:null!=(n=e.timestamp)?n:en.timestamp,modelId:null!=(a=e.modelId)?a:en.modelId};break;case"finish":{Q=e.usage,H=e.finishReason,A=e.experimental_providerMetadata,S=e.logprobs;let t=v()-D;U.addEvent("ai.stream.finish"),U.setAttributes({"ai.response.msToFinish":t,"ai.response.avgCompletionTokensPerSecond":1e3*Q.completionTokens/t});break}case"file":G.push(e),t.enqueue(e);break;case"source":case"tool-call-streaming-start":case"tool-call-delta":t.enqueue(e);break;case"error":t.enqueue(e),H="error";break;default:throw Error(`Unknown chunk type: ${s}`)}},async flush(e){var r,n;let s=L.length>0?JSON.stringify(L):void 0,i="done";a+1<m&&(g&&"length"===H&&0===L.length?i="continue":L.length>0&&Z.length===L.length&&(i="tool-result")),g&&ea.length>0&&("continue"!==i||"continue"===E&&!es)&&(await el({controller:e,chunk:{type:"text-delta",textDelta:ea}}),ea="");try{U.setAttributes(ga({telemetry:t,attributes:{"ai.response.finishReason":H,"ai.response.text":{output:()=>et},"ai.response.toolCalls":{output:()=>s},"ai.response.id":en.id,"ai.response.model":en.modelId,"ai.response.timestamp":en.timestamp.toISOString(),"ai.usage.promptTokens":Q.promptTokens,"ai.usage.completionTokens":Q.completionTokens,"gen_ai.response.finish_reasons":[H],"gen_ai.response.id":en.id,"gen_ai.response.model":en.modelId,"gen_ai.usage.input_tokens":Q.promptTokens,"gen_ai.usage.output_tokens":Q.completionTokens}}))}catch(e){}finally{U.end()}e.enqueue({type:"step-finish",finishReason:H,usage:Q,providerMetadata:A,experimental_providerMetadata:A,logprobs:S,request:q,response:{...en,headers:null==B?void 0:B.headers},warnings:R,isContinued:"continue"===i,messageId:k});let c=(r=p,n=Q,{promptTokens:r.promptTokens+n.promptTokens,completionTokens:r.completionTokens+n.completionTokens,totalTokens:r.totalTokens+n.totalTokens});if("done"===i)e.enqueue({type:"finish",finishReason:H,usage:c,providerMetadata:A,experimental_providerMetadata:A,logprobs:S,response:{...en,headers:null==B?void 0:B.headers}}),X.closeStream();else{if("continue"===E){let e=l[l.length-1];"string"==typeof e.content?e.content+=et:e.content.push({text:et,type:"text"})}else l.push(...bT({text:et,files:G,reasoning:V,tools:null!=u?u:{},toolCalls:L,toolResults:Z,messageId:k,generateMessageId:_}));await o({currentStep:a+1,responseMessages:l,usage:c,stepType:i,previousStepText:er,hasLeadingWhitespace:eo,messageId:"continue"===i?k:_()})}}})))}A=a,await o({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:_()})}}).catch(e=>{X.addStream(new ReadableStream({start(t){t.enqueue({type:"error",error:e}),t.close()}})),X.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){let[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return g5(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){"text-delta"===e.type&&t.enqueue(e.textDelta)}})))}get fullStream(){return g5(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(e){var t;try{await bM({stream:this.fullStream,onError:null==e?void 0:e.onError})}catch(r){null==(t=null==e?void 0:e.onError)||t.call(e,r)}}get experimental_partialOutputStream(){if(null==this.output)throw new bs;return g5(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){null!=e&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:r=!1,sendSources:n=!1,experimental_sendFinish:a=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(s,i)=>{let o=s.type;switch(o){case"text-delta":i.enqueue(yD("text",s.textDelta));break;case"reasoning":r&&i.enqueue(yD("reasoning",s.textDelta));break;case"redacted-reasoning":r&&i.enqueue(yD("redacted_reasoning",{data:s.data}));break;case"reasoning-signature":r&&i.enqueue(yD("reasoning_signature",{signature:s.signature}));break;case"file":i.enqueue(yD("file",{mimeType:s.mimeType,data:s.base64}));break;case"source":n&&i.enqueue(yD("source",s.source));break;case"tool-call-streaming-start":i.enqueue(yD("tool_call_streaming_start",{toolCallId:s.toolCallId,toolName:s.toolName}));break;case"tool-call-delta":i.enqueue(yD("tool_call_delta",{toolCallId:s.toolCallId,argsTextDelta:s.argsTextDelta}));break;case"tool-call":i.enqueue(yD("tool_call",{toolCallId:s.toolCallId,toolName:s.toolName,args:s.args}));break;case"tool-result":i.enqueue(yD("tool_result",{toolCallId:s.toolCallId,result:s.result}));break;case"error":i.enqueue(yD("error",e(s.error)));break;case"step-start":i.enqueue(yD("start_step",{messageId:s.messageId}));break;case"step-finish":i.enqueue(yD("finish_step",{finishReason:s.finishReason,usage:t?{promptTokens:s.usage.promptTokens,completionTokens:s.usage.completionTokens}:void 0,isContinued:s.isContinued}));break;case"finish":a&&i.enqueue(yD("finish_message",{finishReason:s.finishReason,usage:t?{promptTokens:s.usage.promptTokens,completionTokens:s.usage.completionTokens}:void 0}));break;default:throw Error(`Unknown chunk type: ${o}`)}}}))}pipeDataStreamToResponse(e,{status:t,statusText:r,headers:n,data:a,getErrorMessage:s,sendUsage:i,sendReasoning:o,sendSources:l,experimental_sendFinish:u}={}){yW({response:e,status:t,statusText:r,headers:yK(n,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:a,getErrorMessage:s,sendUsage:i,sendReasoning:o,sendSources:l,experimental_sendFinish:u})})}pipeTextStreamToResponse(e,t){yW({response:e,status:null==t?void 0:t.status,statusText:null==t?void 0:t.statusText,headers:yK(null==t?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){let t=this.toDataStreamInternal({getErrorMessage:null==e?void 0:e.getErrorMessage,sendUsage:null==e?void 0:e.sendUsage,sendReasoning:null==e?void 0:e.sendReasoning,sendSources:null==e?void 0:e.sendSources,experimental_sendFinish:null==e?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return(null==e?void 0:e.data)?bR(null==e?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:null==t?void 0:t.sendUsage,sendReasoning:null==t?void 0:t.sendReasoning,sendSources:null==t?void 0:t.sendSources,experimental_sendFinish:null==t?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:r,data:n,getErrorMessage:a,sendUsage:s,sendReasoning:i,sendSources:o,experimental_sendFinish:l}={}){return new Response(this.toDataStream({data:n,getErrorMessage:a,sendUsage:s,sendReasoning:i,sendSources:o,experimental_sendFinish:l}),{status:t,statusText:r,headers:yH(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:null!=(t=null==e?void 0:e.status)?t:200,headers:yH(null==e?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}},bD="AI_NoSuchProviderError",bz=`vercel.ai.error.${bD}`,bq=Symbol.for(bz),bL=class extends eL{constructor({modelId:e,modelType:t,providerId:r,availableProviders:n,message:a=`No such provider: ${r} (available providers: ${n.join()})`}){super({errorName:bD,modelId:e,modelType:t,message:a}),this[Q]=!0,this.providerId=r,this.availableProviders=n}static isInstance(e){return el.hasMarker(e,bz)}};Q=bq;var bZ="2024-11-05",bV=[bZ,"2024-10-07"],bG=ni.object({name:ni.string(),version:ni.string()}).passthrough(),bH=ni.object({_meta:ni.optional(ni.object({}).passthrough())}).passthrough(),bK=ni.object({method:ni.string(),params:ni.optional(bH)}),bW=ni.object({experimental:ni.optional(ni.object({}).passthrough()),logging:ni.optional(ni.object({}).passthrough()),prompts:ni.optional(ni.object({listChanged:ni.optional(ni.boolean())}).passthrough()),resources:ni.optional(ni.object({subscribe:ni.optional(ni.boolean()),listChanged:ni.optional(ni.boolean())}).passthrough()),tools:ni.optional(ni.object({listChanged:ni.optional(ni.boolean())}).passthrough())}).passthrough(),bJ=bH.extend({protocolVersion:ni.string(),capabilities:bW,serverInfo:bG,instructions:ni.optional(ni.string())}),bY=bH.extend({nextCursor:ni.optional(ni.string())}),bX=ni.object({name:ni.string(),description:ni.optional(ni.string()),inputSchema:ni.object({type:ni.literal("object"),properties:ni.optional(ni.object({}).passthrough())}).passthrough()}).passthrough(),bQ=bY.extend({tools:ni.array(bX)}),b0=ni.object({type:ni.literal("text"),text:ni.string()}).passthrough(),b1=ni.object({type:ni.literal("image"),data:ni.string().base64(),mimeType:ni.string()}).passthrough(),b2=ni.object({uri:ni.string(),mimeType:ni.optional(ni.string())}).passthrough(),b6=b2.extend({text:ni.string()}),b5=b2.extend({blob:ni.string().base64()}),b8=ni.object({type:ni.literal("resource"),resource:ni.union([b6,b5])}).passthrough(),b3=bH.extend({content:ni.array(ni.union([b0,b1,b8])),isError:ni.boolean().default(!1).optional()}).or(bH.extend({toolResult:ni.unknown()})),b4=ni.object({jsonrpc:ni.literal("2.0"),id:ni.union([ni.string(),ni.number().int()])}).merge(bK).strict(),b9=ni.object({jsonrpc:ni.literal("2.0"),id:ni.union([ni.string(),ni.number().int()]),result:bH}).strict(),b7=ni.object({jsonrpc:ni.literal("2.0"),id:ni.union([ni.string(),ni.number().int()]),error:ni.object({code:ni.number().int(),message:ni.string(),data:ni.optional(ni.unknown())})}).strict(),ve=ni.object({jsonrpc:ni.literal("2.0")}).merge(ni.object({method:ni.string(),params:ni.optional(bH)})).strict(),vt=ni.union([b4,ve,b9,b7]),vr=class{constructor({url:e,headers:t}){this.connected=!1,this.url=new URL(e),this.headers=t}async start(){return new Promise((e,t)=>{if(this.connected)return e();this.abortController=new AbortController,(async()=>{var r,n,a;try{let a=new Headers(this.headers);a.set("Accept","text/event-stream");let s=await fetch(this.url.href,{headers:a,signal:null==(r=this.abortController)?void 0:r.signal});if(!s.ok||!s.body){let e=new bC({message:`MCP SSE Transport Error: ${s.status} ${s.statusText}`});return null==(n=this.onerror)||n.call(this,e),t(e)}let i=s.body.pipeThrough(new TextDecoderStream).pipeThrough(createEventSourceParserStream()).getReader(),o=async()=>{var r,n,a;try{for(;;){let{done:t,value:a}=await i.read();if(t){if(this.connected)throw this.connected=!1,new bC({message:"MCP SSE Transport Error: Connection closed unexpectedly"});return}let{event:s,data:o}=a;if("endpoint"===s){if(this.endpoint=new URL(o,this.url),this.endpoint.origin!==this.url.origin)throw new bC({message:`MCP SSE Transport Error: Endpoint origin does not match connection origin: ${this.endpoint.origin}`});this.connected=!0,e()}else if("message"===s)try{let e=vt.parse(JSON.parse(o));null==(r=this.onmessage)||r.call(this,e)}catch(t){let e=new bC({message:"MCP SSE Transport Error: Failed to parse message",cause:t});null==(n=this.onerror)||n.call(this,e)}}}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;null==(a=this.onerror)||a.call(this,e),t(e)}};this.sseConnection={close:()=>i.cancel()},o()}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;null==(a=this.onerror)||a.call(this,e),t(e)}})()})}async close(){var e,t,r;this.connected=!1,null==(e=this.sseConnection)||e.close(),null==(t=this.abortController)||t.abort(),null==(r=this.onclose)||r.call(this)}async send(e){var t,r,n;if(!this.endpoint||!this.connected)throw new bC({message:"MCP SSE Transport Error: Not connected"});try{let n=new Headers(this.headers);n.set("Content-Type","application/json");let a={method:"POST",headers:n,body:JSON.stringify(e),signal:null==(t=this.abortController)?void 0:t.signal},s=await fetch(this.endpoint,a);if(!s.ok){let e=await s.text().catch(()=>null),t=new bC({message:`MCP SSE Transport Error: POSTing to endpoint (HTTP ${s.status}): ${e}`});null==(r=this.onerror)||r.call(this,t);return}}catch(e){null==(n=this.onerror)||n.call(this,e);return}}};function vn(e={}){let t=new TextEncoder,r="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(n,a){a.enqueue(t.encode(n)),r+=n,e.onToken&&await e.onToken(n),e.onText&&"string"==typeof n&&await e.onText(n)},async flush(){e.onCompletion&&await e.onCompletion(r),e.onFinal&&await e.onFinal(r)}})}function va(e,t){return e.pipeThrough(new TransformStream({transform:async(e,t)=>{var r;if("string"==typeof e)return void t.enqueue(e);if("event"in e){"on_chat_model_stream"===e.event&&vl(null==(r=e.data)?void 0:r.chunk,t);return}vl(e,t)}})).pipeThrough(vn(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(e,t)=>{t.enqueue(yD("text",e))}}))}function vs(e,t){return va(e,t).pipeThrough(new TextEncoderStream)}function vi(e,t){var r;let n=va(e,null==t?void 0:t.callbacks).pipeThrough(new TextEncoderStream),a=null==t?void 0:t.data,s=null==t?void 0:t.init;return new Response(a?bR(a.stream,n):n,{status:null!=(r=null==s?void 0:s.status)?r:200,statusText:null==s?void 0:s.statusText,headers:yH(null==s?void 0:s.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function vo(e,t){t.dataStream.merge(va(e,t.callbacks))}function vl(e,t){if("string"==typeof e.content)t.enqueue(e.content);else for(let r of e.content)"text"===r.type&&t.enqueue(r.text)}function vu(e,t){var r;let n,a=(n=!0,e=>(n&&(e=e.trimStart())&&(n=!1),e));return(r=e[Symbol.asyncIterator](),new ReadableStream({async pull(e){try{let{value:t,done:n}=await r.next();n?e.close():e.enqueue(t)}catch(t){e.error(t)}},cancel(){}})).pipeThrough(new TransformStream({async transform(e,t){t.enqueue(a(e.delta))}})).pipeThrough(vn(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(e,t)=>{t.enqueue(yD("text",e))}}))}function vc(e,t){return vu(e,t).pipeThrough(new TextEncoderStream)}function vd(e,t={}){var r;let{init:n,data:a,callbacks:s}=t,i=vu(e,s).pipeThrough(new TextEncoderStream);return new Response(a?bR(a.stream,i):i,{status:null!=(r=null==n?void 0:n.status)?r:200,statusText:null==n?void 0:n.statusText,headers:yH(null==n?void 0:n.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function vp(e,t){t.dataStream.merge(vu(e,t.callbacks))}function vf(e){return e.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase()}yG({},{mergeIntoDataStream:()=>vo,toDataStream:()=>vs,toDataStreamResponse:()=>vi}),yG({},{mergeIntoDataStream:()=>vp,toDataStream:()=>vc,toDataStreamResponse:()=>vd}),nW(vf,"snakeCase"),r(99180);var vh=class{static{nW(this,"PluginBase")}name;toolProviders;constructor(e,t){this.name=e,this.toolProviders=t}getTools(e){let t=[];for(let r of this.toolProviders){let n=Reflect.getMetadata(vm,r.constructor);if(!n){let e=r.constructor.name;console.warn("Function"===e?"Detected a non-instance tool provider. Please ensure you're passing instances of your tool providers, by using `new MyToolProvider(..)`":`No tools found for ${e}. Please ensure you're using the '@Tool' decorator to expose your tools.`);continue}for(let a of n.values())t.push(iW({name:a.name,description:a.description,parameters:a.parameters.schema},t=>{let n=[];return a.walletClient&&(n[a.walletClient.index]=e),n[a.parameters.index]=t,a.target.apply(r,n)}))}return t}},vm=Symbol("goat:tool");function vy(e){return(t,r,n)=>{let{parameters:a,walletClient:s}=vg(t,r),i=Reflect.getMetadata(vm,t.constructor)||new Map;return i.set(r,{target:n.value,name:e.name??vf(r),description:e.description,parameters:a,...s?{walletClient:s}:{}}),Reflect.defineMetadata(vm,i,t.constructor),t}}function vg(e,t){let r=e instanceof Object?e.constructor.name:void 0,n=`Method '${t}'${r?` on class '${r}'`:""}`,a="Tool methods must have at least one parameter that is a Zod schema class created with the createToolParameters function.",s=Reflect.getMetadata("design:paramtypes",e,t);if(null==s)throw Error(`Failed to get parameters for ${n}.`);if(0===s.length)throw Error(`${n} has no parameters. ${a}`);if(s.length>2)throw Error(`${n} has ${s.length} parameters. ${a}`);let i=s.find(vv);if(null==i)throw Error(`${n} has no parameters parameter.

1.) ${a}

2.) Ensure that you are not using 'import type' for the parameters.`);let o=s.find(vb);return{parameters:{index:s.indexOf(i),schema:i.prototype.constructor.schema},...o?{walletClient:{index:s.indexOf(o)}}:{}}}function vb(e){return!!e&&!!e.prototype&&(e===iJ||e.prototype instanceof iJ)}function vv(e){return e.prototype?.constructor?.schema!=null}nW(vy,"Tool"),nW(vg,"validateMethodParameters"),nW(vb,"isWalletClientParameter"),nW(vv,"isParametersParameter");function vw(e,t,r,n){var a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(i=(s<3?a(i):s>3?a(t,r,i):a(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function vx(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}Object.create;function v_(e){return class{static{nW(this,"SchemaHolder")}static schema=e}}Object.create,"function"==typeof SuppressedError&&SuppressedError,nW(v_,"createToolParameters");let vE="0x0000000000000000000000000000000000000000",vI="0x765DE816845861e75A25fCA122bb6898B8B1282a",vT=ni.string().regex(/^0x[a-fA-F0-9]{40}$/,"Must be a valid address");class vk extends v_(ni.object({amount:ni.string().describe("Amount of tokens to deposit"),tokenAddress:vT.describe("Token address to deposit"),account:vT.describe("Account to check balance for"),upliner:vT.describe("Address of the upliner to set"),celoTokenAddress:ni.string().default(vE).describe("CELO"),cusdTokenAddress:ni.string().default(vI).describe("CUSD")})){}let vP=[{type:"constructor",inputs:[],stateMutability:"nonpayable"},{type:"receive",stateMutability:"payable"},{type:"function",name:"CELO_TOKEN_ADDRESS",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"CUSD_TOKEN_ADDRESS",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"allowance",inputs:[{name:"owner",type:"address",internalType:"address"},{name:"spender",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"approve",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"balances",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"celoBalance",type:"uint256",internalType:"uint256"},{name:"cUsdBalance",type:"uint256",internalType:"uint256"},{name:"depositTime",type:"uint256",internalType:"uint256"},{name:"tokenIncentive",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"breakTimelock",inputs:[{name:"tokenAddress",type:"address",internalType:"address"}],outputs:[],stateMutability:"payable"},{type:"function",name:"decimals",inputs:[],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{type:"function",name:"deposit",inputs:[{name:"tokenAddress",type:"address",internalType:"address"},{name:"amount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"payable"},{type:"function",name:"downliners",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"due",inputs:[],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"getBalance",inputs:[{name:"account",type:"address",internalType:"address"},{name:"tokenAddress",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getDownliners",inputs:[{name:"upliner",type:"address",internalType:"address"}],outputs:[{name:"",type:"address[]",internalType:"address[]"}],stateMutability:"view"},{type:"function",name:"lockDuration",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"name",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"setUpliner",inputs:[{name:"upliner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"symbol",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"timeSinceDeposit",inputs:[{name:"depositor",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"transfer",inputs:[{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"upliners",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"withdraw",inputs:[{name:"tokenAddress",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"Approval",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"},{name:"spender",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Deposited",inputs:[{name:"depositor",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"token",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"RewardDistributed",inputs:[{name:"upliner",type:"address",indexed:!0,internalType:"address"},{name:"depositor",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"TimelockBroken",inputs:[{name:"breaker",type:"address",indexed:!0,internalType:"address"},{name:"totalSavings",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"UplinerSet",inputs:[{name:"user",type:"address",indexed:!0,internalType:"address"},{name:"upliner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"Withdrawn",inputs:[{name:"withdrawer",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"token",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"ERC20InsufficientAllowance",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"allowance",type:"uint256",internalType:"uint256"},{name:"needed",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ERC20InsufficientBalance",inputs:[{name:"sender",type:"address",internalType:"address"},{name:"balance",type:"uint256",internalType:"uint256"},{name:"needed",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ERC20InvalidApprover",inputs:[{name:"approver",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidReceiver",inputs:[{name:"receiver",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidSender",inputs:[{name:"sender",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidSpender",inputs:[{name:"spender",type:"address",internalType:"address"}]},{type:"error",name:"ReentrancyGuardReentrantCall",inputs:[]}];class vA{async depositCelo(e,t){return(await e.sendTransaction({to:this.contractAddress,abi:this.abi,functionName:"deposit",args:[t.celoTokenAddress,t.amount]})).hash}async depositCusd(e,t){return(await e.sendTransaction({to:this.contractAddress,abi:this.abi,functionName:"deposit",args:[t.cusdTokenAddress,t.amount]})).hash}async withdraw(e,t){return(await e.sendTransaction({to:this.contractAddress,abi:this.abi,functionName:"withdraw",args:[t.celoTokenAddress,t.cusdTokenAddress,t.account]})).hash}async getBalance(e,t){return(await e.read({address:this.contractAddress,abi:this.abi,functionName:"getBalance",args:[t.account,t.tokenAddress]})).toString()}async breakTimelock(e,t){return(await e.sendTransaction({to:this.contractAddress,abi:this.abi,functionName:"breakTimelock",args:[t.celoTokenAddress,t.cusdTokenAddress]})).hash}async getDownliners(e,t){return(await e.read({address:this.contractAddress,abi:this.abi,functionName:"getDownliners",args:[t.account]})).toString().split(",")}async setUpliner(e,t){return(await e.sendTransaction({to:this.contractAddress,abi:this.abi,functionName:"setUpliner",args:[t.upliner]})).hash}async timeSinceDeposit(e,t){return(await e.read({address:this.contractAddress,abi:this.abi,functionName:"timeSinceDeposit",args:[t.account]})).toString()}constructor(){this.contractAddress="0xD7154A32280c31a510BF248CE35F2627162227b4",this.abi=vP}}vw([vy({name:"depositCelo",description:"Deposit CELO tokens into the Esusu contract"}),vx("design:type",Function),vx("design:paramtypes",[void 0===iY?Object:iY,vk]),vx("design:returntype",Promise)],vA.prototype,"depositCelo",null),vw([vy({name:"depositCusd",description:"Deposit cUSD tokens into the Esusu contract"}),vx("design:type",Function),vx("design:paramtypes",[void 0===iY?Object:iY,vk]),vx("design:returntype",Promise)],vA.prototype,"depositCusd",null),vw([vy({name:"withdraw",description:"Withdraw tokens from the Esusu contract"}),vx("design:type",Function),vx("design:paramtypes",[void 0===iY?Object:iY,vk]),vx("design:returntype",Promise)],vA.prototype,"withdraw",null),vw([vy({name:"getBalance",description:"Get token balance for an account in the Esusu contract"}),vx("design:type",Function),vx("design:paramtypes",[void 0===iY?Object:iY,vk]),vx("design:returntype",Promise)],vA.prototype,"getBalance",null),vw([vy({name:"breakTimelock",description:"Break the timelock for token withdrawal"}),vx("design:type",Function),vx("design:paramtypes",[void 0===iY?Object:iY,vk]),vx("design:returntype",Promise)],vA.prototype,"breakTimelock",null),vw([vy({name:"getDownliners",description:"Get list of downliners for a specific upliner"}),vx("design:type",Function),vx("design:paramtypes",[void 0===iY?Object:iY,vk]),vx("design:returntype",Promise)],vA.prototype,"getDownliners",null),vw([vy({name:"setUpliner",description:"Set an upliner for the current account"}),vx("design:type",Function),vx("design:paramtypes",[void 0===iY?Object:iY,vk]),vx("design:returntype",Promise)],vA.prototype,"setUpliner",null),vw([vy({name:"timeSinceDeposit",description:"Get time elapsed since last deposit for an account"}),vx("design:type",Function),vx("design:paramtypes",[void 0===iY?Object:iY,vk]),vx("design:returntype",Promise)],vA.prototype,"timeSinceDeposit",null);class vS extends vh{constructor(){super("esusu",[new vA]),this.supportsChain=e=>"evm"===e.type}}let vO=()=>new vS;r(97329).config();let v$=function(e){let{key:t="wallet",name:r="Wallet Client",transport:n}=e;return(function(e){let{batch:t,cacheTime:r=e.pollingInterval??4e3,key:n="base",name:s="Base Client",pollingInterval:i=4e3,type:o="base"}=e,l=e.chain,u=e.account?d0(e.account):void 0,{config:c,request:d,value:p}=e.transport({chain:l,pollingInterval:i}),f={account:u,batch:t,cacheTime:r,chain:l,key:n,name:s,pollingInterval:i,request:d,transport:{...c,...p},type:o,uid:function(e=11){if(!a||d1+e>512){a="",d1=0;for(let e=0;e<256;e++)a+=(256+256*Math.random()|0).toString(16).substring(1)}return a.substring(d1,d1+++e)}()};return Object.assign(f,{extend:function e(t){return r=>{let n=r(t);for(let e in f)delete n[e];let a={...t,...n};return Object.assign(a,{extend:e(a)})}}(f)})})({...e,key:t,name:r,transport:e=>n({...e,retryCount:0}),type:"walletClient"}).extend(hj)}({account:function(e){let t=pl(m4.getPublicKey(e.slice(2),!1));return{...function(e){if("string"==typeof e){if(!p$(e))throw new pS({address:e});return{address:e,type:"json-rpc"}}if(!p$(e.address))throw new pS({address:e.address});return{address:e.address,signMessage:e.signMessage,signTransaction:e.signTransaction,signTypedData:e.signTypedData,source:"custom",type:"local"}}({address:function(e){let t=hl(`0x${e.substring(4)}`).substring(26);return hu(`0x${t}`)}(t),signMessage:async({message:t})=>ys({message:t,privateKey:e}),signTransaction:async(t,{serializer:r}={})=>yh({privateKey:e,transaction:t,serializer:r}),signTypedData:async t=>yy({...t,privateKey:e})}),publicKey:t,source:"privateKey"}}(process.env.WALLET_PRIVATE_KEY),transport:function(e,t={}){let{batch:r,fetchOptions:n,key:a="http",name:s="HTTP JSON-RPC",retryDelay:i}=t;return({chain:o,retryCount:l,timeout:u})=>{let{batchSize:c=1e3,wait:d=0}="object"==typeof r?r:{},p=t.retryCount??l,f=u??t.timeout??1e4,h=e||o?.rpcUrls.default.http[0];if(!h)throw new hF;return function({key:e,name:t,request:r,retryCount:n=3,retryDelay:a=150,timeout:s,type:i},o){return{config:{key:e,name:t,request:r,retryCount:n,retryDelay:a,timeout:s,type:i},request:function(e,{retryDelay:t=150,retryCount:r=3}={}){return async n=>(function(e,{delay:t=100,retryCount:r=2,shouldRetry:n=()=>!0}={}){return new Promise((a,s)=>{let i=async({count:o=0}={})=>{let l=async({error:e})=>{let r="function"==typeof t?t({count:o,error:e}):t;r&&await mt(r),i({count:o+1})};try{let t=await e();a(t)}catch(e){if(o<r&&await n({count:o,error:e}))return l({error:e});s(e)}};i()})})(async()=>{try{return await e(n)}catch(e){switch(e.code){case hG.code:throw new hG(e);case hH.code:throw new hH(e);case hK.code:throw new hK(e);case hW.code:throw new hW(e);case hJ.code:throw new hJ(e);case hY.code:throw new hY(e);case hX.code:throw new hX(e);case hQ.code:throw new hQ(e);case h0.code:throw new h0(e);case h1.code:throw new h1(e);case h2.code:throw new h2(e);case h6.code:throw new h6(e);case h5.code:throw new h5(e);case h8.code:throw new h8(e);case h3.code:throw new h3(e);case h4.code:throw new h4(e);case h9.code:throw new h9(e);case h7.code:throw new h7(e);case 5e3:throw new h5(e);default:if(e instanceof d5)throw e;throw new me(e)}}},{delay:({count:e,error:r})=>{if(r&&r instanceof hN){let e=r?.headers?.get("Retry-After");if(e?.match(/\d/))return 1e3*parseInt(e)}return~~(1<<e)*t},retryCount:r,shouldRetry:({error:e})=>!mr(e)})}(r,{retryCount:n,retryDelay:a}),value:o}}({key:a,name:s,async request({method:t,params:a}){let s={method:t,params:a},{schedule:i}=function({fn:e,id:t,shouldSplitBatch:r,wait:n=0,sort:a}){let s=async()=>{let t=l();i();let r=t.map(({args:e})=>e);0!==r.length&&e(r).then(e=>{a&&Array.isArray(e)&&e.sort(a);for(let r=0;r<t.length;r++){let{pendingPromise:n}=t[r];n.resolve?.([e[r],e])}}).catch(e=>{for(let r=0;r<t.length;r++){let{pendingPromise:n}=t[r];n.reject?.(e)}})},i=()=>hU.delete(t),o=()=>l().map(({args:e})=>e),l=()=>hU.get(t)||[],u=e=>hU.set(t,[...l(),e]);return{flush:i,async schedule(e){let t={},a=new Promise((e,r)=>{t.resolve=e,t.reject=r});return(r?.([...o(),e])&&s(),l().length>0)?u({args:e,pendingPromise:t}):(u({args:e,pendingPromise:t}),setTimeout(s,n)),a}}}({id:`${e}`,wait:d,shouldSplitBatch:e=>e.length>c,fn:e=>hL.http(h,{body:e,fetchOptions:n,timeout:f}),sort:(e,t)=>e.id-t.id}),o=async e=>r?i(e):[await hL.http(h,{body:e,fetchOptions:n,timeout:f})],[{error:l,result:u}]=await o(s);if(l)throw new hR({body:s,error:l,url:h});return u},retryCount:p,retryDelay:i,timeout:f,type:"http"},{fetchOptions:n,url:e})}}(process.env.RPC_PROVIDER_URL),chain:yI});async function vC(e){let{messages:t}=await e.json(),r=await iV({wallet:dQ(v$),plugins:[vO()]});return(function({model:e,tools:t,toolChoice:r,system:n,prompt:a,messages:s,maxRetries:i,abortSignal:o,headers:l,maxSteps:u=1,experimental_generateMessageId:c=bF,experimental_output:d,experimental_continueSteps:p=!1,experimental_telemetry:f,experimental_providerMetadata:h,providerOptions:m=h,experimental_toolCallStreaming:y=!1,toolCallStreaming:g=y,experimental_activeTools:b,experimental_repairToolCall:v,experimental_transform:w,onChunk:x,onError:_,onFinish:E,onStepFinish:I,_internal:{now:T=function(){var e,t;return null!=(t=null==(e=null==globalThis?void 0:globalThis.performance)?void 0:e.now())?t:Date.now()},generateId:k=bB,currentDate:P=()=>new Date}={},...A}){var S;return new bU({model:e,telemetry:f,headers:l,settings:A,maxRetries:i,abortSignal:o,system:n,prompt:a,messages:s,tools:t,toolChoice:r,toolCallStreaming:g,transforms:void 0===(S=w)?[]:Array.isArray(S)?S:[S],activeTools:b,repairToolCall:v,maxSteps:u,output:d,continueSteps:p,providerOptions:m,onChunk:x,onError:_,onFinish:E,onStepFinish:I,now:T,currentDate:P,generateId:k,generateMessageId:c})})({model:nH("gpt-4o-mini"),system:"You are a helpful agent that performs onchain transactions like sending celo,cusd, implement dolar-cost-averaging using balmy protocol, tokens etc and provides onchain advice based on data given",tools:r,maxSteps:20,messages:t}).toDataStreamResponse()}let vj=new er.AppRouteRouteModule({definition:{kind:en.RouteKind.APP_ROUTE,page:"/api/chat/route",pathname:"/api/chat",filename:"route",bundlePath:"app/api/chat/route"},resolvedPagePath:"C:\\Users\\ADMIN\\Documents\\Emiri\\esusu\\frontend\\app\\api\\chat\\route.ts",nextConfigOutput:"",userland:et}),{workAsyncStorage:vN,workUnitAsyncStorage:vM,serverHooks:vR}=vj;function vB(){return(0,ea.patchFetch)({workAsyncStorage:vN,workUnitAsyncStorage:vM})}},15782:(e,t,r)=>{"use strict";r.d(t,{M:()=>a});var n=r(24029);class a extends n.C{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}},16285:(e,t,r)=>{"use strict";r.d(t,{n:()=>m});var n=r(58356),a=r(53697),s=r(83534),i=r(80298),o=r(45393),l=r(30891),u=r(66509),c=r(4719),d=r(64080);function p(e,t={}){void 0!==t.size&&(0,c.Sl)(e,{size:t.size});let r=(0,d.My)(e,t);return(0,c.ME)(r,t)}var f=r(53958),h=r(67743);function m(e,t){let r="string"==typeof t?(0,f.aT)(t):t,m=(0,s.l)(r);if(0===(0,i.E)(r)&&e.length>0)throw new n.O;if((0,i.E)(t)&&32>(0,i.E)(t))throw new n.Iy({data:"string"==typeof t?t:(0,d.My)(t),params:e,size:(0,i.E)(t)});let g=0,b=[];for(let t=0;t<e.length;++t){let r=e[t];m.setPosition(g);let[s,i]=function e(t,r,{staticPosition:s}){let i=(0,h.k)(r.type);if(i){let[n,a]=i;return function(t,r,{length:n,staticPosition:a}){if(!n){let n=a+p(t.readBytes(32)),s=n+32;t.setPosition(n);let i=p(t.readBytes(32)),o=y(r),l=0,u=[];for(let n=0;n<i;++n){t.setPosition(s+(o?32*n:l));let[a,i]=e(t,r,{staticPosition:s});l+=i,u.push(a)}return t.setPosition(a+32),[u,32]}if(y(r)){let s=a+p(t.readBytes(32)),i=[];for(let a=0;a<n;++a){t.setPosition(s+32*a);let[n]=e(t,r,{staticPosition:s});i.push(n)}return t.setPosition(a+32),[i,32]}let s=0,i=[];for(let o=0;o<n;++o){let[n,o]=e(t,r,{staticPosition:a+s});s+=o,i.push(n)}return[i,s]}(t,{...r,type:a},{length:n,staticPosition:s})}if("tuple"===r.type)return function(t,r,{staticPosition:n}){let a=0===r.components.length||r.components.some(({name:e})=>!e),s=a?[]:{},i=0;if(y(r)){let o=n+p(t.readBytes(32));for(let n=0;n<r.components.length;++n){let l=r.components[n];t.setPosition(o+i);let[u,c]=e(t,l,{staticPosition:o});i+=c,s[a?n:l?.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<r.components.length;++o){let l=r.components[o],[u,c]=e(t,l,{staticPosition:n});s[a?o:l?.name]=u,i+=c}return[s,i]}(t,r,{staticPosition:s});if("address"===r.type){var f=t;let e=f.readBytes(32);return[(0,a.o)((0,d.My)((0,o.A1)(e,-20))),32]}if("bool"===r.type)return[function(e,t={}){let r=e;if(void 0!==t.size&&((0,c.Sl)(r,{size:t.size}),r=(0,l.B)(r)),r.length>1||r[0]>1)throw new u.xO(r);return!!r[0]}(t.readBytes(32),{size:32}),32];if(r.type.startsWith("bytes"))return function(e,t,{staticPosition:r}){let[n,a]=t.type.split("bytes");if(!a){let t=p(e.readBytes(32));e.setPosition(r+t);let n=p(e.readBytes(32));if(0===n)return e.setPosition(r+32),["0x",32];let a=e.readBytes(n);return e.setPosition(r+32),[(0,d.My)(a),32]}return[(0,d.My)(e.readBytes(Number.parseInt(a),32)),32]}(t,r,{staticPosition:s});if(r.type.startsWith("uint")||r.type.startsWith("int")){var m=t,g=r;let e=g.type.startsWith("int"),n=Number.parseInt(g.type.split("int")[1]||"256"),a=m.readBytes(32);return[n>48?function(e,t={}){void 0!==t.size&&(0,c.Sl)(e,{size:t.size});let r=(0,d.My)(e,t);return(0,c.uU)(r,t)}(a,{signed:e}):p(a,{signed:e}),32]}if("string"===r.type)return function(e,{staticPosition:t}){let r=p(e.readBytes(32));e.setPosition(t+r);let n=p(e.readBytes(32));if(0===n)return e.setPosition(t+32),["",32];let a=e.readBytes(n,32),s=function(e,t={}){let r=e;return void 0!==t.size&&((0,c.Sl)(r,{size:t.size}),r=(0,l.B)(r,{dir:"right"})),new TextDecoder().decode(r)}((0,l.B)(a));return e.setPosition(t+32),[s,32]}(t,{staticPosition:s});throw new n.j(r.type,{docsPath:"/docs/contract/decodeAbiParameters"})}(m,r,{staticPosition:0});g+=i,b.push(s)}return b}function y(e){let{type:t}=e;if("string"===t||"bytes"===t||t.endsWith("[]"))return!0;if("tuple"===t)return e.components?.some(y);let r=(0,h.k)(e.type);return!!(r&&y({...e,type:r[1]}))}},18183:(e,t,r)=>{"use strict";r.d(t,{NO:()=>i,Pj:()=>o,dV:()=>a,nx:()=>l,zd:()=>s});var n=r(61927);n.C,n.C;class a extends n.C{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class s extends n.C{constructor({param:e,name:t}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${t}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class i extends n.C{constructor({param:e,type:t,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${t?` in "${t}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class o extends n.C{constructor({param:e,type:t,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${t?` in "${t}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class l extends n.C{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}},20052:(e,t,r)=>{"use strict";r.d(t,{Vw:()=>m,Fc:()=>d,Id:()=>h,O8:()=>l,qv:()=>c,po:()=>g,Ow:()=>u,ZJ:()=>f,DH:()=>o,ld:()=>y});var n=r(77598),a=r.t(n,2);let s=a&&"object"==typeof a&&"webcrypto"in a?n.webcrypto:a&&"object"==typeof a&&"randomBytes"in a?a:void 0;var i=r(51842);function o(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function l(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function u(e,t){return e<<32-t|e>>>t}let c=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0];function d(e){for(let r=0;r<e.length;r++){var t;e[r]=(t=e[r])<<24&0xff000000|t<<8&0xff0000|t>>>8&65280|t>>>24&255}}(e,t)=>t.toString(16).padStart(2,"0");let p={_0:48,_9:57,A:65,F:70,a:97,f:102};function f(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(e)),(0,i.DO)(e),e}function h(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];(0,i.DO)(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let a=e[t];r.set(a,n),n+=a.length}return r}class m{clone(){return this._cloneInto()}}function y(e){let t=t=>e().update(f(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function g(e=32){if(s&&"function"==typeof s.getRandomValues)return s.getRandomValues(new Uint8Array(e));if(s&&"function"==typeof s.randomBytes)return s.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}},20492:e=>{"use strict";let t="undefined"!=typeof Buffer,r=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function a(e,a,i){null==i&&null!==a&&"object"==typeof a&&(i=a,a=void 0),t&&Buffer.isBuffer(e)&&(e=e.toString()),e&&65279===e.charCodeAt(0)&&(e=e.slice(1));let o=JSON.parse(e,a);if(null===o||"object"!=typeof o)return o;let l=i&&i.protoAction||"error",u=i&&i.constructorAction||"error";if("ignore"===l&&"ignore"===u)return o;if("ignore"!==l&&"ignore"!==u){if(!1===r.test(e)&&!1===n.test(e))return o}else if("ignore"!==l&&"ignore"===u){if(!1===r.test(e))return o}else if(!1===n.test(e))return o;return s(o,{protoAction:l,constructorAction:u,safe:i&&i.safe})}function s(e,{protoAction:t="error",constructorAction:r="error",safe:n}={}){let a=[e];for(;a.length;){let e=a;for(let s of(a=[],e)){if("ignore"!==t&&Object.prototype.hasOwnProperty.call(s,"__proto__")){if(!0===n)return null;if("error"===t)throw SyntaxError("Object contains forbidden prototype property");delete s.__proto__}if("ignore"!==r&&Object.prototype.hasOwnProperty.call(s,"constructor")&&Object.prototype.hasOwnProperty.call(s.constructor,"prototype")){if(!0===n)return null;if("error"===r)throw SyntaxError("Object contains forbidden prototype property");delete s.constructor}for(let e in s){let t=s[e];t&&"object"==typeof t&&a.push(t)}}}return e}function i(e,t,r){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return a(e,t,r)}finally{Error.stackTraceLimit=n}}e.exports=i,e.exports.default=i,e.exports.parse=i,e.exports.safeParse=function(e,t){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return a(e,t,{safe:!0})}catch(e){return null}finally{Error.stackTraceLimit=r}},e.exports.scan=s},20883:(e,t,r)=>{"use strict";r.d(t,{EH:()=>s,YE:()=>o,jF:()=>i,rj:()=>a});var n=r(24029);class a extends n.C{constructor({blockNumber:e,chain:t,contract:r}){super(`Chain "${t.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class s extends n.C{constructor({chain:e,currentChainId:t}){super(`The current chain of the wallet (id: ${t}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class i extends n.C{constructor(){super("No chain was provided to the request.\nPlease provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient.",{name:"ChainNotFoundError"})}}class o extends n.C{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}n.C},21314:(e,t,r)=>{"use strict";r.d(t,{FO:()=>m,If:()=>x,Ji:()=>d,Rv:()=>l,WL:()=>h,Yo:()=>b,ej:()=>p,fC:()=>I,iB:()=>u,kz:()=>i,l9:()=>g,pc:()=>s,sP:()=>E,v7:()=>T,v8:()=>w});var n=r(45722);let a=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function s(e){return a.test(e)}function i(e){return(0,n.Yv)(a,e)}let o=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function l(e){return o.test(e)}function u(e){return(0,n.Yv)(o,e)}let c=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function d(e){return c.test(e)}function p(e){return(0,n.Yv)(c,e)}let f=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function h(e){return f.test(e)}function m(e){return(0,n.Yv)(f,e)}let y=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function g(e){return y.test(e)}function b(e){return(0,n.Yv)(y,e)}let v=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function w(e){return v.test(e)}function x(e){return(0,n.Yv)(v,e)}let _=/^receive\(\) external payable$/;function E(e){return _.test(e)}let I=new Set(["indexed"]),T=new Set(["calldata","memory","storage"])},21820:e=>{"use strict";e.exports=require("os")},23637:(e,t,r)=>{"use strict";r.d(t,{BD:()=>n,Ge:()=>a});let n=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,a=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/},24029:(e,t,r)=>{"use strict";r.d(t,{C:()=>s});let n="2.23.4",a={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:r})=>t?`${e??"https://viem.sh"}${t}${r?`#${r}`:""}`:void 0,version:`viem@${n}`};class s extends Error{constructor(e,t={}){let r=t.cause instanceof s?t.cause.details:t.cause?.message?t.cause.message:t.details,i=t.cause instanceof s&&t.cause.docsPath||t.docsPath,o=a.getDocsUrl?.({...t,docsPath:i});super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...o?[`Docs: ${o}`]:[],...r?[`Details: ${r}`]:[],...a.version?[`Version: ${a.version}`]:[]].join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=i,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=n}walk(e){return function e(t,r){return r?.(t)?t:t&&"object"==typeof t&&"cause"in t&&void 0!==t.cause?e(t.cause,r):r?null:t}(this,e)}}},24278:(e,t,r)=>{"use strict";r.d(t,{m:()=>o});var n=r(58356),a=r(50327),s=r(67743);let i="/docs/contract/encodeDeployData";function o(e){let{abi:t,args:r,bytecode:o}=e;if(!r||0===r.length)return o;let l=t.find(e=>"type"in e&&"constructor"===e.type);if(!l)throw new n.YW({docsPath:i});if(!("inputs"in l)||!l.inputs||0===l.inputs.length)throw new n.YF({docsPath:i});let u=(0,s.h)(l.inputs,r);return(0,a.aP)([o,u])}},25371:(e,t,r)=>{"use strict";r.d(t,{Bv:()=>s});var n=r(64080);let a={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function s(e){let t={};return void 0!==e.authorizationList&&(t.authorizationList=e.authorizationList.map(e=>({address:e.contractAddress,r:e.r,s:e.s,chainId:(0,n.cK)(e.chainId),nonce:(0,n.cK)(e.nonce),...void 0!==e.yParity?{yParity:(0,n.cK)(e.yParity)}:{},...void 0!==e.v&&void 0===e.yParity?{v:(0,n.cK)(e.v)}:{}}))),void 0!==e.accessList&&(t.accessList=e.accessList),void 0!==e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes),void 0!==e.blobs&&("string"!=typeof e.blobs[0]?t.blobs=e.blobs.map(e=>(0,n.My)(e)):t.blobs=e.blobs),void 0!==e.data&&(t.data=e.data),void 0!==e.from&&(t.from=e.from),void 0!==e.gas&&(t.gas=(0,n.cK)(e.gas)),void 0!==e.gasPrice&&(t.gasPrice=(0,n.cK)(e.gasPrice)),void 0!==e.maxFeePerBlobGas&&(t.maxFeePerBlobGas=(0,n.cK)(e.maxFeePerBlobGas)),void 0!==e.maxFeePerGas&&(t.maxFeePerGas=(0,n.cK)(e.maxFeePerGas)),void 0!==e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=(0,n.cK)(e.maxPriorityFeePerGas)),void 0!==e.nonce&&(t.nonce=(0,n.cK)(e.nonce)),void 0!==e.to&&(t.to=e.to),void 0!==e.type&&(t.type=a[e.type]),void 0!==e.value&&(t.value=(0,n.cK)(e.value)),t}},26361:(e,t,r)=>{"use strict";r.d(t,{Ao:()=>a,Au:()=>n});let n=2n**16n-1n,a=2n**256n-1n},28286:(e,t,r)=>{"use strict";r.d(t,{iY:()=>l});var n=r(58356),a=r(11246),s=r(83593),i=r(97705),o=r(97339);function l(e){let t,{abi:r,args:l=[],name:u}=e,c=(0,a.q)(u,{strict:!1}),d=r.filter(e=>c?"function"===e.type?(0,o.V)(e)===u:"event"===e.type&&(0,i.h)(e)===u:"name"in e&&e.name===u);if(0!==d.length){if(1===d.length)return d[0];for(let e of d){if("inputs"in e){if(!l||0===l.length){if(!e.inputs||0===e.inputs.length)return e;continue}if(e.inputs&&0!==e.inputs.length&&e.inputs.length===l.length&&l.every((t,r)=>{let n="inputs"in e&&e.inputs[r];return!!n&&function e(t,r){let n=typeof t,a=r.type;switch(a){case"address":return(0,s.P)(t,{strict:!1});case"bool":return"boolean"===n;case"function":case"string":return"string"===n;default:if("tuple"===a&&"components"in r)return Object.values(r.components).every((r,n)=>e(Object.values(t)[n],r));if(/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(a))return"number"===n||"bigint"===n;if(/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(a))return"string"===n||t instanceof Uint8Array;if(/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(a))return Array.isArray(t)&&t.every(t=>e(t,{...r,type:a.replace(/(\[[0-9]{0,}\])$/,"")}));return!1}}(t,n)})){if(t&&"inputs"in t&&t.inputs){let r=function e(t,r,n){for(let a in t){let i=t[a],o=r[a];if("tuple"===i.type&&"tuple"===o.type&&"components"in i&&"components"in o)return e(i.components,o.components,n[a]);let l=[i.type,o.type];if(l.includes("address")&&l.includes("bytes20")||(l.includes("address")&&l.includes("string")||l.includes("address")&&l.includes("bytes"))&&(0,s.P)(n[a],{strict:!1}))return l}}(e.inputs,t.inputs,l);if(r)throw new n.nM({abiItem:e,type:r[0]},{abiItem:t,type:r[1]})}t=e}}}return t||d[0]}}},29021:e=>{"use strict";e.exports=require("fs")},29172:(e,t,r)=>{"use strict";r.d(t,{l:()=>s});var n=r(24029),a=r(85408);function s(e,t){let r=(e.details||"").toLowerCase(),s=e instanceof n.C?e.walk(e=>e?.code===a.A7.code):e;return s instanceof n.C?new a.A7({cause:e,message:s.details}):a.A7.nodeMessage.test(r)?new a.A7({cause:e,message:e.details}):a.BG.nodeMessage.test(r)?new a.BG({cause:e,maxFeePerGas:t?.maxFeePerGas}):a.jj.nodeMessage.test(r)?new a.jj({cause:e,maxFeePerGas:t?.maxFeePerGas}):a.K0.nodeMessage.test(r)?new a.K0({cause:e,nonce:t?.nonce}):a.Oh.nodeMessage.test(r)?new a.Oh({cause:e,nonce:t?.nonce}):a.vW.nodeMessage.test(r)?new a.vW({cause:e,nonce:t?.nonce}):a.k5.nodeMessage.test(r)?new a.k5({cause:e}):a.lY.nodeMessage.test(r)?new a.lY({cause:e,gas:t?.gas}):a.Fo.nodeMessage.test(r)?new a.Fo({cause:e,gas:t?.gas}):a.uC.nodeMessage.test(r)?new a.uC({cause:e}):a.lN.nodeMessage.test(r)?new a.lN({cause:e,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas}):new a.RM({cause:e})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30891:(e,t,r)=>{"use strict";function n(e,{dir:t="left"}={}){let r="string"==typeof e?e.replace("0x",""):e,a=0;for(let e=0;e<r.length-1;e++)if("0"===r["left"===t?e:r.length-e-1].toString())a++;else break;return(r="left"===t?r.slice(a):r.slice(0,r.length-a),"string"==typeof e)?(1===r.length&&"right"===t&&(r=`${r}0`),`0x${r.length%2==1?`0${r}`:r}`):r}r.d(t,{B:()=>n})},33069:(e,t,r)=>{"use strict";r.d(t,{UG:()=>i,xo:()=>a,zz:()=>s});var n=r(61927);class a extends n.C{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class s extends n.C{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class i extends n.C{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}},33873:e=>{"use strict";e.exports=require("path")},34607:(e,t,r)=>{"use strict";r.d(t,{Ci:()=>i,J8:()=>o});var n=r(53347),a=r(24029),s=r(62647);class i extends a.C{constructor({body:e,cause:t,details:r,headers:a,status:i,url:o}){super("HTTP request failed.",{cause:t,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${(0,s.I)(o)}`,e&&`Request body: ${(0,n.A)(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=a,this.status=i,this.url=o}}a.C;class o extends a.C{constructor({body:e,error:t,url:r}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${(0,s.I)(r)}`,`Request body: ${(0,n.A)(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data}}a.C,a.C},34693:(e,t,r)=>{"use strict";r.d(t,{p:()=>c});var n=r(50327),a=r(67743),s=r(58356),i=r(97339),o=r(39491),l=r(28286);let u="/docs/contract/encodeFunctionData";function c(e){let{args:t}=e,{abi:r,functionName:c}=(()=>{if(1===e.abi.length&&e.functionName?.startsWith("0x"))return e;let{abi:t,args:r,functionName:n}=e,a=t[0];if(n){let e=(0,l.iY)({abi:t,args:r,name:n});if(!e)throw new s.Iz(n,{docsPath:u});a=e}if("function"!==a.type)throw new s.Iz(void 0,{docsPath:u});return{abi:[a],functionName:(0,i.V)((0,o.B)(a))}})(),d=r[0],p="inputs"in d&&d.inputs?(0,a.h)(d.inputs,t??[]):void 0;return(0,n.aP)([c,p??"0x"])}},35154:(e,t,r)=>{"use strict";r.d(t,{X9:()=>i,s7:()=>a,x8:()=>s});var n=r(61927);class a extends n.C{constructor({signature:e,type:t}){super(`Invalid ${t} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class s extends n.C{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class i extends n.C{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}},35491:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});class n extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let e=this.keys().next().value;e&&this.delete(e)}return this}}},35604:(e,t,r)=>{"use strict";r.d(t,{T:()=>T});var n=r(21314),a=r(3657),s=r(6528);function i(e){let t=(0,a.e)(e),r=[],i=e.length;for(let a=0;a<i;a++){let i=e[a];(0,n.WL)(i)||r.push((0,s.uT)(i,t))}return r}var o=r(52049),l=r(57563),u=r(97185),c=r(24029),d=r(20883),p=r(84439),f=r(98900),h=r(24278),m=r(34693),y=r(74297),g=r(64080),b=r(90580),v=r(69005),w=r(25371),x=r(72927);let _=new Map;var E=r(90455),I=r(93154);async function T(e,t){let{account:n=e.account,batch:a=!!e.batch?.multicall,blockNumber:s,blockTag:l="latest",accessList:f,blobs:m,code:y,data:x,factory:_,factoryData:T,gas:P,gasPrice:A,maxFeePerBlobGas:S,maxFeePerGas:O,maxPriorityFeePerGas:$,nonce:C,to:j,value:N,stateOverride:M,...R}=t,B=n?(0,o.J)(n):void 0;if(y&&(_||T))throw new c.C("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(y&&j)throw new c.C("Cannot provide both `code` & `to` as parameters.");let F=y&&x,U=_&&T&&j&&x,D=F||U,z=F?function(e){let{code:t,data:r}=e;return(0,h.m)({abi:i(["constructor(bytes, bytes)"]),bytecode:u.LX,args:[t,r]})}({code:y,data:x}):U?function(e){let{data:t,factory:r,factoryData:n,to:a}=e;return(0,h.m)({abi:i(["constructor(address, bytes, address, bytes)"]),bytecode:u.WN,args:[a,t,r,n]})}({data:x,factory:_,factoryData:T,to:j}):x;try{(0,I.c)(t);let r=(s?(0,g.cK)(s):void 0)||l,n=(0,E.yH)(M),i=e.chain?.formatters?.transactionRequest?.format,o=(i||w.Bv)({...(0,v.o)(R,{format:i}),from:B?.address,accessList:f,blobs:m,data:z,gas:P,gasPrice:A,maxFeePerBlobGas:S,maxFeePerGas:O,maxPriorityFeePerGas:$,nonce:C,to:D?void 0:j,value:N});if(a&&function({request:e}){let{data:t,to:r,...n}=e;return!(!t||t.startsWith("0x82ad56cb"))&&!!r&&!(Object.values(n).filter(e=>void 0!==e).length>0)}({request:o})&&!n)try{return await k(e,{...o,blockNumber:s,blockTag:l})}catch(e){if(!(e instanceof d.YE)&&!(e instanceof d.rj))throw e}let u=await e.request({method:"eth_call",params:n?[o,r,n]:[o,r]});if("0x"===u)return{data:void 0};return{data:u}}catch(i){let n=function(e){if(!(e instanceof c.C))return;let t=e.walk();return"object"==typeof t?.data?t.data?.data:t.data}(i),{offchainLookup:a,offchainLookupSignature:s}=await r.e(8043).then(r.bind(r,38043));if(!1!==e.ccipRead&&n?.slice(0,10)===s&&j)return{data:await a(e,{data:n,to:j})};if(D&&n?.slice(0,10)==="0x101bb98d")throw new p.Po({factory:_});throw(0,b.d)(i,{...t,account:B,chain:e.chain})}}async function k(e,t){let{batchSize:r=1024,wait:n=0}="object"==typeof e.batch?.multicall?e.batch.multicall:{},{blockNumber:a,blockTag:s="latest",data:i,multicallAddress:o,to:u}=t,c=o;if(!c){if(!e.chain)throw new d.YE;c=(0,y.M)({blockNumber:a,chain:e.chain,contract:"multicall3"})}let h=(a?(0,g.cK)(a):void 0)||s,{schedule:b}=function({fn:e,id:t,shouldSplitBatch:r,wait:n=0,sort:a}){let s=async()=>{let t=l();i();let r=t.map(({args:e})=>e);0!==r.length&&e(r).then(e=>{a&&Array.isArray(e)&&e.sort(a);for(let r=0;r<t.length;r++){let{resolve:n}=t[r];n?.([e[r],e])}}).catch(e=>{for(let r=0;r<t.length;r++){let{reject:n}=t[r];n?.(e)}})},i=()=>_.delete(t),o=()=>l().map(({args:e})=>e),l=()=>_.get(t)||[],u=e=>_.set(t,[...l(),e]);return{flush:i,async schedule(e){let{promise:t,resolve:a,reject:i}=(0,x.Y)();return(r?.([...o(),e])&&s(),l().length>0)?u({args:e,resolve:a,reject:i}):(u({args:e,resolve:a,reject:i}),setTimeout(s,n)),t}}}({id:`${e.uid}.${h}`,wait:n,shouldSplitBatch:e=>e.reduce((e,{data:t})=>e+(t.length-2),0)>2*r,fn:async t=>{let r=t.map(e=>({allowFailure:!0,callData:e.data,target:e.to})),n=(0,m.p)({abi:l.v2,args:[r],functionName:"aggregate3"}),a=await e.request({method:"eth_call",params:[{data:n,to:c},h]});return(0,f.e)({abi:l.v2,args:[r],functionName:"aggregate3",data:a||"0x"})}}),[{returnData:v,success:w}]=await b({data:i,to:u});if(!w)throw new p.$S({data:v});return"0x"===v?{data:void 0}:{data:v}}},38338:(e,t,r)=>{"use strict";r.d(t,{W:()=>u});var n=r(88981),a=r(58356),s=r(45393),i=r(97339),o=r(16285),l=r(39491);function u(e){let{abi:t,data:r}=e,u=(0,s.di)(r,0,4);if("0x"===u)throw new a.O;let c=[...t||[],n.Mc,n.J9].find(e=>"error"===e.type&&u===(0,i.V)((0,l.B)(e)));if(!c)throw new a.Wq(u,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:c,args:"inputs"in c&&c.inputs&&c.inputs.length>0?(0,o.n)(c.inputs,(0,s.di)(r,4)):void 0,errorName:c.name}}},39491:(e,t,r)=>{"use strict";r.d(t,{A:()=>s,B:()=>a});var n=r(58356);function a(e,{includeName:t=!1}={}){if("function"!==e.type&&"event"!==e.type&&"error"!==e.type)throw new n.d_(e.type);return`${e.name}(${s(e.inputs,{includeName:t})})`}function s(e,{includeName:t=!1}={}){return e?e.map(e=>(function(e,{includeName:t}){return e.type.startsWith("tuple")?`(${s(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")})(e,{includeName:t})).join(t?", ":","):""}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},45393:(e,t,r)=>{"use strict";r.d(t,{A1:()=>u,di:()=>i,iN:()=>c});var n=r(56920),a=r(11246),s=r(80298);function i(e,t,r,{strict:n}={}){return(0,a.q)(e,{strict:!1})?c(e,t,r,{strict:n}):u(e,t,r,{strict:n})}function o(e,t){if("number"==typeof t&&t>0&&t>(0,s.E)(e)-1)throw new n.ii({offset:t,position:"start",size:(0,s.E)(e)})}function l(e,t,r){if("number"==typeof t&&"number"==typeof r&&(0,s.E)(e)!==r-t)throw new n.ii({offset:r,position:"end",size:(0,s.E)(e)})}function u(e,t,r,{strict:n}={}){o(e,t);let a=e.slice(t,r);return n&&l(a,t,r),a}function c(e,t,r,{strict:n}={}){o(e,t);let a=`0x${e.replace("0x","").slice((t??0)*2,(r??e.length)*2)}`;return n&&l(a,t,r),a}},45455:(e,t,r)=>{"use strict";r.d(t,{Hi:()=>a,ft:()=>s,uj:()=>o});var n=r(24029);class a extends n.C{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class s extends n.C{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function i(e){return e.reduce((e,{slot:t,value:r})=>`${e}        ${t}: ${r}
`,"")}function o(e){return e.reduce((e,{address:t,...r})=>{let n=`${e}    ${t}:
`;return r.nonce&&(n+=`      nonce: ${r.nonce}
`),r.balance&&(n+=`      balance: ${r.balance}
`),r.code&&(n+=`      code: ${r.code}
`),r.state&&(n+="      state:\n",n+=i(r.state)),r.stateDiff&&(n+="      stateDiff:\n",n+=i(r.stateDiff)),n},"  State Override:\n").slice(0,-1)}},45614:(e,t,r)=>{"use strict";r.d(t,{B:()=>a});var n=r(56228);function a(e){return"function"===e.type?`function ${e.name}(${(0,n.Q)(e.inputs)})${e.stateMutability&&"nonpayable"!==e.stateMutability?` ${e.stateMutability}`:""}${e.outputs?.length?` returns (${(0,n.Q)(e.outputs)})`:""}`:"event"===e.type?`event ${e.name}(${(0,n.Q)(e.inputs)})`:"error"===e.type?`error ${e.name}(${(0,n.Q)(e.inputs)})`:"constructor"===e.type?`constructor(${(0,n.Q)(e.inputs)})${"payable"===e.stateMutability?" payable":""}`:"fallback"===e.type?`fallback() external${"payable"===e.stateMutability?" payable":""}`:"receive() external payable"}},45722:(e,t,r)=>{"use strict";function n(e,t){let r=e.exec(t);return r?.groups}r.d(t,{BD:()=>a,Ge:()=>s,Yv:()=>n,wj:()=>i});let a=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,s=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,i=/^\(.+?\).*?$/},48730:(e,t,r)=>{"use strict";r.d(t,{eL:()=>n,sz:()=>a});let n={gwei:9,wei:18},a={ether:-9,wei:9}},49802:(e,t,r)=>{"use strict";r.d(t,{$s:()=>u,Kc:()=>d,Kz:()=>c,Vg:()=>l,WA:()=>p,aO:()=>i,n3:()=>o});var n=r(97268),a=r(93490),s=r(24029);function i(e){let t=Object.entries(e).map(([e,t])=>void 0===t||!1===t?null:[e,t]).filter(Boolean),r=t.reduce((e,[t])=>Math.max(e,t.length),0);return t.map(([e,t])=>`  ${`${e}:`.padEnd(r+1)}  ${t}`).join("\n")}class o extends s.C{constructor(){super("Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.\nUse `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others.",{name:"FeeConflictError"})}}s.C;class l extends s.C{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",i(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}s.C,s.C,s.C;class u extends s.C{constructor(e,{account:t,docsPath:r,chain:s,data:o,gas:l,gasPrice:u,maxFeePerGas:c,maxPriorityFeePerGas:d,nonce:p,to:f,value:h}){super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",i({chain:s&&`${s?.name} (id: ${s?.id})`,from:t?.address,to:f,value:void 0!==h&&`${(0,n.c)(h)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:l,gasPrice:void 0!==u&&`${(0,a.Q)(u)} gwei`,maxFeePerGas:void 0!==c&&`${(0,a.Q)(c)} gwei`,maxPriorityFeePerGas:void 0!==d&&`${(0,a.Q)(d)} gwei`,nonce:p})].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class c extends s.C{constructor({blockHash:e,blockNumber:t,blockTag:r,hash:n,index:a}){let s="Transaction";r&&void 0!==a&&(s=`Transaction at block time "${r}" at index "${a}"`),e&&void 0!==a&&(s=`Transaction at block hash "${e}" at index "${a}"`),t&&void 0!==a&&(s=`Transaction at block number "${t}" at index "${a}"`),n&&(s=`Transaction with hash "${n}"`),super(`${s} could not be found.`,{name:"TransactionNotFoundError"})}}class d extends s.C{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class p extends s.C{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}},50327:(e,t,r)=>{"use strict";function n(e){return"string"==typeof e[0]?a(e):function(e){let t=0;for(let r of e)t+=r.length;let r=new Uint8Array(t),n=0;for(let t of e)r.set(t,n),n+=t.length;return r}(e)}function a(e){return`0x${e.reduce((e,t)=>e+t.replace("0x",""),"")}`}r.d(t,{aP:()=>a,xW:()=>n})},51842:(e,t,r)=>{"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function a(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function s(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function i(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function o(e,t){a(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}r.d(t,{CC:()=>i,DO:()=>a,Fe:()=>n,Ht:()=>o,sd:()=>s})},52049:(e,t,r)=>{"use strict";function n(e){return"string"==typeof e?{address:e,type:"json-rpc"}:e}r.d(t,{J:()=>n})},53347:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(e,t,r)=>JSON.stringify(e,(e,r)=>{let n="bigint"==typeof r?r.toString():r;return"function"==typeof t?t(e,n):n},r)},53697:(e,t,r)=>{"use strict";r.d(t,{b:()=>c,o:()=>u});var n=r(15782),a=r(53958),s=r(57131),i=r(35491),o=r(83593);let l=new i.A(8192);function u(e,t){if(l.has(`${e}.${t}`))return l.get(`${e}.${t}`);let r=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),n=(0,s.S)((0,a.Af)(r),"bytes"),i=(t?r.substring(`${t}0x`.length):r).split("");for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&i[e]&&(i[e]=i[e].toUpperCase()),(15&n[e>>1])>=8&&i[e+1]&&(i[e+1]=i[e+1].toUpperCase());let o=`0x${i.join("")}`;return l.set(`${e}.${t}`,o),o}function c(e,t){if(!(0,o.P)(e,{strict:!1}))throw new n.M({address:e});return u(e,t)}},53958:(e,t,r)=>{"use strict";r.d(t,{Af:()=>f,ZJ:()=>u,aT:()=>p});var n=r(24029),a=r(11246),s=r(99134),i=r(4719),o=r(64080);let l=new TextEncoder;function u(e,t={}){var r,n;return"number"==typeof e||"bigint"==typeof e?(r=e,n=t,p((0,o.cK)(r,n))):"boolean"==typeof e?function(e,t={}){let r=new Uint8Array(1);return(r[0]=Number(e),"number"==typeof t.size)?((0,i.Sl)(r,{size:t.size}),(0,s.eV)(r,{size:t.size})):r}(e,t):(0,a.q)(e)?p(e,t):f(e,t)}let c={zero:48,nine:57,A:65,F:70,a:97,f:102};function d(e){return e>=c.zero&&e<=c.nine?e-c.zero:e>=c.A&&e<=c.F?e-(c.A-10):e>=c.a&&e<=c.f?e-(c.a-10):void 0}function p(e,t={}){let r=e;t.size&&((0,i.Sl)(r,{size:t.size}),r=(0,s.eV)(r,{dir:"right",size:t.size}));let a=r.slice(2);a.length%2&&(a=`0${a}`);let o=a.length/2,l=new Uint8Array(o);for(let e=0,t=0;e<o;e++){let r=d(a.charCodeAt(t++)),s=d(a.charCodeAt(t++));if(void 0===r||void 0===s)throw new n.C(`Invalid byte sequence ("${a[t-2]}${a[t-1]}" in "${a}").`);l[e]=16*r+s}return l}function f(e,t={}){let r=l.encode(e);return"number"==typeof t.size?((0,i.Sl)(r,{size:t.size}),(0,s.eV)(r,{dir:"right",size:t.size})):r}},54602:(e,t,r)=>{"use strict";r.d(t,{secp256k1:()=>eE});var n={};r.r(n),r.d(n,{aK:()=>O,e8:()=>h,DO:()=>f,dJ:()=>$,OG:()=>C,My:()=>y,Ph:()=>_,lX:()=>E,Id:()=>P,fg:()=>M,qj:()=>k,aT:()=>x,r4:()=>S,aY:()=>p,x:()=>F,lq:()=>I,z:()=>T,zW:()=>g,Q5:()=>B});var a=r(69806),s=r(51842),i=r(20052);class o extends i.Vw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,s.sd)(e);let r=(0,i.ZJ)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,a=new Uint8Array(n);a.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<a.length;e++)a[e]^=54;this.iHash.update(a),this.oHash=e.create();for(let e=0;e<a.length;e++)a[e]^=106;this.oHash.update(a),a.fill(0)}update(e){return(0,s.CC)(this),this.iHash.update(e),this}digestInto(e){(0,s.CC)(this),(0,s.DO)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:a,blockLen:s,outputLen:i}=this;return e.finished=n,e.destroyed=a,e.blockLen=s,e.outputLen=i,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let l=(e,t,r)=>new o(e,t).update(r).digest();l.create=(e,t)=>new o(e,t);let u=BigInt(0),c=BigInt(1),d=BigInt(2);function p(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function f(e){if(!p(e))throw Error("Uint8Array expected")}function h(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}let m=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function y(e){f(e);let t="";for(let r=0;r<e.length;r++)t+=m[e[r]];return t}function g(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function b(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?u:BigInt("0x"+e)}let v={_0:48,_9:57,A:65,F:70,a:97,f:102};function w(e){return e>=v._0&&e<=v._9?e-v._0:e>=v.A&&e<=v.F?e-(v.A-10):e>=v.a&&e<=v.f?e-(v.a-10):void 0}function x(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,a=0;t<r;t++,a+=2){let r=w(e.charCodeAt(a)),s=w(e.charCodeAt(a+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[a]+e[a+1])+'" at index '+a);n[t]=16*r+s}return n}function _(e){return b(y(e))}function E(e){return f(e),b(y(Uint8Array.from(e).reverse()))}function I(e,t){return x(e.toString(16).padStart(2*t,"0"))}function T(e,t){return I(e,t).reverse()}function k(e,t,r){let n;if("string"==typeof t)try{n=x(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(p(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let a=n.length;if("number"==typeof r&&a!==r)throw Error(e+" of length "+r+" expected, got "+a);return n}function P(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];f(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let a=e[t];r.set(a,n),n+=a.length}return r}let A=e=>"bigint"==typeof e&&u<=e;function S(e,t,r){return A(e)&&A(t)&&A(r)&&t<=e&&e<r}function O(e,t,r,n){if(!S(t,r,n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function $(e){let t;for(t=0;e>u;e>>=c,t+=1);return t}let C=e=>(d<<BigInt(e-1))-c,j=e=>new Uint8Array(e),N=e=>Uint8Array.from(e);function M(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=j(e),a=j(e),s=0,i=()=>{n.fill(1),a.fill(0),s=0},o=(...e)=>r(a,n,...e),l=(e=j())=>{a=o(N([0]),e),n=o(),0!==e.length&&(a=o(N([1]),e),n=o())},u=()=>{if(s++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=o()).slice();r.push(t),e+=n.length}return P(...r)};return(e,t)=>{let r;for(i(),l(e);!(r=t(u()));)l();return i(),r}}let R={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||p(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function B(e,t,r={}){let n=(t,r,n)=>{let a=R[r];if("function"!=typeof a)throw Error("invalid validator function");let s=e[t];if((!n||void 0!==s)&&!a(s,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}function F(e){let t=new WeakMap;return(r,...n)=>{let a=t.get(r);if(void 0!==a)return a;let s=e(r,...n);return t.set(r,s),s}}let U=BigInt(0),D=BigInt(1),z=BigInt(2),q=BigInt(3),L=BigInt(4),Z=BigInt(5),V=BigInt(8);function G(e,t){let r=e%t;return r>=U?r:t+r}function H(e,t,r){let n=e;for(;t-- >U;)n*=n,n%=r;return n}function K(e,t){if(e===U)throw Error("invert: expected non-zero number");if(t<=U)throw Error("invert: expected positive modulus, got "+t);let r=G(e,t),n=t,a=U,s=D,i=D,o=U;for(;r!==U;){let e=n/r,t=n%r,l=a-i*e,u=s-o*e;n=r,r=t,a=i,s=o,i=l,o=u}if(n!==D)throw Error("invert: does not exist");return G(a,t)}let W=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function J(e,t){let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Y(e,t,r=!1,n={}){let a;if(e<=U)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:s,nByteLength:i}=J(e,t);if(i>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let o=Object.freeze({ORDER:e,isLE:r,BITS:s,BYTES:i,MASK:C(s),ZERO:U,ONE:D,create:t=>G(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return U<=t&&t<e},is0:e=>e===U,isOdd:e=>(e&D)===D,neg:t=>G(-t,e),eql:(e,t)=>e===t,sqr:t=>G(t*t,e),add:(t,r)=>G(t+r,e),sub:(t,r)=>G(t-r,e),mul:(t,r)=>G(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<U)throw Error("invalid exponent, negatives unsupported");if(r===U)return e.ONE;if(r===D)return t;let n=e.ONE,a=t;for(;r>U;)r&D&&(n=e.mul(n,a)),a=e.sqr(a),r>>=D;return n})(o,e,t),div:(t,r)=>G(t*K(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>K(t,e),sqrt:n.sqrt||(t=>(a||(a=function(e){if(e%L===q){let t=(e+D)/L;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%V===Z){let t=(e-Z)/V;return function(e,r){let n=e.mul(r,z),a=e.pow(n,t),s=e.mul(r,a),i=e.mul(e.mul(s,z),a),o=e.mul(s,e.sub(i,e.ONE));if(!e.eql(e.sqr(o),r))throw Error("Cannot find square root");return o}}return function(e){let t,r,n,a=(e-D)/z;for(t=e-D,r=0;t%z===U;t/=z,r++);for(n=z;n<e&&function(e,t,r){if(t<U)throw Error("invalid exponent, negatives unsupported");if(r<=U)throw Error("invalid modulus");if(r===D)return U;let n=D;for(;t>U;)t&D&&(n=n*e%r),e=e*e%r,t>>=D;return n}(n,a,e)!==e-D;n++)if(n>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+D)/L;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let s=(t+D)/z;return function(e,i){if(e.pow(i,a)===e.neg(e.ONE))throw Error("Cannot find square root");let o=r,l=e.pow(e.mul(e.ONE,n),t),u=e.pow(i,s),c=e.pow(i,t);for(;!e.eql(c,e.ONE);){if(e.eql(c,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(c);t<o&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,D<<BigInt(o-t-1));l=e.sqr(r),u=e.mul(u,r),c=e.mul(c,l),o=t}return u}}(e)}(e)),a(o,t))),invertBatch:e=>(function(e,t){let r=Array(t.length),n=t.reduce((t,n,a)=>e.is0(n)?t:(r[a]=t,e.mul(t,n)),e.ONE),a=e.inv(n);return t.reduceRight((t,n,a)=>e.is0(n)?t:(r[a]=e.mul(t,r[a]),e.mul(t,n)),a),r})(o,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?T(e,i):I(e,i),fromBytes:e=>{if(e.length!==i)throw Error("Field.fromBytes: expected "+i+" bytes, got "+e.length);return r?E(e):_(e)}});return Object.freeze(o)}function X(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function Q(e){let t=X(e);return t+Math.ceil(t/2)}let ee=BigInt(0),et=BigInt(1);function er(e,t){let r=t.negate();return e?r:t}function en(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function ea(e,t){return en(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}let es=new WeakMap,ei=new WeakMap;function eo(e){return ei.get(e)||1}function el(e){return B(e.Fp,W.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),B(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...J(e.n,e.nBitLength),...e,...{p:e.Fp.ORDER}})}function eu(e){void 0!==e.lowS&&h("lowS",e.lowS),void 0!==e.prehash&&h("prehash",e.prehash)}let{Ph:ec,aT:ed}=n;class ep extends Error{constructor(e=""){super(e)}}let ef={Err:ep,_tlv:{encode:(e,t)=>{let{Err:r}=ef;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let n=t.length/2,a=g(n);if(a.length/2&128)throw new r("tlv.encode: long form length too big");let s=n>127?g(a.length/2|128):"";return g(e)+s+a+t},decode(e,t){let{Err:r}=ef,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let a=t[n++],s=0;if(128&a){let e=127&a;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let i=t.subarray(n,n+e);if(i.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===i[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of i)s=s<<8|e;if(n+=e,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=a;let i=t.subarray(n,n+s);if(i.length!==s)throw new r("tlv.decode: wrong value length");return{v:i,l:t.subarray(n+s)}}},_int:{encode(e){let{Err:t}=ef;if(e<eh)throw new t("integer: negative integers are not allowed");let r=g(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=ef;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return ec(e)}},toSig(e){let{Err:t,_int:r,_tlv:n}=ef,a="string"==typeof e?ed(e):e;f(a);let{v:s,l:i}=n.decode(48,a);if(i.length)throw new t("invalid signature: left bytes after parsing");let{v:o,l:l}=n.decode(2,s),{v:u,l:c}=n.decode(2,l);if(c.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(o),s:r.decode(u)}},hexFromSig(e){let{_tlv:t,_int:r}=ef,n=t.encode(2,r.encode(e.r)),a=t.encode(2,r.encode(e.s));return t.encode(48,n+a)}},eh=BigInt(0),em=BigInt(1),ey=(BigInt(2),BigInt(3)),eg=(BigInt(4),BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f")),eb=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ev=BigInt(1),ew=BigInt(2),ex=(e,t)=>(e+t/ew)/t,e_=Y(eg,void 0,void 0,{sqrt:function(e){let t=BigInt(3),r=BigInt(6),n=BigInt(11),a=BigInt(22),s=BigInt(23),i=BigInt(44),o=BigInt(88),l=e*e*e%eg,u=l*l*e%eg,c=H(u,t,eg)*u%eg,d=H(c,t,eg)*u%eg,p=H(d,ew,eg)*l%eg,f=H(p,n,eg)*p%eg,h=H(f,a,eg)*f%eg,m=H(h,i,eg)*h%eg,y=H(m,o,eg)*m%eg,g=H(y,i,eg)*h%eg,b=H(g,t,eg)*u%eg,v=H(b,s,eg)*f%eg,w=H(v,r,eg)*l%eg,x=H(w,ew,eg);if(!e_.eql(e_.sqr(x),e))throw Error("Cannot find square root");return x}}),eE=function(e,t){let r=t=>(function(e){let t=function(e){let t=el(e);return B(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:n}=t,a=r.BYTES+1,s=2*r.BYTES+1;function i(e){return G(e,n)}let{ProjectivePoint:o,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:c}=function(e){var t;let r=function(e){let t=el(e);B(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a}=t;if(r){if(!n.eql(a,n.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=r,a=Y(r.n,r.nBitLength),s=r.toBytes||((e,t,r)=>{let a=t.toAffine();return P(Uint8Array.from([4]),n.toBytes(a.x),n.toBytes(a.y))}),i=r.fromBytes||(e=>{let t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function o(e){let{a:t,b:a}=r,s=n.sqr(e),i=n.mul(s,e);return n.add(n.add(i,n.mul(e,t)),a)}if(!n.eql(n.sqr(r.Gy),o(r.Gx)))throw Error("bad generator point: equation left != right");function l(e){let t,{allowedPrivateKeyLengths:n,nByteLength:a,wrapPrivateKey:s,n:i}=r;if(n&&"bigint"!=typeof e){if(p(e)&&(e=y(e)),"string"!=typeof e||!n.includes(e.length))throw Error("invalid private key");e=e.padStart(2*a,"0")}try{t="bigint"==typeof e?e:_(k("private key",e,a))}catch(t){throw Error("invalid private key, expected hex or "+a+" bytes, got "+typeof e)}return s&&(t=G(t,i)),O("private key",t,em,i),t}function u(e){if(!(e instanceof f))throw Error("ProjectivePoint expected")}let c=F((e,t)=>{let{px:r,py:a,pz:s}=e;if(n.eql(s,n.ONE))return{x:r,y:a};let i=e.is0();null==t&&(t=i?n.ONE:n.inv(s));let o=n.mul(r,t),l=n.mul(a,t),u=n.mul(s,t);if(i)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw Error("invZ was invalid");return{x:o,y:l}}),d=F(e=>{if(e.is0()){if(r.allowInfinityPoint&&!n.is0(e.py))return;throw Error("bad point: ZERO")}let{x:t,y:a}=e.toAffine();if(!n.isValid(t)||!n.isValid(a))throw Error("bad point: x or y not FE");let s=n.sqr(a),i=o(t);if(!n.eql(s,i))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class f{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw Error("x required");if(null==t||!n.isValid(t))throw Error("y required");if(null==r||!n.isValid(r))throw Error("z required");Object.freeze(this)}static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw Error("invalid affine point");if(e instanceof f)throw Error("projective point not allowed");let a=e=>n.eql(e,n.ZERO);return a(t)&&a(r)?f.ZERO:new f(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=n.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(f.fromAffine)}static fromHex(e){let t=f.fromAffine(i(k("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return f.BASE.multiply(l(e))}static msm(e,t){return function(e,t,r,n){if(function(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}(r,e),function(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}(n,t),r.length!==n.length)throw Error("arrays of points and scalars must have equal length");let a=e.ZERO,s=$(BigInt(r.length)),i=s>12?s-3:s>4?s-2:s?2:1,o=(1<<i)-1,l=Array(o+1).fill(a),u=Math.floor((t.BITS-1)/i)*i,c=a;for(let e=u;e>=0;e-=i){l.fill(a);for(let t=0;t<n.length;t++){let a=Number(n[t]>>BigInt(e)&BigInt(o));l[a]=l[a].add(r[t])}let t=a;for(let e=l.length-1,r=a;e>0;e--)r=r.add(l[e]),t=t.add(r);if(c=c.add(t),0!==e)for(let e=0;e<i;e++)c=c.double()}return c}(f,a,e,t)}_setWindowSize(e){g.setWindowSize(this,e)}assertValidity(){d(this)}hasEvenY(){let{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){u(e);let{px:t,py:r,pz:a}=this,{px:s,py:i,pz:o}=e,l=n.eql(n.mul(t,o),n.mul(s,a)),c=n.eql(n.mul(r,o),n.mul(i,a));return l&&c}negate(){return new f(this.px,n.neg(this.py),this.pz)}double(){let{a:e,b:t}=r,a=n.mul(t,ey),{px:s,py:i,pz:o}=this,l=n.ZERO,u=n.ZERO,c=n.ZERO,d=n.mul(s,s),p=n.mul(i,i),h=n.mul(o,o),m=n.mul(s,i);return m=n.add(m,m),c=n.mul(s,o),c=n.add(c,c),l=n.mul(e,c),u=n.mul(a,h),u=n.add(l,u),l=n.sub(p,u),u=n.add(p,u),u=n.mul(l,u),l=n.mul(m,l),c=n.mul(a,c),h=n.mul(e,h),m=n.sub(d,h),m=n.mul(e,m),m=n.add(m,c),c=n.add(d,d),d=n.add(c,d),d=n.add(d,h),d=n.mul(d,m),u=n.add(u,d),h=n.mul(i,o),h=n.add(h,h),d=n.mul(h,m),l=n.sub(l,d),c=n.mul(h,p),c=n.add(c,c),new f(l,u,c=n.add(c,c))}add(e){u(e);let{px:t,py:a,pz:s}=this,{px:i,py:o,pz:l}=e,c=n.ZERO,d=n.ZERO,p=n.ZERO,h=r.a,m=n.mul(r.b,ey),y=n.mul(t,i),g=n.mul(a,o),b=n.mul(s,l),v=n.add(t,a),w=n.add(i,o);v=n.mul(v,w),w=n.add(y,g),v=n.sub(v,w),w=n.add(t,s);let x=n.add(i,l);return w=n.mul(w,x),x=n.add(y,b),w=n.sub(w,x),x=n.add(a,s),c=n.add(o,l),x=n.mul(x,c),c=n.add(g,b),x=n.sub(x,c),p=n.mul(h,w),c=n.mul(m,b),p=n.add(c,p),c=n.sub(g,p),p=n.add(g,p),d=n.mul(c,p),g=n.add(y,y),g=n.add(g,y),b=n.mul(h,b),w=n.mul(m,w),g=n.add(g,b),b=n.sub(y,b),b=n.mul(h,b),w=n.add(w,b),y=n.mul(g,w),d=n.add(d,y),y=n.mul(x,w),c=n.mul(v,c),c=n.sub(c,y),y=n.mul(v,g),p=n.mul(x,p),new f(c,d,p=n.add(p,y))}subtract(e){return this.add(e.negate())}is0(){return this.equals(f.ZERO)}wNAF(e){return g.wNAFCached(this,e,f.normalizeZ)}multiplyUnsafe(e){let{endo:t,n:a}=r;O("scalar",e,eh,a);let s=f.ZERO;if(e===eh)return s;if(this.is0()||e===em)return this;if(!t||g.hasPrecomputes(this))return g.wNAFCachedUnsafe(this,e,f.normalizeZ);let{k1neg:i,k1:o,k2neg:l,k2:u}=t.splitScalar(e),c=s,d=s,p=this;for(;o>eh||u>eh;)o&em&&(c=c.add(p)),u&em&&(d=d.add(p)),p=p.double(),o>>=em,u>>=em;return i&&(c=c.negate()),l&&(d=d.negate()),d=new f(n.mul(d.px,t.beta),d.py,d.pz),c.add(d)}multiply(e){let t,a,{endo:s,n:i}=r;if(O("scalar",e,em,i),s){let{k1neg:r,k1:i,k2neg:o,k2:l}=s.splitScalar(e),{p:u,f:c}=this.wNAF(i),{p:d,f:p}=this.wNAF(l);u=g.constTimeNegate(r,u),d=g.constTimeNegate(o,d),d=new f(n.mul(d.px,s.beta),d.py,d.pz),t=u.add(d),a=c.add(p)}else{let{p:r,f:n}=this.wNAF(e);t=r,a=n}return f.normalizeZ([t,a])[0]}multiplyAndAddUnsafe(e,t,r){let n=f.BASE,a=(e,t)=>t!==eh&&t!==em&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),s=a(this,t).add(a(e,r));return s.is0()?void 0:s}toAffine(e){return c(this,e)}isTorsionFree(){let{h:e,isTorsionFree:t}=r;if(e===em)return!0;if(t)return t(f,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:t}=r;return e===em?this:t?t(f,this):this.multiplyUnsafe(r.h)}toRawBytes(e=!0){return h("isCompressed",e),this.assertValidity(),s(f,this,e)}toHex(e=!0){return h("isCompressed",e),y(this.toRawBytes(e))}}f.BASE=new f(r.Gx,r.Gy,n.ONE),f.ZERO=new f(n.ZERO,n.ONE,n.ZERO);let m=r.nBitLength,g=(t=r.endo?Math.ceil(m/2):m,{constTimeNegate:er,hasPrecomputes:e=>1!==eo(e),unsafeLadder(e,t,r=f.ZERO){let n=e;for(;t>ee;)t&et&&(r=r.add(n)),n=n.double(),t>>=et;return r},precomputeWindow(e,r){let{windows:n,windowSize:a}=ea(r,t),s=[],i=e,o=i;for(let e=0;e<n;e++){o=i,s.push(o);for(let e=1;e<a;e++)o=o.add(i),s.push(o);i=o.double()}return s},wNAF(e,r,n){let{windows:a,windowSize:s}=ea(e,t),i=f.ZERO,o=f.BASE,l=BigInt(2**e-1),u=2**e,c=BigInt(e);for(let e=0;e<a;e++){let t=e*s,a=Number(n&l);n>>=c,a>s&&(a-=u,n+=et);let d=t+Math.abs(a)-1,p=e%2!=0,f=a<0;0===a?o=o.add(er(p,r[t])):i=i.add(er(f,r[d]))}return{p:i,f:o}},wNAFUnsafe(e,r,n,a=f.ZERO){let{windows:s,windowSize:i}=ea(e,t),o=BigInt(2**e-1),l=2**e,u=BigInt(e);for(let e=0;e<s;e++){let t=e*i;if(n===ee)break;let s=Number(n&o);if(n>>=u,s>i&&(s-=l,n+=et),0===s)continue;let c=r[t+Math.abs(s)-1];s<0&&(c=c.negate()),a=a.add(c)}return a},getPrecomputes(e,t,r){let n=es.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&es.set(t,r(n))),n},wNAFCached(e,t,r){let n=eo(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){let a=eo(e);return 1===a?this.unsafeLadder(e,t,n):this.wNAFUnsafe(a,this.getPrecomputes(a,e,r),t,n)},setWindowSize(e,r){en(r,t),ei.set(e,r),es.delete(e)}});return{CURVE:r,ProjectivePoint:f,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:function(e){return S(e,em,r.n)}}}({...t,toBytes(e,t,n){let a=t.toAffine(),s=r.toBytes(a.x),i=P;return(h("isCompressed",n),n)?i(Uint8Array.from([t.hasEvenY()?2:3]),s):i(Uint8Array.from([4]),s,r.toBytes(a.y))},fromBytes(e){let t=e.length,n=e[0],i=e.subarray(1);if(t===a&&(2===n||3===n)){let e,t=_(i);if(!S(t,em,r.ORDER))throw Error("Point is not on curve");let a=u(t);try{e=r.sqrt(a)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&n)==1!=((e&em)===em)&&(e=r.neg(e)),{x:t,y:e}}if(t===s&&4===n)return{x:r.fromBytes(i.subarray(0,r.BYTES)),y:r.fromBytes(i.subarray(r.BYTES,2*r.BYTES))};throw Error("invalid Point, expected length of "+a+", or uncompressed "+s+", got "+t)}}),d=e=>y(I(e,t.nByteLength)),f=(e,t,r)=>_(e.slice(t,r));class m{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new m(f(e=k("compactSignature",e,2*r),0,r),f(e,r,2*r))}static fromDER(e){let{r:t,s:r}=ef.toSig(k("DER",e));return new m(t,r)}assertValidity(){O("r",this.r,em,n),O("s",this.s,em,n)}addRecoveryBit(e){return new m(this.r,this.s,e)}recoverPublicKey(e){let{r:a,s,recovery:l}=this,u=v(k("msgHash",e));if(null==l||![0,1,2,3].includes(l))throw Error("recovery id invalid");let c=2===l||3===l?a+t.n:a;if(c>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let p=(1&l)==0?"02":"03",f=o.fromHex(p+d(c)),h=K(c,n),m=i(-u*h),y=i(s*h),g=o.BASE.multiplyAndAddUnsafe(f,m,y);if(!g)throw Error("point at infinify");return g.assertValidity(),g}hasHighS(){return this.s>n>>em}normalizeS(){return this.hasHighS()?new m(this.r,i(-this.s),this.recovery):this}toDERRawBytes(){return x(this.toDERHex())}toDERHex(){return ef.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return x(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}function g(e){let t=p(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===a||n===s:r?n===2*a||n===2*s:e instanceof o}let b=t.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let r=_(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},v=t.bits2int_modN||function(e){return i(b(e))},w=C(t.nBitLength);function A(e){return O("num < 2^"+t.nBitLength,e,eh,w),I(e,t.nByteLength)}let j={lowS:t.lowS,prehash:!1},N={lowS:t.lowS,prehash:!1};return o.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return o.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(g(e))throw Error("first arg must be private key");if(!g(t))throw Error("second arg must be public key");return o.fromHex(t).multiply(l(e)).toRawBytes(r)},sign:function(e,a,s=j){let{seed:u,k2sig:d}=function(e,a,s=j){if(["recovered","canonical"].some(e=>e in s))throw Error("sign() legacy options not supported");let{hash:u,randomBytes:d}=t,{lowS:p,prehash:f,extraEntropy:h}=s;null==p&&(p=!0),e=k("msgHash",e),eu(s),f&&(e=k("prehashed msgHash",u(e)));let y=v(e),g=l(a),w=[A(g),A(y)];if(null!=h&&!1!==h){let e=!0===h?d(r.BYTES):h;w.push(k("extraEntropy",e))}return{seed:P(...w),k2sig:function(e){var t;let r=b(e);if(!c(r))return;let a=K(r,n),s=o.BASE.multiply(r).toAffine(),l=i(s.x);if(l===eh)return;let u=i(a*i(y+l*g));if(u===eh)return;let d=2*(s.x!==l)|Number(s.y&em),f=u;return p&&u>n>>em&&(f=(t=u)>n>>em?i(-t):t,d^=1),new m(l,f,d)}}}(e,a,s);return M(t.hash.outputLen,t.nByteLength,t.hmac)(u,d)},verify:function(e,r,a,s=N){let l,u;r=k("msgHash",r),a=k("publicKey",a);let{lowS:c,prehash:d,format:f}=s;if(eu(s),"strict"in s)throw Error("options.strict was renamed to lowS");if(void 0!==f&&"compact"!==f&&"der"!==f)throw Error("format must be compact or der");let h="string"==typeof e||p(e),y=!h&&!f&&"object"==typeof e&&null!==e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!h&&!y)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(y&&(u=new m(e.r,e.s)),h){try{"compact"!==f&&(u=m.fromDER(e))}catch(e){if(!(e instanceof ef.Err))throw e}u||"der"===f||(u=m.fromCompact(e))}l=o.fromHex(a)}catch(e){return!1}if(!u||c&&u.hasHighS())return!1;d&&(r=t.hash(r));let{r:g,s:b}=u,w=v(r),x=K(b,n),_=i(w*x),E=i(g*x),I=o.BASE.multiplyAndAddUnsafe(l,_,E)?.toAffine();return!!I&&i(I.x)===g},ProjectivePoint:o,Signature:m,utils:{isValidPrivateKey(e){try{return l(e),!0}catch(e){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let e=Q(t.n);return function(e,t,r=!1){let n=e.length,a=X(t),s=Q(t);if(n<16||n<s||n>1024)throw Error("expected "+s+"-1024 bytes of input, got "+n);let i=G(r?E(e):_(e),t-D)+D;return r?T(i,a):I(i,a)}(t.randomBytes(e),t.n)},precompute:(e=8,t=o.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}})({...e,...{hash:t,hmac:(e,...r)=>l(t,e,(0,i.Id)(...r)),randomBytes:i.po}});return{...r(t),create:r}}({a:BigInt(0),b:BigInt(7),Fp:e_,n:eb,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-ev*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=BigInt("0x100000000000000000000000000000000"),s=ex(t*e,eb),i=ex(-r*e,eb),o=G(e-s*t-i*n,eb),l=G(-s*r-i*t,eb),u=o>a,c=l>a;if(u&&(o=eb-o),c&&(l=eb-l),o>a||l>a)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:u,k1:o,k2neg:c,k2:l}}}},a.sc),eI=(BigInt(0),{}),eT=e=>e.toRawBytes(!0).slice(1),ek=e=>mod(e,eb),eP=eE.ProjectivePoint},55511:e=>{"use strict";e.exports=require("crypto")},56228:(e,t,r)=>{"use strict";r.d(t,{Q:()=>s});var n=r(45722);let a=/^tuple(?<array>(\[(\d*)\])*)$/;function s(e){let t="",r=e.length;for(let s=0;s<r;s++)t+=function e(t){let r=t.type;if(a.test(t.type)&&"components"in t){r="(";let s=t.components.length;for(let n=0;n<s;n++)r+=e(t.components[n]),n<s-1&&(r+=", ");let i=(0,n.Yv)(a,t.type);return r+=`)${i?.array??""}`,e({...t,type:r})}return("indexed"in t&&t.indexed&&(r=`${r} indexed`),t.name)?`${r} ${t.name}`:r}(e[s]),s!==r-1&&(t+=", ");return t}},56920:(e,t,r)=>{"use strict";r.d(t,{Fl:()=>s,NV:()=>i,ii:()=>a});var n=r(24029);class a extends n.C{constructor({offset:e,position:t,size:r}){super(`Slice ${"start"===t?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}class s extends n.C{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}class i extends n.C{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${t} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}},57131:(e,t,r)=>{"use strict";r.d(t,{S:()=>S});var n=r(51842);let a=BigInt(0x100000000-1),s=BigInt(32),i=(e,t,r)=>e<<r|t>>>32-r,o=(e,t,r)=>t<<r|e>>>32-r,l=(e,t,r)=>t<<r-32|e>>>64-r,u=(e,t,r)=>e<<r-32|t>>>64-r;var c=r(20052);let d=[],p=[],f=[],h=BigInt(0),m=BigInt(1),y=BigInt(2),g=BigInt(7),b=BigInt(256),v=BigInt(113);for(let e=0,t=m,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],d.push(2*(5*n+r)),p.push((e+1)*(e+2)/2%64);let a=h;for(let e=0;e<7;e++)(t=(t<<m^(t>>g)*v)%b)&y&&(a^=m<<(m<<BigInt(e))-m);f.push(a)}let[w,x]=function(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l}=function(e,t=!1){return t?{h:Number(e&a),l:Number(e>>s&a)}:{h:0|Number(e>>s&a),l:0|Number(e&a)}}(e[i],t);[r[i],n[i]]=[o,l]}return[r,n]}(f,!0),_=(e,t,r)=>r>32?l(e,t,r):i(e,t,r),E=(e,t,r)=>r>32?u(e,t,r):o(e,t,r);class I extends c.Vw{constructor(e,t,r,a=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=a,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,n.Fe)(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,c.DH)(this.state)}keccak(){c.qv||(0,c.Fc)(this.state32),function(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,a=(t+2)%10,s=r[a],i=r[a+1],o=_(s,i,1)^r[n],l=E(s,i,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=o,e[t+r+1]^=l}let t=e[2],a=e[3];for(let r=0;r<24;r++){let n=p[r],s=_(t,a,n),i=E(t,a,n),o=d[r];t=e[o],a=e[o+1],e[o]=s,e[o+1]=i}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=w[n],e[1]^=x[n]}r.fill(0)}(this.state32,this.rounds),c.qv||(0,c.Fc)(this.state32),this.posOut=0,this.pos=0}update(e){(0,n.CC)(this);let{blockLen:t,state:r}=this,a=(e=(0,c.ZJ)(e)).length;for(let n=0;n<a;){let s=Math.min(t-this.pos,a-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,(128&t)!=0&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,n.CC)(this,!1),(0,n.DO)(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,a=e.length;n<a;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,a-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,n.Fe)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,n.Ht)(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:a,enableXOF:s}=this;return e||(e=new I(t,r,n,s,a)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=a,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}let T=(0,c.ld)(()=>new I(136,1,32));var k=r(11246),P=r(53958),A=r(64080);function S(e,t){let r=T((0,k.q)(e,{strict:!1})?(0,P.ZJ)(e):e);return"bytes"===(t||"hex")?r:(0,A.nj)(r)}},57563:(e,t,r)=>{"use strict";r.d(t,{Ag:()=>s,Rm:()=>l,SJ:()=>o,_:()=>u,oX:()=>i,v2:()=>n});let n=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],a=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],s=[...a,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],i=[...a,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],o=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],l=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],u=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}]},58356:(e,t,r)=>{"use strict";r.d(t,{BI:()=>w,Iy:()=>l,Iz:()=>g,MR:()=>b,M_:()=>y,Nc:()=>c,O:()=>u,Wq:()=>f,YE:()=>p,YF:()=>o,YW:()=>i,_z:()=>h,d_:()=>k,dm:()=>T,fo:()=>x,gH:()=>d,j:()=>I,kE:()=>m,l3:()=>_,nK:()=>E,nM:()=>v});var n=r(39491),a=r(80298),s=r(24029);class i extends s.C{constructor({docsPath:e}){super("A constructor was not found on the ABI.\nMake sure you are using the correct ABI and that the constructor exists on it.",{docsPath:e,name:"AbiConstructorNotFoundError"})}}class o extends s.C{constructor({docsPath:e}){super("Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.\nMake sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists.",{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}s.C;class l extends s.C{constructor({data:e,params:t,size:r}){super(`Data size of ${r} bytes is too small for given parameters.`,{metaMessages:[`Params: (${(0,n.A)(t,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=t,this.size=r}}class u extends s.C{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class c extends s.C{constructor({expectedLength:e,givenLength:t,type:r}){super(`ABI encoding array length mismatch for type ${r}.
Expected length: ${e}
Given length: ${t}`,{name:"AbiEncodingArrayLengthMismatchError"})}}class d extends s.C{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${(0,a.E)(t)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class p extends s.C{constructor({expectedLength:e,givenLength:t}){super(`ABI encoding params/values length mismatch.
Expected length (params): ${e}
Given length (values): ${t}`,{name:"AbiEncodingLengthMismatchError"})}}s.C,s.C;class f extends s.C{constructor(e,{docsPath:t}){super(`Encoded error signature "${e}" not found on ABI.
Make sure you are using the correct ABI and that the error exists on it.
You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`,{docsPath:t,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class h extends s.C{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class m extends s.C{constructor(e,{docsPath:t}){super(`Encoded event signature "${e}" not found on ABI.
Make sure you are using the correct ABI and that the event exists on it.
You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`,{docsPath:t,name:"AbiEventSignatureNotFoundError"})}}class y extends s.C{constructor(e,{docsPath:t}={}){super(`Event ${e?`"${e}" `:""}not found on ABI.
Make sure you are using the correct ABI and that the event exists on it.`,{docsPath:t,name:"AbiEventNotFoundError"})}}class g extends s.C{constructor(e,{docsPath:t}={}){super(`Function ${e?`"${e}" `:""}not found on ABI.
Make sure you are using the correct ABI and that the function exists on it.`,{docsPath:t,name:"AbiFunctionNotFoundError"})}}class b extends s.C{constructor(e,{docsPath:t}){super(`Function "${e}" does not contain any \`outputs\` on ABI.
Cannot decode function result without knowing what the parameter types are.
Make sure you are using the correct ABI and that the function exists on it.`,{docsPath:t,name:"AbiFunctionOutputsNotFoundError"})}}s.C;class v extends s.C{constructor(e,t){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${(0,n.B)(e.abiItem)}\`, and`,`\`${t.type}\` in \`${(0,n.B)(t.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class w extends s.C{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`,{name:"BytesSizeMismatchError"})}}class x extends s.C{constructor({abiItem:e,data:t,params:r,size:a}){super(`Data size of ${a} bytes is too small for non-indexed event parameters.`,{metaMessages:[`Params: (${(0,n.A)(r,{includeName:!0})})`,`Data:   ${t} (${a} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=t,this.params=r,this.size=a}}class _ extends s.C{constructor({abiItem:e,param:t}){super(`Expected a topic for indexed event parameter${t.name?` "${t.name}"`:""} on event "${(0,n.B)(e,{includeName:!0})}".`,{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class E extends s.C{constructor(e,{docsPath:t}){super(`Type "${e}" is not a valid encoding type.
Please provide a valid ABI type.`,{docsPath:t,name:"InvalidAbiEncodingType"})}}class I extends s.C{constructor(e,{docsPath:t}){super(`Type "${e}" is not a valid decoding type.
Please provide a valid ABI type.`,{docsPath:t,name:"InvalidAbiDecodingType"})}}class T extends s.C{constructor(e){super(`Value "${e}" is not a valid array.`,{name:"InvalidArrayError"})}}class k extends s.C{constructor(e){super(`"${e}" is not a valid definition type.
Valid types: "function", "event", "error"`,{name:"InvalidDefinitionTypeError"})}}s.C},61927:(e,t,r)=>{"use strict";r.d(t,{C:()=>n});class n extends Error{constructor(e,t={}){let r=t.cause instanceof n?t.cause.details:t.cause?.message?t.cause.message:t.details,a=t.cause instanceof n&&t.cause.docsPath||t.docsPath;super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...a?[`Docs: https://abitype.dev${a}`]:[],...r?[`Details: ${r}`]:[],"Version: abitype@1.0.8"].join("\n")),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),t.cause&&(this.cause=t.cause),this.details=r,this.docsPath=a,this.metaMessages=t.metaMessages,this.shortMessage=e}}},62647:(e,t,r)=>{"use strict";r.d(t,{I:()=>a,R:()=>n});let n=e=>e,a=e=>e},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64080:(e,t,r)=>{"use strict";r.d(t,{$P:()=>l,My:()=>u,cK:()=>c,i3:()=>p,nj:()=>o});var n=r(66509),a=r(99134),s=r(4719);let i=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function o(e,t={}){return"number"==typeof e||"bigint"==typeof e?c(e,t):"string"==typeof e?p(e,t):"boolean"==typeof e?l(e,t):u(e,t)}function l(e,t={}){let r=`0x${Number(e)}`;return"number"==typeof t.size?((0,s.Sl)(r,{size:t.size}),(0,a.eV)(r,{size:t.size})):r}function u(e,t={}){let r="";for(let t=0;t<e.length;t++)r+=i[e[t]];let n=`0x${r}`;return"number"==typeof t.size?((0,s.Sl)(n,{size:t.size}),(0,a.eV)(n,{dir:"right",size:t.size})):n}function c(e,t={}){let r,{signed:s,size:i}=t,o=BigInt(e);i?r=s?(1n<<8n*BigInt(i)-1n)-1n:2n**(8n*BigInt(i))-1n:"number"==typeof e&&(r=BigInt(Number.MAX_SAFE_INTEGER));let l="bigint"==typeof r&&s?-r-1n:0;if(r&&o>r||o<l){let t="bigint"==typeof e?"n":"";throw new n.Ty({max:r?`${r}${t}`:void 0,min:`${l}${t}`,signed:s,size:i,value:`${e}${t}`})}let u=`0x${(s&&o<0?(1n<<BigInt(8*i))+BigInt(o):o).toString(16)}`;return i?(0,a.eV)(u,{size:i}):u}let d=new TextEncoder;function p(e,t={}){return u(d.encode(e),t)}},66509:(e,t,r)=>{"use strict";r.d(t,{H2:()=>i,Ty:()=>a,u:()=>o,xO:()=>s});var n=r(24029);class a extends n.C{constructor({max:e,min:t,signed:r,size:n,value:a}){super(`Number "${a}" is not in safe ${n?`${8*n}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class s extends n.C{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class i extends n.C{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}n.C;class o extends n.C{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}},67743:(e,t,r)=>{"use strict";r.d(t,{h:()=>h,k:()=>y});var n=r(58356),a=r(15782),s=r(24029),i=r(66509),o=r(83593),l=r(50327),u=r(99134),c=r(80298),d=r(45393),p=r(64080),f=r(23637);function h(e,t){if(e.length!==t.length)throw new n.YE({expectedLength:e.length,givenLength:t.length});let r=m(function({params:e,values:t}){let r=[];for(let h=0;h<e.length;h++)r.push(function e({param:t,value:r}){let h=y(t.type);if(h){let[a,s]=h;return function(t,{length:r,param:a}){let s=null===r;if(!Array.isArray(t))throw new n.dm(t);if(!s&&t.length!==r)throw new n.Nc({expectedLength:r,givenLength:t.length,type:`${a.type}[${r}]`});let i=!1,o=[];for(let r=0;r<t.length;r++){let n=e({param:a,value:t[r]});n.dynamic&&(i=!0),o.push(n)}if(s||i){let e=m(o);if(s){let t=(0,p.cK)(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?(0,l.xW)([t,e]):t}}if(i)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:(0,l.xW)(o.map(({encoded:e})=>e))}}(r,{length:a,param:{...t,type:s}})}if("tuple"===t.type)return function(t,{param:r}){let n=!1,a=[];for(let s=0;s<r.components.length;s++){let i=r.components[s],o=Array.isArray(t)?s:i.name,l=e({param:i,value:t[o]});a.push(l),l.dynamic&&(n=!0)}return{dynamic:n,encoded:n?m(a):(0,l.xW)(a.map(({encoded:e})=>e))}}(r,{param:t});if("address"===t.type){var g=r;if(!(0,o.P)(g))throw new a.M({address:g});return{dynamic:!1,encoded:(0,u.db)(g.toLowerCase())}}if("bool"===t.type){var b=r;if("boolean"!=typeof b)throw new s.C(`Invalid boolean value: "${b}" (type: ${typeof b}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:(0,u.db)((0,p.$P)(b))}}if(t.type.startsWith("uint")||t.type.startsWith("int")){let e=t.type.startsWith("int"),[,,n="256"]=f.Ge.exec(t.type)??[];return function(e,{signed:t,size:r=256}){if("number"==typeof r){let n=2n**(BigInt(r)-(t?1n:0n))-1n,a=t?-n-1n:0n;if(e>n||e<a)throw new i.Ty({max:n.toString(),min:a.toString(),signed:t,size:r/8,value:e.toString()})}return{dynamic:!1,encoded:(0,p.cK)(e,{size:32,signed:t})}}(r,{signed:e,size:Number(n)})}if(t.type.startsWith("bytes"))return function(e,{param:t}){let[,r]=t.type.split("bytes"),a=(0,c.E)(e);if(!r){let t=e;return a%32!=0&&(t=(0,u.db)(t,{dir:"right",size:32*Math.ceil((e.length-2)/2/32)})),{dynamic:!0,encoded:(0,l.xW)([(0,u.db)((0,p.cK)(a,{size:32})),t])}}if(a!==Number.parseInt(r))throw new n.gH({expectedSize:Number.parseInt(r),value:e});return{dynamic:!1,encoded:(0,u.db)(e,{dir:"right"})}}(r,{param:t});if("string"===t.type){var v=r;let e=(0,p.i3)(v),t=Math.ceil((0,c.E)(e)/32),n=[];for(let r=0;r<t;r++)n.push((0,u.db)((0,d.di)(e,32*r,(r+1)*32),{dir:"right"}));return{dynamic:!0,encoded:(0,l.xW)([(0,u.db)((0,p.cK)((0,c.E)(e),{size:32})),...n])}}throw new n.nK(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}({param:e[h],value:t[h]}));return r}({params:e,values:t}));return 0===r.length?"0x":r}function m(e){let t=0;for(let r=0;r<e.length;r++){let{dynamic:n,encoded:a}=e[r];n?t+=32:t+=(0,c.E)(a)}let r=[],n=[],a=0;for(let s=0;s<e.length;s++){let{dynamic:i,encoded:o}=e[s];i?(r.push((0,p.cK)(t+a,{size:32})),n.push(o),a+=(0,c.E)(o)):r.push(o)}return(0,l.xW)([...r,...n])}function y(e){let t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}},69005:(e,t,r)=>{"use strict";function n(e,{format:t}){if(!t)return{};let r={};return!function t(n){for(let a of Object.keys(n))a in e&&(r[a]=e[a]),n[a]&&"object"==typeof n[a]&&!Array.isArray(n[a])&&t(n[a])}(t(e||{})),r}r.d(t,{o:()=>n})},69806:(e,t,r)=>{"use strict";r.d(t,{sc:()=>c});var n=r(51842),a=r(20052);class s extends a.Vw{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,a.O8)(this.buffer)}update(e){(0,n.CC)(this);let{view:t,buffer:r,blockLen:s}=this,i=(e=(0,a.ZJ)(e)).length;for(let n=0;n<i;){let o=Math.min(s-this.pos,i-n);if(o===s){let t=(0,a.O8)(e);for(;s<=i-n;n+=s)this.process(t,n);continue}r.set(e.subarray(n,n+o),this.pos),this.pos+=o,n+=o,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.CC)(this),(0,n.Ht)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:s,isLE:i}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let e=o;e<s;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let a=BigInt(32),s=BigInt(0xffffffff),i=Number(r>>a&s),o=Number(r&s),l=4*!!n,u=4*!n;e.setUint32(t+l,i,n),e.setUint32(t+u,o,n)}(r,s-8,BigInt(8*this.length),i),this.process(r,0);let l=(0,a.O8)(e),u=this.outputLen;if(u%4)throw Error("_sha2: outputLen should be aligned to 32bit");let c=u/4,d=this.get();if(c>d.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)l.setUint32(4*e,d[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:a,destroyed:s,pos:i}=this;return e.length=n,e.pos=i,e.finished=a,e.destroyed=s,n%t&&e.buffer.set(r),e}}let i=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),o=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),l=new Uint32Array(64);class u extends s{constructor(){super(64,32,8,!1),this.A=0|o[0],this.B=0|o[1],this.C=0|o[2],this.D=0|o[3],this.E=0|o[4],this.F=0|o[5],this.G=0|o[6],this.H=0|o[7]}get(){let{A:e,B:t,C:r,D:n,E:a,F:s,G:i,H:o}=this;return[e,t,r,n,a,s,i,o]}set(e,t,r,n,a,s,i,o){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|a,this.F=0|s,this.G=0|i,this.H=0|o}process(e,t){for(let r=0;r<16;r++,t+=4)l[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=l[e-15],r=l[e-2],n=(0,a.Ow)(t,7)^(0,a.Ow)(t,18)^t>>>3,s=(0,a.Ow)(r,17)^(0,a.Ow)(r,19)^r>>>10;l[e]=s+l[e-7]+n+l[e-16]|0}let{A:r,B:n,C:s,D:o,E:u,F:c,G:d,H:p}=this;for(let e=0;e<64;e++){var f,h,m,y;let t=p+((0,a.Ow)(u,6)^(0,a.Ow)(u,11)^(0,a.Ow)(u,25))+((f=u)&c^~f&d)+i[e]+l[e]|0,g=((0,a.Ow)(r,2)^(0,a.Ow)(r,13)^(0,a.Ow)(r,22))+((h=r)&(m=n)^h&(y=s)^m&y)|0;p=d,d=c,c=u,u=o+t|0,o=s,s=n,n=r,r=t+g|0}r=r+this.A|0,n=n+this.B|0,s=s+this.C|0,o=o+this.D|0,u=u+this.E|0,c=c+this.F|0,d=d+this.G|0,p=p+this.H|0,this.set(r,n,s,o,u,c,d,p)}roundClean(){l.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let c=(0,a.ld)(()=>new u)},70192:(e,t,r)=>{"use strict";r.d(t,{k:()=>u});var n=r(53958),a=r(57131);let s=e=>(0,a.S)((0,n.ZJ)(e));var i=r(45614),o=r(24029);let l=e=>(function(e){let t=!0,r="",n=0,a="",s=!1;for(let i=0;i<e.length;i++){let o=e[i];if(["(",")",","].includes(o)&&(t=!0),"("===o&&n++,")"===o&&n--,t){if(0===n){if(" "===o&&["event","function",""].includes(a))a="";else if(a+=o,")"===o){s=!0;break}continue}if(" "===o){","!==e[i-1]&&","!==r&&",("!==r&&(r="",t=!1);continue}a+=o,r+=o}}if(!s)throw new o.C("Unable to normalize signature.");return a})("string"==typeof e?e:(0,i.B)(e));function u(e){return s(l(e))}},72927:(e,t,r)=>{"use strict";function n(){let e=()=>void 0,t=()=>void 0;return{promise:new Promise((r,n)=>{e=r,t=n}),resolve:e,reject:t}}r.d(t,{Y:()=>n})},74297:(e,t,r)=>{"use strict";r.d(t,{M:()=>a});var n=r(20883);function a({blockNumber:e,chain:t,contract:r}){let a=t?.contracts?.[r];if(!a)throw new n.rj({chain:t,contract:{name:r}});if(e&&a.blockCreated&&a.blockCreated>e)throw new n.rj({blockNumber:e,chain:t,contract:{name:r,blockCreated:a.blockCreated}});return a.address}},77336:e=>{"use strict";e.exports=JSON.parse('{"name":"dotenv","version":"16.5.0","description":"Loads environment variables from .env file","main":"lib/main.js","types":"lib/main.d.ts","exports":{".":{"types":"./lib/main.d.ts","require":"./lib/main.js","default":"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},"scripts":{"dts-check":"tsc --project tests/types/tsconfig.json","lint":"standard","pretest":"npm run lint && npm run dts-check","test":"tap run --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run --show-full-coverage --timeout=60000 --coverage-report=lcov","prerelease":"npm test","release":"standard-version"},"repository":{"type":"git","url":"git://github.com/motdotla/dotenv.git"},"homepage":"https://github.com/motdotla/dotenv#readme","funding":"https://dotenvx.com","keywords":["dotenv","env",".env","environment","variables","config","settings"],"readmeFilename":"README.md","license":"BSD-2-Clause","devDependencies":{"@types/node":"^18.11.3","decache":"^4.6.2","sinon":"^14.0.1","standard":"^17.0.0","standard-version":"^9.5.0","tap":"^19.2.0","typescript":"^4.8.4"},"engines":{"node":">=12"},"browser":{"fs":false}}')},77598:e=>{"use strict";e.exports=require("node:crypto")},78335:()=>{},80298:(e,t,r)=>{"use strict";r.d(t,{E:()=>a});var n=r(11246);function a(e){return(0,n.q)(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}},81443:(e,t,r)=>{"use strict";function n(e,t){let r=e.toString(),n=r.startsWith("-");n&&(r=r.slice(1));let[a,s]=[(r=r.padStart(t,"0")).slice(0,r.length-t),r.slice(r.length-t)];return s=s.replace(/(0+)$/,""),`${n?"-":""}${a||"0"}${s?`.${s}`:""}`}r.d(t,{J:()=>n})},81709:(e,t,r)=>{"use strict";r.d(t,{h:()=>s});var n=r(15782),a=r(83593);function s(e,t){if(!(0,a.P)(e,{strict:!1}))throw new n.M({address:e});if(!(0,a.P)(t,{strict:!1}))throw new n.M({address:t});return e.toLowerCase()===t.toLowerCase()}},83534:(e,t,r)=>{"use strict";r.d(t,{l:()=>s});var n=r(8486);let a={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new n.hX({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new n.SK({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new n.B4({offset:e});let t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new n.B4({offset:e});let t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){let r=t??this.position;return this.assertPosition(r+e-1),this.bytes.subarray(r,r+e)},inspectUint8(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){let t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){let t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){let t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,255&e),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();let e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();let r=this.inspectBytes(e);return this.position+=t??e,r},readUint8(){this.assertReadLimit(),this._touch();let e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();let e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();let e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();let e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){let t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;let e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function s(e,{recursiveReadLimit:t=8192}={}){let r=Object.create(a);return r.bytes=e,r.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),r.positionReadCount=new Map,r.recursiveReadLimit=t,r}},83593:(e,t,r)=>{"use strict";r.d(t,{P:()=>o});var n=r(35491),a=r(53697);let s=/^0x[a-fA-F0-9]{40}$/,i=new n.A(8192);function o(e,t){let{strict:r=!0}=t??{},n=`${e}.${r}`;if(i.has(n))return i.get(n);let o=!!s.test(e)&&(e.toLowerCase()===e||!r||(0,a.o)(e)===e);return i.set(n,o),o}},84439:(e,t,r)=>{"use strict";r.d(t,{zX:()=>g,bG:()=>b,M:()=>v,rR:()=>w,Po:()=>x,$S:()=>_});var n=r(52049),a=r(88981),s=r(38338),i=r(39491),o=r(53347);function l({abiItem:e,args:t,includeFunctionName:r=!0,includeName:n=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${r?e.name:""}(${e.inputs.map((e,r)=>`${n&&e.name?`${e.name}: `:""}${"object"==typeof t[r]?(0,o.A)(t[r]):t[r]}`).join(", ")})`}var u=r(28286),c=r(97268),d=r(93490),p=r(58356),f=r(24029),h=r(45455),m=r(49802),y=r(62647);class g extends f.C{constructor(e,{account:t,docsPath:r,chain:a,data:s,gas:i,gasPrice:o,maxFeePerGas:l,maxPriorityFeePerGas:u,nonce:p,to:f,value:y,stateOverride:g}){let b=t?(0,n.J)(t):void 0,v=(0,m.aO)({from:b?.address,to:f,value:void 0!==y&&`${(0,c.c)(y)} ${a?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:i,gasPrice:void 0!==o&&`${(0,d.Q)(o)} gwei`,maxFeePerGas:void 0!==l&&`${(0,d.Q)(l)} gwei`,maxPriorityFeePerGas:void 0!==u&&`${(0,d.Q)(u)} gwei`,nonce:p});g&&(v+=`
${(0,h.uj)(g)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",v].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class b extends f.C{constructor(e,{abi:t,args:r,contractAddress:n,docsPath:a,functionName:s,sender:o}){let c=(0,u.iY)({abi:t,args:r,name:s}),d=c?l({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,p=c?(0,i.B)(c,{includeName:!0}):void 0,f=(0,m.aO)({address:n&&(0,y.R)(n),function:p,args:d&&"()"!==d&&`${[...Array(s?.length??0).keys()].map(()=>" ").join("")}${d}`,sender:o});super(e.shortMessage||`An unknown error occurred while executing the contract function "${s}".`,{cause:e,docsPath:a,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],f&&"Contract Call:",f].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=t,this.args=r,this.cause=e,this.contractAddress=n,this.functionName=s,this.sender=o}}class v extends f.C{constructor({abi:e,data:t,functionName:r,message:n}){let o,u,c,d,f;if(t&&"0x"!==t)try{let{abiItem:r,errorName:n,args:o}=f=(0,s.W)({abi:e,data:t});if("Error"===n)c=o[0];else if("Panic"===n){let[e]=o;c=a.fD[e]}else{let e=r?(0,i.B)(r,{includeName:!0}):void 0,t=r&&o?l({abiItem:r,args:o,includeFunctionName:!1,includeName:!1}):void 0;u=[e?`Error: ${e}`:"",t&&"()"!==t?`       ${[...Array(n?.length??0).keys()].map(()=>" ").join("")}${t}`:""]}}catch(e){o=e}else n&&(c=n);o instanceof p.Wq&&(d=o.signature,u=[`Unable to decode signature "${d}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${d}.`]),super(c&&"execution reverted"!==c||d?[`The contract function "${r}" reverted with the following ${d?"signature":"reason"}:`,c||d].join("\n"):`The contract function "${r}" reverted.`,{cause:o,metaMessages:u,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=f,this.raw=t,this.reason=c,this.signature=d}}class w extends f.C{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class x extends f.C{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class _ extends f.C{constructor({data:e,message:t}){super(t||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}},85408:(e,t,r)=>{"use strict";r.d(t,{A7:()=>s,BG:()=>i,Fo:()=>f,K0:()=>l,Oh:()=>u,RM:()=>y,jj:()=>o,k5:()=>d,lN:()=>m,lY:()=>p,uC:()=>h,vW:()=>c});var n=r(93490),a=r(24029);class s extends a.C{constructor({cause:e,message:t}={}){let r=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(s,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(s,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class i extends a.C{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${(0,n.Q)(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(i,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class o extends a.C{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${(0,n.Q)(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(o,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class l extends a.C{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(l,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class u extends a.C{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.
Try increasing the nonce or find the latest nonce with \`getTransactionCount\`.`,{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(u,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class c extends a.C{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(c,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class d extends a.C{constructor({cause:e}={}){super("The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account.",{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(d,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class p extends a.C{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(p,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class f extends a.C{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(f,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class h extends a.C{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(h,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class m extends a.C{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:r}={}){super(`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${(0,n.Q)(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${(0,n.Q)(r)} gwei`:""}).`,{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(m,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class y extends a.C{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}},88981:(e,t,r)=>{"use strict";r.d(t,{J9:()=>s,Mc:()=>a,fD:()=>n});let n={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},a={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},s={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"}},90455:(e,t,r)=>{"use strict";r.d(t,{yH:()=>u});var n=r(15782),a=r(56920),s=r(45455),i=r(83593),o=r(64080);function l(e){if(e&&0!==e.length)return e.reduce((e,{slot:t,value:r})=>{if(66!==t.length)throw new a.NV({size:t.length,targetSize:66,type:"hex"});if(66!==r.length)throw new a.NV({size:r.length,targetSize:66,type:"hex"});return e[t]=r,e},{})}function u(e){if(!e)return;let t={};for(let{address:r,...a}of e){if(!(0,i.P)(r,{strict:!1}))throw new n.M({address:r});if(t[r])throw new s.Hi({address:r});t[r]=function(e){let{balance:t,nonce:r,state:n,stateDiff:a,code:i}=e,u={};if(void 0!==i&&(u.code=i),void 0!==t&&(u.balance=(0,o.cK)(t)),void 0!==r&&(u.nonce=(0,o.cK)(r)),void 0!==n&&(u.state=l(n)),void 0!==a){if(u.state)throw new s.ft;u.stateDiff=l(a)}return u}(a)}return t}},90580:(e,t,r)=>{"use strict";r.d(t,{d:()=>i});var n=r(84439),a=r(85408),s=r(29172);function i(e,{docsPath:t,...r}){let i=(()=>{let t=(0,s.l)(e,r);return t instanceof a.RM?e:t})();return new n.zX(i,{docsPath:t,...r})}},93154:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n=r(52049),a=r(26361),s=r(15782),i=r(85408),o=r(49802),l=r(83593);function u(e){let{account:t,gasPrice:r,maxFeePerGas:u,maxPriorityFeePerGas:c,to:d}=e,p=t?(0,n.J)(t):void 0;if(p&&!(0,l.P)(p.address))throw new s.M({address:p.address});if(d&&!(0,l.P)(d))throw new s.M({address:d});if(void 0!==r&&(void 0!==u||void 0!==c))throw new o.n3;if(u&&u>a.Ao)throw new i.BG({maxFeePerGas:u});if(c&&u&&c>u)throw new i.lN({maxFeePerGas:u,maxPriorityFeePerGas:c})}},93490:(e,t,r)=>{"use strict";r.d(t,{Q:()=>s});var n=r(48730),a=r(81443);function s(e,t="wei"){return(0,a.J)(e,n.sz[t])}},96487:()=>{},96559:(e,t,r)=>{"use strict";e.exports=r(44870)},97185:(e,t,r)=>{"use strict";r.d(t,{LX:()=>n,WN:()=>a,nP:()=>s});let n="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",a="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",s="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572"},97268:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(48730),a=r(81443);function s(e,t="wei"){return(0,a.J)(e,n.eL[t])}},97329:(e,t,r)=>{let n=r(29021),a=r(33873),s=r(21820),i=r(55511),o=r(77336).version,l=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function u(e){console.log(`[dotenv@${o}][DEBUG] ${e}`)}function c(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function d(e){let t=null;if(e&&e.path&&e.path.length>0)if(Array.isArray(e.path))for(let r of e.path)n.existsSync(r)&&(t=r.endsWith(".vault")?r:`${r}.vault`);else t=e.path.endsWith(".vault")?e.path:`${e.path}.vault`;else t=a.resolve(process.cwd(),".env.vault");return n.existsSync(t)?t:null}function p(e){return"~"===e[0]?a.join(s.homedir(),e.slice(1)):e}let f={configDotenv:function(e){let t,r=a.resolve(process.cwd(),".env"),s="utf8",i=!!(e&&e.debug);e&&e.encoding?s=e.encoding:i&&u("No encoding is specified. UTF-8 is used by default");let o=[r];if(e&&e.path)if(Array.isArray(e.path))for(let t of(o=[],e.path))o.push(p(t));else o=[p(e.path)];let l={};for(let r of o)try{let t=f.parse(n.readFileSync(r,{encoding:s}));f.populate(l,t,e)}catch(e){i&&u(`Failed to load ${r} ${e.message}`),t=e}let c=process.env;return(e&&null!=e.processEnv&&(c=e.processEnv),f.populate(c,l,e),t)?{parsed:l,error:t}:{parsed:l}},_configVault:function(e){e&&e.debug&&u("Loading env from encrypted .env.vault");let t=f._parseVault(e),r=process.env;return e&&null!=e.processEnv&&(r=e.processEnv),f.populate(r,t,e),{parsed:t}},_parseVault:function(e){let t,r=d(e),n=f.configDotenv({path:r});if(!n.parsed){let e=Error(`MISSING_DATA: Cannot parse ${r} for an unknown reason`);throw e.code="MISSING_DATA",e}let a=c(e).split(","),s=a.length;for(let e=0;e<s;e++)try{let r=a[e].trim(),s=function(e,t){let r;try{r=new URL(t)}catch(e){if("ERR_INVALID_URL"===e.code){let e=Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw e.code="INVALID_DOTENV_KEY",e}throw e}let n=r.password;if(!n){let e=Error("INVALID_DOTENV_KEY: Missing key part");throw e.code="INVALID_DOTENV_KEY",e}let a=r.searchParams.get("environment");if(!a){let e=Error("INVALID_DOTENV_KEY: Missing environment part");throw e.code="INVALID_DOTENV_KEY",e}let s=`DOTENV_VAULT_${a.toUpperCase()}`,i=e.parsed[s];if(!i){let e=Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${s} in your .env.vault file.`);throw e.code="NOT_FOUND_DOTENV_ENVIRONMENT",e}return{ciphertext:i,key:n}}(n,r);t=f.decrypt(s.ciphertext,s.key);break}catch(t){if(e+1>=s)throw t}return f.parse(t)},config:function(e){if(0===c(e).length)return f.configDotenv(e);let t=d(e);if(!t){var r;return r=`You set DOTENV_KEY but you are missing a .env.vault file at ${t}. Did you forget to build it?`,console.log(`[dotenv@${o}][WARN] ${r}`),f.configDotenv(e)}return f._configVault(e)},decrypt:function(e,t){let r=Buffer.from(t.slice(-64),"hex"),n=Buffer.from(e,"base64"),a=n.subarray(0,12),s=n.subarray(-16);n=n.subarray(12,-16);try{let e=i.createDecipheriv("aes-256-gcm",r,a);return e.setAuthTag(s),`${e.update(n)}${e.final()}`}catch(n){let e=n instanceof RangeError,t="Invalid key length"===n.message,r="Unsupported state or unable to authenticate data"===n.message;if(e||t){let e=Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw e.code="INVALID_DOTENV_KEY",e}if(r){let e=Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw e.code="DECRYPTION_FAILED",e}throw n}},parse:function(e){let t,r={},n=e.toString();for(n=n.replace(/\r\n?/mg,"\n");null!=(t=l.exec(n));){let e=t[1],n=t[2]||"",a=(n=n.trim())[0];n=n.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),'"'===a&&(n=(n=n.replace(/\\n/g,"\n")).replace(/\\r/g,"\r")),r[e]=n}return r},populate:function(e,t,r={}){let n=!!(r&&r.debug),a=!!(r&&r.override);if("object"!=typeof t){let e=Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw e.code="OBJECT_REQUIRED",e}for(let r of Object.keys(t))Object.prototype.hasOwnProperty.call(e,r)?(!0===a&&(e[r]=t[r]),n&&(!0===a?u(`"${r}" is already defined and WAS overwritten`):u(`"${r}" is already defined and was NOT overwritten`))):e[r]=t[r]}};e.exports.configDotenv=f.configDotenv,e.exports._configVault=f._configVault,e.exports._parseVault=f._parseVault,e.exports.config=f.config,e.exports.decrypt=f.decrypt,e.exports.parse=f.parse,e.exports.populate=f.populate,e.exports=f},97339:(e,t,r)=>{"use strict";r.d(t,{V:()=>s});var n=r(45393),a=r(70192);let s=e=>(0,n.di)((0,a.k)(e),0,4)},97705:(e,t,r)=>{"use strict";r.d(t,{h:()=>n});let n=r(70192).k},98900:(e,t,r)=>{"use strict";r.d(t,{e:()=>o});var n=r(58356),a=r(16285),s=r(28286);let i="/docs/contract/decodeFunctionResult";function o(e){let{abi:t,args:r,functionName:o,data:l}=e,u=t[0];if(o){let e=(0,s.iY)({abi:t,args:r,name:o});if(!e)throw new n.Iz(o,{docsPath:i});u=e}if("function"!==u.type)throw new n.Iz(void 0,{docsPath:i});if(!u.outputs)throw new n.MR(u.name,{docsPath:i});let c=(0,a.n)(u.outputs,l);return c&&c.length>1?c:c&&1===c.length?c[0]:void 0}},99134:(e,t,r)=>{"use strict";r.d(t,{db:()=>s,eV:()=>a});var n=r(56920);function a(e,{dir:t,size:r=32}={}){return"string"==typeof e?s(e,{dir:t,size:r}):function(e,{dir:t,size:r=32}={}){if(null===r)return e;if(e.length>r)throw new n.Fl({size:e.length,targetSize:r,type:"bytes"});let a=new Uint8Array(r);for(let n=0;n<r;n++){let s="right"===t;a[s?n:r-n-1]=e[s?n:e.length-n-1]}return a}(e,{dir:t,size:r})}function s(e,{dir:t,size:r=32}={}){if(null===r)return e;let a=e.replace("0x","");if(a.length>2*r)throw new n.Fl({size:Math.ceil(a.length/2),targetSize:r,type:"hex"});return`0x${a["right"===t?"padEnd":"padStart"](2*r,"0")}`}},99180:()=>{var e;!function(e){!function(t){var r="object"==typeof globalThis?globalThis:"object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:function(){try{return Function("return this;")()}catch(e){}}()||function(){try{return(0,eval)("(function() { return this; })()")}catch(e){}}(),n=a(e);function a(e,t){return function(r,n){Object.defineProperty(e,r,{configurable:!0,writable:!0,value:n}),t&&t(r,n)}}void 0!==r.Reflect&&(n=a(r.Reflect,n)),t(n,r),void 0===r.Reflect&&(r.Reflect=e)}(function(e,t){var r,n=Object.prototype.hasOwnProperty,a="function"==typeof Symbol,s=a&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=a&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,l=({__proto__:[]})instanceof Array,u=!o&&!l,c={create:o?function(){return B(Object.create(null))}:l?function(){return B({__proto__:null})}:function(){return B({})},has:u?function(e,t){return n.call(e,t)}:function(e,t){return t in e},get:u?function(e,t){return n.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}},d=Object.getPrototypeOf(Function),p="function"==typeof Map&&"function"==typeof Map.prototype.entries?Map:function(){var e={},t=[],r=function(){function e(e,t,r){this._index=0,this._keys=e,this._values=t,this._selector=r}return e.prototype["@@iterator"]=function(){return this},e.prototype[i]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();function n(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(n.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),n.prototype.has=function(e){return this._find(e,!1)>=0},n.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},n.prototype.set=function(e,t){var r=this._find(e,!0);return this._values[r]=t,this},n.prototype.delete=function(t){var r=this._find(t,!1);if(r>=0){for(var n=this._keys.length,a=r+1;a<n;a++)this._keys[a-1]=this._keys[a],this._values[a-1]=this._values[a];return this._keys.length--,this._values.length--,O(t,this._cacheKey)&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},n.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},n.prototype.keys=function(){return new r(this._keys,this._values,a)},n.prototype.values=function(){return new r(this._keys,this._values,s)},n.prototype.entries=function(){return new r(this._keys,this._values,o)},n.prototype["@@iterator"]=function(){return this.entries()},n.prototype[i]=function(){return this.entries()},n.prototype._find=function(e,t){if(!O(this._cacheKey,e)){this._cacheIndex=-1;for(var r=0;r<this._keys.length;r++)if(O(this._keys[r],e)){this._cacheIndex=r;break}}return this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},n;function a(e,t){return e}function s(e,t){return t}function o(e,t){return[e,t]}}(),f="function"==typeof Set&&"function"==typeof Set.prototype.entries?Set:function(){function e(){this._map=new p}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.keys()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[i]=function(){return this.keys()},e}(),h="function"==typeof WeakMap?WeakMap:function(){var e=c.create(),t=a();function r(){this._key=a()}return r.prototype.has=function(e){var t=s(e,!1);return void 0!==t&&c.has(t,this._key)},r.prototype.get=function(e){var t=s(e,!1);return void 0!==t?c.get(t,this._key):void 0},r.prototype.set=function(e,t){return s(e,!0)[this._key]=t,this},r.prototype.delete=function(e){var t=s(e,!1);return void 0!==t&&delete t[this._key]},r.prototype.clear=function(){this._key=a()},r;function a(){var t;do t="@@WeakMap@@"+function(){var e=function(e){if("function"==typeof Uint8Array){var t=new Uint8Array(16);return"undefined"!=typeof crypto?crypto.getRandomValues(t):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(t):i(t,16),t}return i(Array(e),e)}(16);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var t="",r=0;r<16;++r){var n=e[r];(4===r||6===r||8===r)&&(t+="-"),n<16&&(t+="0"),t+=n.toString(16).toLowerCase()}return t}();while(c.has(e,t));return e[t]=!0,t}function s(e,r){if(!n.call(e,t)){if(!r)return;Object.defineProperty(e,t,{value:c.create()})}return e[t]}function i(e,t){for(var r=0;r<t;++r)e[r]=255*Math.random()|0;return e}}(),m=a?Symbol.for("@reflect-metadata:registry"):void 0,y=(!E(m)&&T(t.Reflect)&&Object.isExtensible(t.Reflect)&&(r=t.Reflect[m]),E(r)&&(r=function(){E(m)||void 0===t.Reflect||m in t.Reflect||"function"!=typeof t.Reflect.defineMetadata||(r=(e=t.Reflect).defineMetadata,n=e.hasOwnMetadata,a=e.getOwnMetadata,s=e.getOwnMetadataKeys,i=e.deleteMetadata,o=new h,l={isProviderFor:function(e,t){var r=o.get(e);return!!(!E(r)&&r.has(t))||!!s(e,t).length&&(E(r)&&(r=new f,o.set(e,r)),r.add(t),!0)},OrdinaryDefineOwnMetadata:r,OrdinaryHasOwnMetadata:n,OrdinaryGetOwnMetadata:a,OrdinaryOwnMetadataKeys:s,OrdinaryDeleteMetadata:i});var e,r,n,a,s,i,o,l,u,c,d,y=new h,g={registerProvider:function(e){if(!Object.isExtensible(g))throw Error("Cannot add provider to a frozen registry.");switch(!0){case l===e:break;case E(u):u=e;break;case u===e:break;case E(c):c=e;break;case c===e:break;default:void 0===d&&(d=new f),d.add(e)}},getProvider:b,setProvider:function(e,t,r){if(!function(e){if(E(e))throw TypeError();return u===e||c===e||!E(d)&&d.has(e)}(r))throw Error("Metadata provider not registered.");var n=b(e,t);if(n!==r){if(!E(n))return!1;var a=y.get(e);E(a)&&(a=new p,y.set(e,a)),a.set(t,r)}return!0}};return g;function b(e,t){var r,n=y.get(e);return E(n)||(r=n.get(t)),E(r)&&(r=function(e,t){if(!E(u)){if(u.isProviderFor(e,t))return u;if(!E(c)){if(c.isProviderFor(e,t))return u;if(!E(d))for(var r=C(d);;){var n=j(r);if(!n)return;var a=n.value;if(a.isProviderFor(e,t))return N(r),a}}}if(!E(l)&&l.isProviderFor(e,t))return l}(e,t),E(r)||(E(n)&&(n=new p,y.set(e,n)),n.set(t,r))),r}}()),!E(m)&&T(t.Reflect)&&Object.isExtensible(t.Reflect)&&Object.defineProperty(t.Reflect,m,{enumerable:!1,configurable:!1,writable:!1,value:r}),r),g=function(e){var t=new h,r={isProviderFor:function(e,r){var n=t.get(e);return!E(n)&&n.has(r)},OrdinaryDefineOwnMetadata:function(e,t,r,a){n(r,a,!0).set(e,t)},OrdinaryHasOwnMetadata:function(e,t,r){var a=n(t,r,!1);return!E(a)&&!!a.has(e)},OrdinaryGetOwnMetadata:function(e,t,r){var a=n(t,r,!1);if(!E(a))return a.get(e)},OrdinaryOwnMetadataKeys:function(e,t){var r=[],a=n(e,t,!1);if(E(a))return r;for(var s=C(a.keys()),i=0;;){var o=j(s);if(!o)return r.length=i,r;var l=o.value;try{r[i]=l}catch(e){try{N(s)}finally{throw e}}i++}},OrdinaryDeleteMetadata:function(e,r,a){var s=n(r,a,!1);if(E(s)||!s.delete(e))return!1;if(0===s.size){var i=t.get(r);E(i)||(i.delete(a),0===i.size&&t.delete(i))}return!0}};return y.registerProvider(r),r;function n(n,a,s){var i=t.get(n),o=!1;if(E(i)){if(!s)return;i=new p,t.set(n,i),o=!0}var l=i.get(a);if(E(l)){if(!s)return;if(l=new p,i.set(a,l),!e.setProvider(n,a,r))throw i.delete(a),o&&t.delete(n),Error("Wrong provider for target.")}return l}}(y);function b(e,t,r){var n=R(t,r,!1);return!E(n)&&!!n.OrdinaryHasOwnMetadata(e,t,r)}function v(e,t,r){var n=R(t,r,!1);if(!E(n))return n.OrdinaryGetOwnMetadata(e,t,r)}function w(e,t,r,n){R(r,n,!0).OrdinaryDefineOwnMetadata(e,t,r,n)}function x(e,t){var r=R(e,t,!1);return r?r.OrdinaryOwnMetadataKeys(e,t):[]}function _(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function E(e){return void 0===e}function I(e){return null===e}function T(e){return"object"==typeof e?null!==e:"function"==typeof e}e("decorate",function(e,t,r,n){if(E(r)){if(!P(e)||!S(t))throw TypeError();for(var a=e,s=t,i=a.length-1;i>=0;--i){var o=(0,a[i])(s);if(!E(o)&&!I(o)){if(!S(o))throw TypeError();s=o}}return s}if(!P(e)||!T(t)||!T(n)&&!E(n)&&!I(n))throw TypeError();return I(n)&&(n=void 0),function(e,t,r,n){for(var a=e.length-1;a>=0;--a){var s=(0,e[a])(t,r,n);if(!E(s)&&!I(s)){if(!T(s))throw TypeError();n=s}}return n}(e,t,r=k(r),n)}),e("metadata",function(e,t){return function(r,n){if(!T(r)||!E(n)&&!function(e){switch(_(e)){case 3:case 4:return!0;default:return!1}}(n))throw TypeError();w(e,t,r,n)}}),e("defineMetadata",function(e,t,r,n){if(!T(r))throw TypeError();return E(n)||(n=k(n)),w(e,t,r,n)}),e("hasMetadata",function(e,t,r){if(!T(t))throw TypeError();return E(r)||(r=k(r)),function e(t,r,n){if(b(t,r,n))return!0;var a=M(r);return!I(a)&&e(t,a,n)}(e,t,r)}),e("hasOwnMetadata",function(e,t,r){if(!T(t))throw TypeError();return E(r)||(r=k(r)),b(e,t,r)}),e("getMetadata",function(e,t,r){if(!T(t))throw TypeError();return E(r)||(r=k(r)),function e(t,r,n){if(b(t,r,n))return v(t,r,n);var a=M(r);if(!I(a))return e(t,a,n)}(e,t,r)}),e("getOwnMetadata",function(e,t,r){if(!T(t))throw TypeError();return E(r)||(r=k(r)),v(e,t,r)}),e("getMetadataKeys",function(e,t){if(!T(e))throw TypeError();return E(t)||(t=k(t)),function e(t,r){var n=x(t,r),a=M(t);if(null===a)return n;var s=e(a,r);if(s.length<=0)return n;if(n.length<=0)return s;for(var i=new f,o=[],l=0;l<n.length;l++){var u=n[l],c=i.has(u);c||(i.add(u),o.push(u))}for(var d=0;d<s.length;d++){var u=s[d],c=i.has(u);c||(i.add(u),o.push(u))}return o}(e,t)}),e("getOwnMetadataKeys",function(e,t){if(!T(e))throw TypeError();return E(t)||(t=k(t)),x(e,t)}),e("deleteMetadata",function(e,t,r){if(!T(t)||(E(r)||(r=k(r)),!T(t)))throw TypeError();E(r)||(r=k(r));var n=R(t,r,!1);return!E(n)&&n.OrdinaryDeleteMetadata(e,t,r)});function k(e){var t=function(e,t){switch(_(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var r="string",n=$(e,s);if(void 0!==n){var a=n.call(e,r);if(T(a))throw TypeError();return a}return function(e,t){if("string"===t){var r=e.toString;if(A(r)){var n=r.call(e);if(!T(n))return n}var a=e.valueOf;if(A(a)){var n=a.call(e);if(!T(n))return n}}else{var a=e.valueOf;if(A(a)){var n=a.call(e);if(!T(n))return n}var s=e.toString;if(A(s)){var n=s.call(e);if(!T(n))return n}}throw TypeError()}(e,r)}(e,0);return"symbol"==typeof t?t:""+t}function P(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function A(e){return"function"==typeof e}function S(e){return"function"==typeof e}function O(e,t){return e===t||e!=e&&t!=t}function $(e,t){var r=e[t];if(null!=r){if(!A(r))throw TypeError();return r}}function C(e){var t=$(e,i);if(!A(t))throw TypeError();var r=t.call(e);if(!T(r))throw TypeError();return r}function j(e){var t=e.next();return!t.done&&t}function N(e){var t=e.return;t&&t.call(e)}function M(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===d||t!==d)return t;var r=e.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return t;var a=n.constructor;return"function"!=typeof a||a===e?t:a}function R(e,t,r){var n=y.getProvider(e,t);if(!E(n))return n;if(r){if(y.setProvider(e,t,g))return g;throw Error("Illegal state.")}}function B(e){return e.__=void 0,delete e.__,e}})}(e||(e={}))}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[7719],()=>r(12816));module.exports=n})();